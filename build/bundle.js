var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function r(e){e.forEach(t)}function o(e){return"function"==typeof e}function i(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function s(e,t){e.appendChild(t)}function l(e,t,n){e.insertBefore(t,n||null)}function c(e){e.parentNode.removeChild(e)}function a(e){return document.createElement(e)}function u(e){return document.createTextNode(e)}function h(){return u(" ")}function d(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function f(e){return function(t){return t.preventDefault(),e.call(this,t)}}function p(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function m(e){return""===e?null:+e}function g(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function b(e,t){e.value=null==t?"":t}let v;function x(e){v=e}function $(){if(!v)throw new Error("Function called outside component initialization");return v}function k(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e.call(this,t)))}const y=[],w=[],S=[],C=[],M=Promise.resolve();let P=!1;function E(e){S.push(e)}const D=new Set;let L=0;function z(){const e=v;do{for(;L<y.length;){const e=y[L];L++,x(e),H(e.$$)}for(x(null),y.length=0,L=0;w.length;)w.pop()();for(let e=0;e<S.length;e+=1){const t=S[e];D.has(t)||(D.add(t),t())}S.length=0}while(y.length);for(;C.length;)C.pop()();P=!1,D.clear(),x(e)}function H(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(E)}}const F=new Set;let _;function T(){_={r:0,c:[],p:_}}function W(){_.r||r(_.c),_=_.p}function A(e,t){e&&e.i&&(F.delete(e),e.i(t))}function j(e,t,n,r){if(e&&e.o){if(F.has(e))return;F.add(e),_.c.push((()=>{F.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}}function G(e,t){const n=t.token={};function r(e,r,o,i){if(t.token!==n)return;t.resolved=i;let s=t.ctx;void 0!==o&&(s=s.slice(),s[o]=i);const l=e&&(t.current=e)(s);let c=!1;t.block&&(t.blocks?t.blocks.forEach(((e,n)=>{n!==r&&e&&(T(),j(e,1,1,(()=>{t.blocks[n]===e&&(t.blocks[n]=null)})),W())})):t.block.d(1),l.c(),A(l,1),l.m(t.mount(),t.anchor),c=!0),t.block=l,t.blocks&&(t.blocks[r]=l),c&&z()}if((o=e)&&"object"==typeof o&&"function"==typeof o.then){const n=$();if(e.then((e=>{x(n),r(t.then,1,t.value,e),x(null)}),(e=>{if(x(n),r(t.catch,2,t.error,e),x(null),!t.hasCatch)throw e})),t.current!==t.pending)return r(t.pending,0),!0}else{if(t.current!==t.then)return r(t.then,1,t.value,e),!0;t.resolved=e}var o}function R(e){e&&e.c()}function N(e,n,i,s){const{fragment:l,on_mount:c,on_destroy:a,after_update:u}=e.$$;l&&l.m(n,i),s||E((()=>{const n=c.map(t).filter(o);a?a.push(...n):r(n),e.$$.on_mount=[]})),u.forEach(E)}function q(e,t){const n=e.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function O(e,t){-1===e.$$.dirty[0]&&(y.push(e),P||(P=!0,M.then(z)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function I(t,o,i,s,l,a,u,h=[-1]){const d=v;x(t);const f=t.$$={fragment:null,ctx:null,props:a,update:e,not_equal:l,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(d?d.$$.context:[])),callbacks:n(),dirty:h,skip_bound:!1,root:o.target||d.$$.root};u&&u(f.root);let p=!1;if(f.ctx=i?i(t,o.props||{},((e,n,...r)=>{const o=r.length?r[0]:n;return f.ctx&&l(f.ctx[e],f.ctx[e]=o)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](o),p&&O(t,e)),n})):[],f.update(),p=!0,r(f.before_update),f.fragment=!!s&&s(f.ctx),o.target){if(o.hydrate){const e=function(e){return Array.from(e.childNodes)}(o.target);f.fragment&&f.fragment.l(e),e.forEach(c)}else f.fragment&&f.fragment.c();o.intro&&A(t.$$.fragment),N(t,o.target,o.anchor,o.customElement),z()}x(d)}class X{$destroy(){q(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function B(e){const t=Math.floor(e),n=Math.round(60*(e-t));return`${t}:${r=n,r<10?`0${r}`:r.toString()}`;var r}function J(t){let n,r,o,i,h,d,f,p,m,b,v,x,$,k,y,w,S,C,M,P,E,D,L,z=t[0].markers[0].name+"",H=t[0].markers[t[0].markers.length-1].name+"",F=(t[0].distanceSum[t[0].line.length-1]/1e3).toFixed(1)+"",_=t[0].effortSum[t[0].markers.length-1].toFixed(1)+"",T=B(t[0].effortSum[t[0].markers.length-1]/t[1])+"";return{c(){n=u("Start: "),r=a("b"),o=u(z),i=a("br"),h=u("\r\nEnde: "),d=a("b"),f=u(H),p=a("br"),m=u("\r\nDistanz: "),b=a("b"),v=u(F),x=u(" km"),$=a("br"),k=u("\r\nAufwand: "),y=a("b"),w=u(_),S=u(" Lkm"),C=a("br"),M=u("\r\nDauer: "),P=a("b"),E=u(T),D=u(" h"),L=a("br")},m(e,t){l(e,n,t),l(e,r,t),s(r,o),l(e,i,t),l(e,h,t),l(e,d,t),s(d,f),l(e,p,t),l(e,m,t),l(e,b,t),s(b,v),s(b,x),l(e,$,t),l(e,k,t),l(e,y,t),s(y,w),s(y,S),l(e,C,t),l(e,M,t),l(e,P,t),s(P,E),s(P,D),l(e,L,t)},p(e,[t]){1&t&&z!==(z=e[0].markers[0].name+"")&&g(o,z),1&t&&H!==(H=e[0].markers[e[0].markers.length-1].name+"")&&g(f,H),1&t&&F!==(F=(e[0].distanceSum[e[0].line.length-1]/1e3).toFixed(1)+"")&&g(v,F),1&t&&_!==(_=e[0].effortSum[e[0].markers.length-1].toFixed(1)+"")&&g(w,_),3&t&&T!==(T=B(e[0].effortSum[e[0].markers.length-1]/e[1])+"")&&g(E,T)},i:e,o:e,d(e){e&&c(n),e&&c(r),e&&c(i),e&&c(h),e&&c(d),e&&c(p),e&&c(m),e&&c(b),e&&c($),e&&c(k),e&&c(y),e&&c(C),e&&c(M),e&&c(P),e&&c(L)}}}function K(e,t,n){let{route:r}=t,{speed:o}=t;return e.$$set=e=>{"route"in e&&n(0,r=e.route),"speed"in e&&n(1,o=e.speed)},[r,o]}class V extends X{constructor(e){super(),I(this,e,K,J,i,{route:0,speed:1})}}class U{static add(e,t){return{x:e.x+t.x,y:e.y+t.y}}static subtract(e,t){return{x:e.x-t.x,y:e.y-t.y}}static scale(e,t){return{x:e.x*t,y:e.y*t}}static length(e){return Math.hypot(e.x,e.y)}static distance(e,t){return U.length(U.subtract(t,e))}}const Z={backgroundColor:null,textColor:null,darkerAccentColor:null,accentColor:null,lighterAccentColor:null};function Q(t){let n;return{c(){n=a("canvas"),p(n,"width","800"),p(n,"height","150"),p(n,"class","svelte-xd84ci")},m(e,r){l(e,n,r),t[2](n)},p:e,i:e,o:e,d(e){e&&c(n),t[2](null)}}}function Y(e,t,n){let r,{route:o}=t;return e.$$set=e=>{"route"in e&&n(1,o=e.route)},e.$$.update=()=>{3&e.$$.dirty&&r&&function(e,t){const n=t.getContext("2d");n.clearRect(0,0,t.width,t.height);const r=12;let o=1/0,i=-1/0;for(let t of e.lineProfile)o=Math.min(o,t.height),i=Math.max(i,t.height);const s={x:e.distanceSum[e.distanceSum.length-1],y:i-o},l=Math.min((t.width-24)/s.x,(t.height-24-40)/s.y);t.width=Math.ceil(s.x*l+24),t.height=Math.ceil(s.y*l+24+40);const c=(e,n)=>U.add(U.scale({x:e,y:o-n},l),{x:r,y:t.height-r-40}),a=()=>{for(let t=0;t<e.lineProfile.length;t++){const r=c(e.lineProfileDistanceSum[t],e.lineProfile[t].height);0===t?n.moveTo(r.x,r.y):n.lineTo(r.x,r.y)}};n.beginPath(),a();const u=c(0,i),h=c(0,o),d=c(s.x,o);n.lineTo(d.x,t.height),n.lineTo(h.x,t.height);const f=n.createLinearGradient(0,u.y,0,t.height);f.addColorStop(0,Z.lighterAccentColor),f.addColorStop(1,Z.backgroundColor),n.fillStyle=f,n.globalAlpha=.5,n.fill(),n.globalAlpha=1,n.beginPath(),a(),n.lineWidth=4,n.lineCap=n.lineJoin="round",n.strokeStyle=Z.accentColor,n.stroke(),n.font="bold 14px sans-serif",n.textAlign="center",n.textBaseline="middle";for(let t=0;t<e.markerProfile.length;t++){const r=c(e.distanceSum[e.markers[t].index],e.markerProfile[t].height);n.beginPath(),n.arc(r.x,r.y,10,0,2*Math.PI),n.fillStyle=Z.darkerAccentColor,n.fill(),n.fillStyle=Z.backgroundColor,n.fillText(t+1,r.x,r.y+.5)}}(o,r)},[r,o,function(e){w[e?"unshift":"push"]((()=>{r=e,n(0,r)}))}]}class ee extends X{constructor(e){super(),I(this,e,Y,Q,i,{route:1})}}function te(e,t,n){const r=e.slice();return r[3]=t[n],r}function ne(e){let t,n,r,o,i,d,f,m,b,v,x,$,k,y,w,S,C,M,P=Math.round(e[3].diff.height)+"",E=e[3].diff.distance.toFixed(1)+"",D=e[3].diff.effort.toFixed(1)+"",L=B(e[3].diff.time)+"";return{c(){t=a("tr"),n=a("td"),r=h(),o=a("td"),i=u(P),d=u(" m"),f=h(),m=a("td"),b=u(E),v=u(" km"),x=h(),$=a("td"),k=u(D),y=u(" Lkm"),w=h(),S=a("td"),C=u(L),M=u(" h"),p(n,"class","svelte-16h3hgu"),p(o,"class","number svelte-16h3hgu"),p(m,"class","number svelte-16h3hgu"),p($,"class","number svelte-16h3hgu"),p(S,"class","number svelte-16h3hgu"),p(t,"class","alt svelte-16h3hgu")},m(e,c){l(e,t,c),s(t,n),s(t,r),s(t,o),s(o,i),s(o,d),s(t,f),s(t,m),s(m,b),s(m,v),s(t,x),s(t,$),s($,k),s($,y),s(t,w),s(t,S),s(S,C),s(S,M)},p(e,t){1&t&&P!==(P=Math.round(e[3].diff.height)+"")&&g(i,P),1&t&&E!==(E=e[3].diff.distance.toFixed(1)+"")&&g(b,E),1&t&&D!==(D=e[3].diff.effort.toFixed(1)+"")&&g(k,D),1&t&&L!==(L=B(e[3].diff.time)+"")&&g(C,L)},d(e){e&&c(t)}}}function re(e){let t,n,r,o,i,d,f,m,b,v,x,$,k,y,w,S,C,M,P,E,D,L,z,H,F=e[3].index+"",_=e[3].name+"",T=Math.round(e[3].height)+"",W=e[3].distance.toFixed(1)+"",A=e[3].effort.toFixed(1)+"",j=B(e[3].time)+"",G=e[3].diff&&ne(e);return{c(){G&&G.c(),t=h(),n=a("tr"),r=a("td"),o=a("span"),i=u(F),d=h(),f=u(_),m=h(),b=a("td"),v=u(T),x=u(" m"),$=h(),k=a("td"),y=u(W),w=u(" km"),S=h(),C=a("td"),M=u(A),P=u(" Lkm"),E=h(),D=a("td"),L=u(j),z=u(" h"),H=h(),p(o,"class","svelte-16h3hgu"),p(r,"class","name svelte-16h3hgu"),p(b,"class","number svelte-16h3hgu"),p(k,"class","number svelte-16h3hgu"),p(C,"class","number svelte-16h3hgu"),p(D,"class","number svelte-16h3hgu")},m(e,c){G&&G.m(e,c),l(e,t,c),l(e,n,c),s(n,r),s(r,o),s(o,i),s(r,d),s(r,f),s(n,m),s(n,b),s(b,v),s(b,x),s(n,$),s(n,k),s(k,y),s(k,w),s(n,S),s(n,C),s(C,M),s(C,P),s(n,E),s(n,D),s(D,L),s(D,z),s(n,H)},p(e,n){e[3].diff?G?G.p(e,n):(G=ne(e),G.c(),G.m(t.parentNode,t)):G&&(G.d(1),G=null),1&n&&F!==(F=e[3].index+"")&&g(i,F),1&n&&_!==(_=e[3].name+"")&&g(f,_),1&n&&T!==(T=Math.round(e[3].height)+"")&&g(v,T),1&n&&W!==(W=e[3].distance.toFixed(1)+"")&&g(y,W),1&n&&A!==(A=e[3].effort.toFixed(1)+"")&&g(M,A),1&n&&j!==(j=B(e[3].time)+"")&&g(L,j)},d(e){G&&G.d(e),e&&c(t),e&&c(n)}}}function oe(t){let n,r,o,i=t[0],u=[];for(let e=0;e<i.length;e+=1)u[e]=re(te(t,i,e));return{c(){n=a("table"),r=a("tr"),r.innerHTML='<th class="svelte-16h3hgu">Wegpunkt</th> \n        <th class="svelte-16h3hgu">Höhe</th> \n        <th class="svelte-16h3hgu">Distanz</th> \n        <th class="svelte-16h3hgu">Aufwand</th> \n        <th class="svelte-16h3hgu">Dauer</th>',o=h();for(let e=0;e<u.length;e+=1)u[e].c();p(n,"class","svelte-16h3hgu")},m(e,t){l(e,n,t),s(n,r),s(n,o);for(let e=0;e<u.length;e+=1)u[e].m(n,null)},p(e,[t]){if(1&t){let r;for(i=e[0],r=0;r<i.length;r+=1){const o=te(e,i,r);u[r]?u[r].p(o,t):(u[r]=re(o),u[r].c(),u[r].m(n,null))}for(;r<u.length;r+=1)u[r].d(1);u.length=i.length}},i:e,o:e,d(e){e&&c(n),function(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}(u,e)}}}function ie(e,t,n){let{route:r}=t,{speed:o}=t,i=[];return e.$$set=e=>{"route"in e&&n(1,r=e.route),"speed"in e&&n(2,o=e.speed)},e.$$.update=()=>{6&e.$$.dirty&&!window.isNaN(o)&&o>0&&n(0,i=function(e,t){const n=[];for(let r=0;r<e.markers.length;r++)n[r]={index:r+1,name:e.markers[r].name,height:e.markerProfile[r].height,distance:e.distanceSum[e.markers[r].index]/1e3,effort:e.effortSum[r],time:e.effortSum[r]/t},r>0&&(n[r].diff={height:n[r].height-n[r-1].height,distance:n[r].distance-n[r-1].distance,effort:e.effort[r],time:n[r].time-n[r-1].time});return n}(r,o))},[i,r,o]}class se extends X{constructor(e){super(),I(this,e,ie,oe,i,{route:1,speed:2})}}function le(t){let n,r,o;return{c(){n=a("div"),n.innerHTML='<h1 class="svelte-1578vb4">Marschzeit­tabelle<br/>leicht gemacht.</h1> \n<p class="subtitle svelte-1578vb4">Wir übertragen deine Route automatisch in eine Marschzeittabelle, damit du dich auf die Wanderplanung konzentrieren kannst.</p>',r=h(),o=a("div"),o.innerHTML='<div class="svelte-1578vb4"><h2 class="svelte-1578vb4">1. Route planen</h2> \n        <p class="svelte-1578vb4">Route einzeichnen, Wegpunkte setzen - das kennst du bereits.</p> \n        <h2 class="svelte-1578vb4">2. Exportieren und hochladen</h2> \n        <p class="svelte-1578vb4">In wenigen Klicks erledigt.</p> \n        <h2 class="svelte-1578vb4">3. Voilà!</h2> \n        <p class="svelte-1578vb4">Schon hast du deine Marschzeittabelle. Jetzt noch Geschwindigkeit, Uhrzeit und Pausen anpassen.</p></div> \n    <img src="example.png" alt="Beispiel" class="svelte-1578vb4"/>',p(n,"class","title svelte-1578vb4"),p(o,"class","tutorial svelte-1578vb4")},m(e,t){l(e,n,t),l(e,r,t),l(e,o,t)},p:e,i:e,o:e,d(e){e&&c(n),e&&c(r),e&&c(o)}}}class ce extends X{constructor(e){super(),I(this,e,null,le,i,{})}}function ae(e,t,n){const r={type:"LineString",coordinates:e.map((e=>[Math.round(e.x),Math.round(e.y)]))};return fetch(`https://api3.geo.admin.ch/rest/services/profile.json?sr=21781&distinct_points=${t}&nb_points=${n}&geom=${JSON.stringify(r)}`).then((e=>{if(e.ok)return e.json();throw"Das Höhenprofil konnte nicht geladen werden."})).then((n=>new Promise((r=>{let o=n.map((e=>({point:{x:e.easting,y:e.northing},height:e.alts.COMB})));t&&(o=o.filter((t=>e.some((e=>U.distance(t.point,e)<2))))),r(o)})))).catch((()=>{throw"Die Verbindung zu den swisstopo-Servern ist fehlgeschlagen."}))}class ue{constructor(e,t){this.line=e,this.markers=t}async loadProfiles(){return this.lineProfile=await ae(this.line,!1,100),this.markerProfile=await ae(this.markers.map((e=>this.line[e.index])),!0,this.markers.length),this.calculateDistances(),this}reverse(){this.line.reverse(),this.markers.reverse(),this.markers.forEach((e=>e.index=this.line.length-e.index-1)),this.lineProfile?.reverse(),this.markerProfile?.reverse(),this.calculateDistances()}calculateDistances(){this.distanceSum=he(this.line),this.lineProfileDistanceSum=he(this.lineProfile.map((e=>e.point))),this.effort=[],this.effort[0]=0;for(let e=1;e<this.markers.length;e++){const t=this.distanceSum[this.markers[e].index]-this.distanceSum[this.markers[e-1].index],n=this.markerProfile[e].height-this.markerProfile[e-1].height,r=n/t;this.effort[e]=t/1e3,r>0?this.effort[e]+=n/100:r<-.2&&(this.effort[e]+=Math.abs(r)/150)}this.effortSum=de(this.effort)}}function he(e){return de(e.map(((t,n)=>U.distance(e[Math.max(0,n-1)],e[n]))))}function de(e){const t=[];let n=0;for(let r=0;r<e.length;r++)n+=e[r],t[r]=n;return t}function fe(e){return function(e){return new Promise(((t,n)=>{const r=new FileReader;r.addEventListener("load",(()=>t(r.result))),r.addEventListener("error",(()=>n("Die Datei konnte nicht gelesen werden."))),r.readAsText(e)}))}(e).then((e=>async function(e){const t=(new DOMParser).parseFromString(e,"application/xml");if(t.querySelector("parsererror"))throw"Die Datei ist nicht in gültigem KML-Format.";const n=[],r=[],o=t.querySelectorAll("Placemark");for(let e of o){if(e.querySelector("LineString")){const t=e.querySelector("LineString coordinates").innerHTML.trim().split(" ").map((e=>pe(e)));n.push(t)}if(e.querySelector("Point")){const t=e.querySelector("name").innerHTML.trim(),n=pe(e.querySelector("Point coordinates").innerHTML);r.push({name:t,point:n})}}if(0===n.length)throw"Die Route enthält keine Linie.";if(0===r.length)throw"Die Route enthält keine Wegpunkte.";for(;n.length>1;){const e=me(n);if(null==e)throw"Die Route enthält Linien, die nicht miteinander verbunden sind.";e.reverseFirst&&n[e.i].reverse(),e.reverseSecond&&n[e.j].reverse(),n[e.i].push(...n[e.j]),n.splice(e.j,1)}const i=n[0];for(let e of r){let t=0,n=1/0;for(let r=0;r<i.length;r++){const o=U.distance(e.point,i[r]);o<n&&(t=r,n=o)}if(n>10)throw`Der Wegpunkt "${e.name}" ist nicht auf der Linie, bzw. nicht in der Nähe eines Eckpunkts der Linie.`;e.index=t,delete e.point}return r.sort(((e,t)=>e.index-t.index)),new ue(i,r)}(e))).then((e=>e.loadProfiles()))}function pe(e){const t=e.split(",").map((e=>Number(e))),n=class{static WGStoCH(e,t){return[this.WGStoCHy(e,t),this.WGStoCHx(e,t)]}static WGStoCHx(e,t){const n=((e=this.DECtoSEX(e))-169028.66)/1e4,r=((t=this.DECtoSEX(t))-26782.5)/1e4;return 200147.07+308807.95*n+3745.25*Math.pow(r,2)+76.63*Math.pow(n,2)-194.56*Math.pow(r,2)*n+119.79*Math.pow(n,3)}static WGStoCHy(e,t){const n=((e=this.DECtoSEX(e))-169028.66)/1e4,r=((t=this.DECtoSEX(t))-26782.5)/1e4;return 600072.37+211455.93*r-10938.51*r*n-.36*r*Math.pow(n,2)-44.54*Math.pow(r,3)}static CHtoWGS(e,t){return[this.CHtoWGSlng(e,t),this.CHtoWGSlat(e,t)]}static CHtoWGSlat(e,t){const n=(e-6e5)/1e6,r=(t-2e5)/1e6;return 100*(16.9023892+3.238272*r-.270978*Math.pow(n,2)-.002528*Math.pow(r,2)-.0447*Math.pow(n,2)*r-.014*Math.pow(r,3))/36}static CHtoWGSlng(e,t){const n=(e-6e5)/1e6,r=(t-2e5)/1e6;return 100*(2.6779094+4.728982*n+.791484*n*r+.1306*n*Math.pow(r,2)-.0436*Math.pow(n,3))/36}static DECtoSEX(e){const t=parseInt(e),n=parseInt(60*(e-t));return 60*(60*(e-t)-n)+60*n+3600*t}}.WGStoCH(t[1],t[0]);return{x:n[0],y:n[1]}}function me(e){const t=(e,t)=>U.distance(e,t)<10;for(let n=0;n<e.length;n++)for(let r=n+1;r<e.length;r++){if(t(e[n][e[n].length-1],e[r][0]))return{i:n,j:r,reverseFirst:!1,reverseSecond:!1};if(t(e[n][0],e[r][e[r].length-1]))return{i:n,j:r,reverseFirst:!0,reverseSecond:!0};if(t(e[n][0],e[r][0]))return{i:n,j:r,reverseFirst:!0,reverseSecond:!1};if(t(e[n][e[n].length-1],e[r][e[r].length-1]))return{i:n,j:r,reverseFirst:!1,reverseSecond:!0}}return null}function ge(t){let n,r,o,i,s,u,f,m,g,b,v,x,$;return{c(){n=a("h2"),n.textContent="Route hochladen",r=h(),o=a("p"),o.innerHTML='Unterstützt sind Exporte im <b>KML-Format</b> von <a href="https://map.geo.admin.ch" target="_blank">map.geo.admin.ch</a> oder der <a href="https://www.swisstopo.admin.ch/en/maps-data-online/maps-geodata-online/swisstopo-app.html" target="_blank">swisstopo-App</a>.',i=h(),s=a("p"),s.textContent="Datei hierher ziehen oder...",u=h(),f=a("input"),m=h(),g=a("button"),g.innerHTML='<label for="upload" class="svelte-x4w5y3">Datei auswählen</label>',b=h(),v=a("br"),p(n,"class","svelte-x4w5y3"),p(f,"type","file"),p(f,"id","upload"),p(f,"accept",".kml"),p(f,"class","svelte-x4w5y3")},m(e,c){l(e,n,c),l(e,r,c),l(e,o,c),l(e,i,c),l(e,s,c),l(e,u,c),l(e,f,c),l(e,m,c),l(e,g,c),l(e,b,c),l(e,v,c),x||($=d(f,"change",t[5]),x=!0)},p:e,d(e){e&&c(n),e&&c(r),e&&c(o),e&&c(i),e&&c(s),e&&c(u),e&&c(f),e&&c(m),e&&c(g),e&&c(b),e&&c(v),x=!1,$()}}}function be(e){let t,n,r={ctx:e,current:null,token:null,hasCatch:!0,pending:$e,then:xe,catch:ve,error:7};return G(n=e[1],r),{c(){t=u(""),r.block.c()},m(e,n){l(e,t,n),r.block.m(e,r.anchor=n),r.mount=()=>t.parentNode,r.anchor=t},p(t,o){e=t,r.ctx=e,2&o&&n!==(n=e[1])&&G(n,r)||function(e,t,n){const r=t.slice(),{resolved:o}=e;e.current===e.then&&(r[e.value]=o),e.current===e.catch&&(r[e.error]=o),e.block.p(r,n)}(r,e,o)},d(e){e&&c(t),r.block.d(e),r.token=null,r=null}}}function ve(e){let t,n,r,o,i,f,m,b,v,x,$=e[7]+"";return{c(){t=a("h3"),t.textContent="Hoppla!",n=h(),r=a("p"),o=u("Es gab einen Fehler beim Import:"),i=a("br"),f=u($),m=h(),b=a("button"),b.textContent="Nochmal versuchen",p(b,"class","secondary")},m(c,a){l(c,t,a),l(c,n,a),l(c,r,a),s(r,o),s(r,i),s(r,f),l(c,m,a),l(c,b,a),v||(x=d(b,"click",e[4]),v=!0)},p(e,t){2&t&&$!==($=e[7]+"")&&g(f,$)},d(e){e&&c(t),e&&c(n),e&&c(r),e&&c(m),e&&c(b),v=!1,x()}}}function xe(t){return{c:e,m:e,p:e,d:e}}function $e(t){let n;return{c(){n=a("h3"),n.textContent="Route wird gewandert..."},m(e,t){l(e,n,t)},p:e,d(e){e&&c(n)}}}function ke(t){let n,o,i;function s(e,t){return e[0]&&e[0][0]?be:ge}let u=s(t),h=u(t);return{c(){n=a("div"),h.c(),p(n,"class","svelte-x4w5y3")},m(e,r){l(e,n,r),h.m(n,null),o||(i=[d(n,"drop",f(t[6])),d(n,"dragover",f(t[3]))],o=!0)},p(e,[t]){u===(u=s(e))&&h?h.p(e,t):(h.d(1),h=u(e),h&&(h.c(),h.m(n,null)))},i:e,o:e,d(e){e&&c(n),h.d(),o=!1,r(i)}}}function ye(e,t,n){let r,o,{route:i=null}=t;return e.$$set=e=>{"route"in e&&n(2,i=e.route)},e.$$.update=()=>{1&e.$$.dirty&&r&&r[0]&&n(1,o=fe(r[0]).then((e=>n(2,i=e))))},[r,o,i,function(t){k.call(this,e,t)},()=>n(0,r=null),function(){r=this.files,n(0,r)},e=>n(0,r=e.dataTransfer.files)]}class we extends X{constructor(e){super(),I(this,e,ye,ke,i,{route:2})}}function Se(e){let t,n,r,o,i;function s(t){e[4](t)}t=new ce({});let a={};return void 0!==e[0]&&(a.route=e[0]),r=new we({props:a}),w.push((()=>function(e,t,n){const r=e.$$.props[t];void 0!==r&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}(r,"route",s))),{c(){R(t.$$.fragment),n=h(),R(r.$$.fragment)},m(e,o){N(t,e,o),l(e,n,o),N(r,e,o),i=!0},p(e,t){const n={};var i;!o&&1&t&&(o=!0,n.route=e[0],i=()=>o=!1,C.push(i)),r.$set(n)},i(e){i||(A(t.$$.fragment,e),A(r.$$.fragment,e),i=!0)},o(e){j(t.$$.fragment,e),j(r.$$.fragment,e),i=!1},d(e){q(t,e),e&&c(n),q(r,e)}}}function Ce(e){let t,n,o,i,u,f,g,v,x,$,k,y,w,S,C,M,P,E,D,L,z,H,F,_,T,W,G,O,I,X,B,J,K,U,Z,Q;return f=new V({props:{route:e[0],speed:e[1]}}),O=new se({props:{route:e[0],speed:e[1]}}),K=new ee({props:{route:e[0]}}),{c(){t=a("div"),n=a("div"),o=a("div"),i=a("h2"),i.textContent="Route",u=h(),R(f.$$.fragment),g=h(),v=a("div"),x=a("h2"),x.textContent="Optionen",$=h(),k=a("label"),k.textContent="Geschwindigkeit in Lkm/h",y=h(),w=a("input"),S=h(),C=a("br"),M=h(),P=a("button"),P.textContent="Richtung wechseln",E=h(),D=a("br"),L=h(),z=a("br"),H=h(),F=a("button"),F.textContent="Herunterladen",_=h(),T=a("div"),W=a("h2"),W.textContent="Marschzeittabelle",G=h(),R(O.$$.fragment),I=h(),X=a("div"),B=a("h2"),B.textContent="Höhenprofil",J=h(),R(K.$$.fragment),p(o,"class","info"),p(k,"for","speed"),p(k,"class","svelte-txmloz"),p(w,"id","speed"),p(w,"type","number"),p(w,"min","0.5"),p(w,"step","0.5"),p(w,"class","svelte-txmloz"),p(P,"class","secondary"),p(v,"class","options svelte-txmloz"),p(n,"class","general svelte-txmloz"),p(T,"class","table svelte-txmloz"),p(X,"class","profile svelte-txmloz"),p(t,"class","editor")},m(r,c){l(r,t,c),s(t,n),s(n,o),s(o,i),s(o,u),N(f,o,null),s(n,g),s(n,v),s(v,x),s(v,$),s(v,k),s(v,y),s(v,w),b(w,e[1]),s(v,S),s(v,C),s(v,M),s(v,P),s(v,E),s(v,D),s(v,L),s(v,z),s(v,H),s(v,F),s(t,_),s(t,T),s(T,W),s(T,G),N(O,T,null),s(t,I),s(t,X),s(X,B),s(X,J),N(K,X,null),U=!0,Z||(Q=[d(w,"input",e[3]),d(P,"click",e[2]),d(F,"click",Pe)],Z=!0)},p(e,t){const n={};1&t&&(n.route=e[0]),2&t&&(n.speed=e[1]),f.$set(n),2&t&&m(w.value)!==e[1]&&b(w,e[1]);const r={};1&t&&(r.route=e[0]),2&t&&(r.speed=e[1]),O.$set(r);const o={};1&t&&(o.route=e[0]),K.$set(o)},i(e){U||(A(f.$$.fragment,e),A(O.$$.fragment,e),A(K.$$.fragment,e),U=!0)},o(e){j(f.$$.fragment,e),j(O.$$.fragment,e),j(K.$$.fragment,e),U=!1},d(e){e&&c(t),q(f),q(O),q(K),Z=!1,r(Q)}}}function Me(e){let t,n,r,o,i,s,u,d;const f=[Ce,Se],m=[];function g(e,t){return e[0]?0:1}return o=g(e),i=m[o]=f[o](e),{c(){t=a("header"),t.innerHTML='<span><a href=".">startseite</a></span> \n    <span><a href="faq">faq</a> |\n        <a href="https://github.com/ckolin/marschzeittabelle">github</a></span>',n=h(),r=a("main"),i.c(),s=h(),u=a("footer"),u.textContent="marschzeittabelle.ch",p(t,"class","svelte-txmloz"),p(u,"class","svelte-txmloz")},m(e,i){l(e,t,i),l(e,n,i),l(e,r,i),m[o].m(r,null),l(e,s,i),l(e,u,i),d=!0},p(e,[t]){let n=o;o=g(e),o===n?m[o].p(e,t):(T(),j(m[n],1,1,(()=>{m[n]=null})),W(),i=m[o],i?i.p(e,t):(i=m[o]=f[o](e),i.c()),A(i,1),i.m(r,null))},i(e){d||(A(i),d=!0)},o(e){j(i),d=!1},d(e){e&&c(t),e&&c(n),e&&c(r),m[o].d(),e&&c(s),e&&c(u)}}}function Pe(){window.print()}function Ee(e,t,n){let r,o=4;return[r,o,function(){r.reverse(),n(0,r)},function(){o=m(this.value),n(1,o)},function(e){r=e,n(0,r)}]}const De=new class extends X{constructor(e){super(),I(this,e,Ee,Me,i,{})}}({target:document.body});return function(){for(let e of Object.keys(Z)){const t="--"+e.replace(/[A-Z]/g,(e=>"-"+e.toLowerCase()));Z[e]=window.getComputedStyle(document.body).getPropertyValue(t)}}(),De}();
//# sourceMappingURL=bundle.js.map
