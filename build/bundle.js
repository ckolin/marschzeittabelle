var app=function(){"use strict";function t(){}const e=t=>t;function n(t){return t()}function r(){return Object.create(null)}function o(t){t.forEach(n)}function s(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function l(t,e,n,r){return t[1]&&r?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](r(e))):n.ctx}const a="undefined"!=typeof window;let c=a?()=>window.performance.now():()=>Date.now(),u=a?t=>requestAnimationFrame(t):t;const f=new Set;function d(t){f.forEach((e=>{e.c(t)||(f.delete(e),e.f())})),0!==f.size&&u(d)}function m(t,e){t.appendChild(e)}function p(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function h(t){const e=b("style");return function(t,e){m(t.head||t,e)}(p(t),e),e.sheet}function $(t,e,n){t.insertBefore(e,n||null)}function g(t){t.parentNode.removeChild(t)}function b(t){return document.createElement(t)}function v(t){return document.createTextNode(t)}function w(){return v(" ")}function k(){return v("")}function x(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function y(t){return function(e){return e.preventDefault(),t.call(this,e)}}function S(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function C(t){return""===t?null:+t}function M(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function _(t,e){t.value=null==e?"":e}function P(t,e){for(let n=0;n<t.options.length;n+=1){const r=t.options[n];if(r.__value===e)return void(r.selected=!0)}t.selectedIndex=-1}function L(t,e,n){t.classList[n?"add":"remove"](e)}function j(t,e,n=!1){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,n,!1,e),r}const E=new Map;let A,T=0;function D(t,e,n,r,o,s,i,l=0){const a=16.666/r;let c="{\n";for(let t=0;t<=1;t+=a){const r=e+(n-e)*s(t);c+=100*t+`%{${i(r,1-r)}}\n`}const u=c+`100% {${i(n,1-n)}}\n}`,f=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(u)}_${l}`,d=p(t),{stylesheet:m,rules:$}=E.get(d)||function(t,e){const n={stylesheet:h(e),rules:{}};return E.set(t,n),n}(d,t);$[f]||($[f]=!0,m.insertRule(`@keyframes ${f} ${u}`,m.cssRules.length));const g=t.style.animation||"";return t.style.animation=`${g?`${g}, `:""}${f} ${r}ms linear ${o}ms 1 both`,T+=1,f}function H(t,e){const n=(t.style.animation||"").split(", "),r=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),o=n.length-r.length;o&&(t.style.animation=r.join(", "),T-=o,T||u((()=>{T||(E.forEach((t=>{const{stylesheet:e}=t;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.rules={}})),E.clear())})))}function F(t){A=t}function q(){if(!A)throw new Error("Function called outside component initialization");return A}function z(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const R=[],W=[],G=[],N=[],B=Promise.resolve();let O=!1;function I(t){G.push(t)}function K(t){N.push(t)}const U=new Set;let X,J=0;function V(){const t=A;do{for(;J<R.length;){const t=R[J];J++,F(t),Z(t.$$)}for(F(null),R.length=0,J=0;W.length;)W.pop()();for(let t=0;t<G.length;t+=1){const e=G[t];U.has(e)||(U.add(e),e())}G.length=0}while(R.length);for(;N.length;)N.pop()();O=!1,U.clear(),F(t)}function Z(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(I)}}function Q(t,e,n){t.dispatchEvent(j(`${e?"intro":"outro"}${n}`))}const Y=new Set;let tt;function et(){tt={r:0,c:[],p:tt}}function nt(){tt.r||o(tt.c),tt=tt.p}function rt(t,e){t&&t.i&&(Y.delete(t),t.i(e))}function ot(t,e,n,r){if(t&&t.o){if(Y.has(t))return;Y.add(t),tt.c.push((()=>{Y.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}const st={duration:0};function it(n,r,i,l){let a=r(n,i),m=l?0:1,p=null,h=null,$=null;function g(){$&&H(n,$)}function b(t,e){const n=t.b-m;return e*=Math.abs(n),{a:m,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function v(r){const{delay:s=0,duration:i=300,easing:l=e,tick:v=t,css:w}=a||st,k={start:c()+s,b:r};r||(k.group=tt,tt.r+=1),p||h?h=k:(w&&(g(),$=D(n,m,r,i,s,l,w)),r&&v(0,1),p=b(k,i),I((()=>Q(n,r,"start"))),function(t){let e;0===f.size&&u(d),new Promise((n=>{f.add(e={c:t,f:n})}))}((t=>{if(h&&t>h.start&&(p=b(h,i),h=null,Q(n,p.b,"start"),w&&(g(),$=D(n,m,p.b,p.duration,0,l,a.css))),p)if(t>=p.end)v(m=p.b,1-m),Q(n,p.b,"end"),h||(p.b?g():--p.group.r||o(p.group.c)),p=null;else if(t>=p.start){const e=t-p.start;m=p.a+p.d*l(e/p.duration),v(m,1-m)}return!(!p&&!h)})))}return{run(t){s(a)?(X||(X=Promise.resolve(),X.then((()=>{X=null}))),X).then((()=>{a=a(),v(t)})):v(t)},end(){g(),p=h=null}}}function lt(t,e){const n=e.token={};function r(t,r,o,s){if(e.token!==n)return;e.resolved=s;let i=e.ctx;void 0!==o&&(i=i.slice(),i[o]=s);const l=t&&(e.current=t)(i);let a=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==r&&t&&(et(),ot(t,1,1,(()=>{e.blocks[n]===t&&(e.blocks[n]=null)})),nt())})):e.block.d(1),l.c(),rt(l,1),l.m(e.mount(),e.anchor),a=!0),e.block=l,e.blocks&&(e.blocks[r]=l),a&&V()}if((o=t)&&"object"==typeof o&&"function"==typeof o.then){const n=q();if(t.then((t=>{F(n),r(e.then,1,e.value,t),F(null)}),(t=>{if(F(n),r(e.catch,2,e.error,t),F(null),!e.hasCatch)throw t})),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}var o}function at(t,e,n){const r=t.$$.props[e];void 0!==r&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function ct(t){t&&t.c()}function ut(t,e,r,i){const{fragment:l,on_mount:a,on_destroy:c,after_update:u}=t.$$;l&&l.m(e,r),i||I((()=>{const e=a.map(n).filter(s);c?c.push(...e):o(e),t.$$.on_mount=[]})),u.forEach(I)}function ft(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function dt(t,e){-1===t.$$.dirty[0]&&(R.push(t),O||(O=!0,B.then(V)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function mt(e,n,s,i,l,a,c,u=[-1]){const f=A;F(e);const d=e.$$={fragment:null,ctx:null,props:a,update:t,not_equal:l,bound:r(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(f?f.$$.context:[])),callbacks:r(),dirty:u,skip_bound:!1,root:n.target||f.$$.root};c&&c(d.root);let m=!1;if(d.ctx=s?s(e,n.props||{},((t,n,...r)=>{const o=r.length?r[0]:n;return d.ctx&&l(d.ctx[t],d.ctx[t]=o)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](o),m&&dt(e,t)),n})):[],d.update(),m=!0,o(d.before_update),d.fragment=!!i&&i(d.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);d.fragment&&d.fragment.l(t),t.forEach(g)}else d.fragment&&d.fragment.c();n.intro&&rt(e.$$.fragment),ut(e,n.target,n.anchor,n.customElement),V()}F(f)}class pt{$destroy(){ft(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function ht(t){const e=t-1;return e*e*e+1}function $t(t,{delay:n=0,duration:r=400,easing:o=e}={}){const s=+getComputedStyle(t).opacity;return{delay:n,duration:r,easing:o,css:t=>"opacity: "+t*s}}function gt(t,{delay:e=0,duration:n=400,easing:r=ht}={}){const o=getComputedStyle(t),s=+o.opacity,i=parseFloat(o.height),l=parseFloat(o.paddingTop),a=parseFloat(o.paddingBottom),c=parseFloat(o.marginTop),u=parseFloat(o.marginBottom),f=parseFloat(o.borderTopWidth),d=parseFloat(o.borderBottomWidth);return{delay:e,duration:n,easing:r,css:t=>`overflow: hidden;opacity: ${Math.min(20*t,1)*s};height: ${t*i}px;padding-top: ${t*l}px;padding-bottom: ${t*a}px;margin-top: ${t*c}px;margin-bottom: ${t*u}px;border-top-width: ${t*f}px;border-bottom-width: ${t*d}px;`}}function bt(e){let n,r;return{c(){n=b("span"),r=v(e[0]),S(n,"class","material-icons-round svelte-3om24"),L(n,"big",e[1])},m(t,e){$(t,n,e),m(n,r)},p(t,[e]){1&e&&M(r,t[0]),2&e&&L(n,"big",t[1])},i:t,o:t,d(t){t&&g(n)}}}function vt(t,e,n){let{name:r}=e,{big:o=!1}=e;return t.$$set=t=>{"name"in t&&n(0,r=t.name),"big"in t&&n(1,o=t.big)},[r,o]}class wt extends pt{constructor(t){super(),mt(this,t,vt,bt,i,{name:0,big:1})}}function kt(t){const{h:e,m:n}=yt(t);return`${e}:${St(n)}`}function xt(t){const{h:e,m:n}=yt(t);return`${St(e%24)}:${St(n)}`}function yt(t){const e=Math.floor(t);return{h:e,m:Math.floor(60*(t-e))}}function St(t){return t<10?`0${t}`:t.toString()}function Ct(t){window.goatcounter?.count&&window.goatcounter.count({path:t,event:!0})}function Mt(t){Ct(`error-${t}`)}function _t(t,e){return t.x===e.x&&t.y===e.y}function Pt(t,e){return n=function(t,e){return{x:t.x-e.x,y:t.y-e.y}}(e,t),Math.hypot(n.x,n.y);var n}const Lt="https://api3.geo.admin.ch/rest/services";function jt(t,e,n){const r={type:"LineString",coordinates:t.map((t=>[Math.round(t.x),Math.round(t.y)]))};return fetch(`${Lt}/profile.json`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:`sr=21781&distinct_points=${e}&nb_points=${n}&geom=${JSON.stringify(r)}`}).catch(Et).then((t=>At(t,"Das HÃ¶henprofil konnten nicht geladen werden."))).then((n=>new Promise((r=>{let o=n.map((t=>({point:{x:t.easting,y:t.northing},height:t.alts.COMB})));e&&(o=o.filter((e=>t.some((t=>Pt(e.point,t)<2))))),r(o)}))))}function Et(){throw{id:"connection-failed",message:"Die Verbindung zu den swisstopo-Servern ist fehlgeschlagen."}}function At(t,e){if(t.ok)return t.json();throw{id:"response-not-ok",message:e}}async function Tt(t){return t.maps=await function(t,e){const n={paths:[t.map((t=>[Math.round(t.x),Math.round(t.y)]))]};return fetch(`${Lt}/all/MapServer/identify`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:`geometry=${JSON.stringify(n)}&geometryType=esriGeometryPolyline&layers=all:ch.swisstopo.pixelkarte-pk${e}.metadata&tolerance=0&returnGeometry=false`}).catch(Et).then((t=>At(t,"Die Landeskarten konnten nicht geladen werden."))).then((t=>new Promise((e=>{e(t.results.map((t=>({id:t.id,label:t.attributes.lk_name}))))}))))}(t.line,t.mapScale),t}function Dt(t){t.distanceSum=Ht(t.line),t.lineProfileDistanceSum=Ht(t.lineProfile.map((t=>t.point))),t.effort=function(t){const e=[];e[0]=0;for(let n=1;n<t.markers.length;n++){const r=t.distanceSum[t.markers[n].index]-t.distanceSum[t.markers[n-1].index],o=t.markerProfile[n].height-t.markerProfile[n-1].height,s=o/r;e[n]=r/1e3,s>0?e[n]+=o/100:s<-.2&&(e[n]+=Math.abs(o)/150)}return e}(t),t.effortSum=Ft(t.effort),t.breakSum=[0,...Ft(t.markers.map((t=>t.break)))]}function Ht(t){return Ft(t.map(((e,n)=>Pt(t[Math.max(0,n-1)],t[n]))))}function Ft(t){const e=[];let n=0;for(let r=0;r<t.length;r++)n+=t[r],e[r]=n;return e}function qt(t){const e=[];for(let n=0;n<t.markers.length;n++)e[n]={index:n,name:t.markers[n].name,comment:t.markers[n].comment,height:t.markerProfile[n].height,distance:t.distanceSum[t.markers[n].index]/1e3,effort:t.effortSum[n],duration:t.effortSum[n]/t.speed,time:t.effortSum[n]/t.speed+t.breakSum[n]/60+t.start,break:t.markers[n].break};for(let n=1;n<t.markers.length;n++)e[n-1].diff={height:e[n].height-e[n-1].height,distance:e[n].distance-e[n-1].distance,effort:t.effort[n],duration:e[n].duration-e[n-1].duration};return e}function zt(e){let n,r,o;return{c(){n=b("a"),r=v(e[1]),S(n,"class","noprint svelte-1734900"),S(n,"href",o=null==e[0]?"help":`help#${e[0]}`),S(n,"target","_blank")},m(t,e){$(t,n,e),m(n,r)},p(t,[e]){2&e&&M(r,t[1]),1&e&&o!==(o=null==t[0]?"help":`help#${t[0]}`)&&S(n,"href",o)},i:t,o:t,d(t){t&&g(n)}}}function Rt(t,e,n){let{topic:r=null}=e,{label:o="?"}=e;return t.$$set=t=>{"topic"in t&&n(0,r=t.topic),"label"in t&&n(1,o=t.label)},[r,o]}class Wt extends pt{constructor(t){super(),mt(this,t,Rt,zt,i,{topic:0,label:1})}}function Gt(t){let e,n,r,o,s,i,a,c,u,f,d,p,h,k,C,_,P,L;const j=t[4].default,E=function(t,e,n,r){if(t){const o=l(t,e,n,r);return t[0](o)}}(j,t,t[3],null);return h=new wt({props:{name:"done"}}),{c(){e=b("div"),n=b("div"),r=w(),o=b("div"),s=b("h2"),i=v(t[1]),a=w(),c=b("form"),E&&E.c(),u=w(),f=b("br"),d=w(),p=b("button"),ct(h.$$.fragment),k=v(" Fertig"),S(n,"class","background svelte-1v8si1e"),S(s,"class","svelte-1v8si1e"),S(p,"class","svelte-1v8si1e"),S(o,"class","dialog svelte-1v8si1e")},m(l,g){$(l,e,g),m(e,n),m(e,r),m(e,o),m(o,s),m(s,i),m(o,a),m(o,c),E&&E.m(c,null),m(c,u),m(c,f),m(c,d),m(c,p),ut(h,p,null),m(p,k),_=!0,P||(L=x(c,"submit",y(t[2])),P=!0)},p(t,e){(!_||2&e)&&M(i,t[1]),E&&E.p&&(!_||8&e)&&function(t,e,n,r,o,s){if(o){const i=l(e,n,r,s);t.p(i,o)}}(E,j,t,t[3],_?function(t,e,n,r){if(t[2]&&r){const o=t[2](r(n));if(void 0===e.dirty)return o;if("object"==typeof o){const t=[],n=Math.max(e.dirty.length,o.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|o[r];return t}return e.dirty|o}return e.dirty}(j,t[3],e,null):function(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}(t[3]),null)},i(t){_||(rt(E,t),rt(h.$$.fragment,t),I((()=>{C||(C=it(e,$t,{duration:100},!0)),C.run(1)})),_=!0)},o(t){ot(E,t),ot(h.$$.fragment,t),C||(C=it(e,$t,{duration:100},!1)),C.run(0),_=!1},d(t){t&&g(e),E&&E.d(t),ft(h),t&&C&&C.end(),P=!1,L()}}}function Nt(t){let e,n,r=t[0]&&Gt(t);return{c(){r&&r.c(),e=k()},m(t,o){r&&r.m(t,o),$(t,e,o),n=!0},p(t,[n]){t[0]?r?(r.p(t,n),1&n&&rt(r,1)):(r=Gt(t),r.c(),rt(r,1),r.m(e.parentNode,e)):r&&(et(),ot(r,1,1,(()=>{r=null})),nt())},i(t){n||(rt(r),n=!0)},o(t){ot(r),n=!1},d(t){r&&r.d(t),t&&g(e)}}}function Bt(t,e,n){let{$$slots:r={},$$scope:o}=e,{title:s}=e,{show:i=!1}=e;const l=function(){const t=q();return(e,n)=>{const r=t.$$.callbacks[e];if(r){const o=j(e,n);r.slice().forEach((e=>{e.call(t,o)}))}}}();return t.$$set=t=>{"title"in t&&n(1,s=t.title),"show"in t&&n(0,i=t.show),"$$scope"in t&&n(3,o=t.$$scope)},[i,s,function(){n(0,i=!1),l("close")},o,r]}class Ot extends pt{constructor(t){super(),mt(this,t,Bt,Nt,i,{title:1,show:0})}}function It(t){let e,n,r,o,s,i,l,a,c,u;return{c(){e=b("label"),e.textContent="Massstab",n=w(),r=b("select"),o=b("option"),o.textContent="1:25'000",s=b("option"),s.textContent="1:50'000",i=b("option"),i.textContent="1:100'000",l=w(),a=b("br"),S(e,"for","scale"),o.__value=25,o.value=o.__value,s.__value=50,s.value=s.__value,i.__value=100,i.value=i.__value,S(r,"id","scale"),r.required=!0,void 0===t[1]&&I((()=>t[2].call(r)))},m(f,d){$(f,e,d),$(f,n,d),$(f,r,d),m(r,o),m(r,s),m(r,i),P(r,t[1]),$(f,l,d),$(f,a,d),c||(u=x(r,"change",t[2]),c=!0)},p(t,e){2&e&&P(r,t[1])},d(t){t&&g(e),t&&g(n),t&&g(r),t&&g(l),t&&g(a),c=!1,u()}}}function Kt(t){let e,n,r;function o(e){t[3](e)}let s={title:"Kartenmassstab wÃ¤hlen",$$slots:{default:[It]},$$scope:{ctx:t}};return void 0!==t[0]&&(s.show=t[0]),e=new Ot({props:s}),W.push((()=>at(e,"show",o))),e.$on("close",t[4]),{c(){ct(e.$$.fragment)},m(t,n){ut(e,t,n),r=!0},p(t,[r]){const o={};34&r&&(o.$$scope={dirty:r,ctx:t}),!n&&1&r&&(n=!0,o.show=t[0],K((()=>n=!1))),e.$set(o)},i(t){r||(rt(e.$$.fragment,t),r=!0)},o(t){ot(e.$$.fragment,t),r=!1},d(t){ft(e,t)}}}function Ut(t,e,n){let{show:r}=e,{scale:o}=e;return t.$$set=t=>{"show"in t&&n(0,r=t.show),"scale"in t&&n(1,o=t.scale)},[r,o,function(){o=function(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}(this),n(1,o)},function(t){r=t,n(0,r)},function(e){z.call(this,t,e)}]}class Xt extends pt{constructor(t){super(),mt(this,t,Ut,Kt,i,{show:0,scale:1})}}function Jt(t){let e,n,r,s,i,l,a,c,u,f,d,p,h,k,y,M;return l=new wt({props:{name:"remove"}}),f=new wt({props:{name:"add"}}),{c(){e=b("label"),e.textContent="Geschwindigkeit (Lkm/h)",n=w(),r=b("input"),s=w(),i=b("button"),ct(l.$$.fragment),a=v(" Langsamer"),c=w(),u=b("button"),ct(f.$$.fragment),d=v(" Schneller"),p=w(),h=b("br"),S(e,"for","speed"),S(r,"id","speed"),S(r,"type","number"),S(r,"min","0.1"),S(r,"step","0.1"),r.required=!0,S(i,"type","button"),S(i,"class","pill"),S(u,"type","button"),S(u,"class","pill")},m(o,g){$(o,e,g),$(o,n,g),$(o,r,g),_(r,t[1]),$(o,s,g),$(o,i,g),ut(l,i,null),m(i,a),$(o,c,g),$(o,u,g),ut(f,u,null),m(u,d),$(o,p,g),$(o,h,g),k=!0,y||(M=[x(r,"input",t[3]),x(i,"click",t[4]),x(u,"click",t[5])],y=!0)},p(t,e){2&e&&C(r.value)!==t[1]&&_(r,t[1])},i(t){k||(rt(l.$$.fragment,t),rt(f.$$.fragment,t),k=!0)},o(t){ot(l.$$.fragment,t),ot(f.$$.fragment,t),k=!1},d(t){t&&g(e),t&&g(n),t&&g(r),t&&g(s),t&&g(i),ft(l),t&&g(c),t&&g(u),ft(f),t&&g(p),t&&g(h),y=!1,o(M)}}}function Vt(t){let e,n,r;function o(e){t[6](e)}let s={title:"Geschwindigkeit anpassen",$$slots:{default:[Jt]},$$scope:{ctx:t}};return void 0!==t[0]&&(s.show=t[0]),e=new Ot({props:s}),W.push((()=>at(e,"show",o))),{c(){ct(e.$$.fragment)},m(t,n){ut(e,t,n),r=!0},p(t,[r]){const o={};130&r&&(o.$$scope={dirty:r,ctx:t}),!n&&1&r&&(n=!0,o.show=t[0],K((()=>n=!1))),e.$set(o)},i(t){r||(rt(e.$$.fragment,t),r=!0)},o(t){ot(e.$$.fragment,t),r=!1},d(t){ft(e,t)}}}function Zt(t,e,n){let{show:r}=e,{speed:o}=e,s=o;return t.$$set=t=>{"show"in t&&n(0,r=t.show),"speed"in t&&n(2,o=t.speed)},t.$$.update=()=>{2&t.$$.dirty&&!window.isNaN(s)&&s>0&&n(2,o=s)},[r,s,o,function(){s=C(this.value),n(1,s)},()=>n(1,s=Math.max(.5,s-.5)),()=>n(1,s+=.5),function(t){r=t,n(0,r)}]}class Qt extends pt{constructor(t){super(),mt(this,t,Zt,Vt,i,{show:0,speed:2})}}function Yt(t){let e,n,r,s,i,l,a,c,u,f,d,p,h,k,y,C,M,P,L,j;return l=new wt({props:{name:"brightness_low"}}),f=new wt({props:{name:"brightness_medium"}}),k=new wt({props:{name:"brightness_high"}}),{c(){e=b("label"),e.textContent="Abreise",n=w(),r=b("input"),s=w(),i=b("button"),ct(l.$$.fragment),a=v(" 08:00"),c=w(),u=b("button"),ct(f.$$.fragment),d=v(" 12:00"),p=w(),h=b("button"),ct(k.$$.fragment),y=v(" 16:00"),C=w(),M=b("br"),S(e,"for","start"),S(r,"id","start"),S(r,"type","time"),r.required=!0,S(i,"type","button"),S(i,"class","pill"),S(u,"type","button"),S(u,"class","pill"),S(h,"type","button"),S(h,"class","pill")},m(o,g){$(o,e,g),$(o,n,g),$(o,r,g),_(r,t[1]),$(o,s,g),$(o,i,g),ut(l,i,null),m(i,a),$(o,c,g),$(o,u,g),ut(f,u,null),m(u,d),$(o,p,g),$(o,h,g),ut(k,h,null),m(h,y),$(o,C,g),$(o,M,g),P=!0,L||(j=[x(r,"input",t[3]),x(i,"click",t[4]),x(u,"click",t[5]),x(h,"click",t[6])],L=!0)},p(t,e){2&e&&_(r,t[1])},i(t){P||(rt(l.$$.fragment,t),rt(f.$$.fragment,t),rt(k.$$.fragment,t),P=!0)},o(t){ot(l.$$.fragment,t),ot(f.$$.fragment,t),ot(k.$$.fragment,t),P=!1},d(t){t&&g(e),t&&g(n),t&&g(r),t&&g(s),t&&g(i),ft(l),t&&g(c),t&&g(u),ft(f),t&&g(p),t&&g(h),ft(k),t&&g(C),t&&g(M),L=!1,o(j)}}}function te(t){let e,n,r;function o(e){t[7](e)}let s={title:"Abreise anpassen",$$slots:{default:[Yt]},$$scope:{ctx:t}};return void 0!==t[0]&&(s.show=t[0]),e=new Ot({props:s}),W.push((()=>at(e,"show",o))),{c(){ct(e.$$.fragment)},m(t,n){ut(e,t,n),r=!0},p(t,[r]){const o={};258&r&&(o.$$scope={dirty:r,ctx:t}),!n&&1&r&&(n=!0,o.show=t[0],K((()=>n=!1))),e.$set(o)},i(t){r||(rt(e.$$.fragment,t),r=!0)},o(t){ot(e.$$.fragment,t),r=!1},d(t){ft(e,t)}}}function ee(t,e,n){let{show:r}=e,{start:o}=e,s=xt(o);return t.$$set=t=>{"show"in t&&n(0,r=t.show),"start"in t&&n(2,o=t.start)},t.$$.update=()=>{2&t.$$.dirty&&n(2,o=s.split(":").map(((t,e)=>Number(t)/60**e)).reduce(((t,e)=>t+e)))},[r,s,o,function(){s=this.value,n(1,s)},()=>n(1,s="08:00"),()=>n(1,s="12:00"),()=>n(1,s="16:00"),function(t){r=t,n(0,r)}]}class ne extends pt{constructor(t){super(),mt(this,t,ee,te,i,{show:0,start:2})}}function re(t){let e,n,r,s,i,l,a,c,u,f,d,p,h,k,y,C,_,P,L,j,E,A,T,D,H,F,q,z,R,G,N,B,O,I,U,X,J,V,Z,Q,Y,tt,et,nt,st,it,lt,dt,mt,pt,ht,$t,gt,bt,vt,yt,St,Ct,Mt,_t,Pt,Lt,jt,Et,At,Tt,Dt,Ht,Ft,qt,zt,Rt,Gt,Nt,Bt,Ot,It,Kt,Ut,Jt,Vt,Zt,Yt,te,ee,re,se,ie,le,ae,ce,ue,fe,de,me,pe,he,$e,ge,be,ve,we,ke,xe,ye,Se,Ce,Me,_e,Pe,Le,je,Ee,Ae,Te=t[0].markers[0].name+"",De=t[0].markers[t[0].markers.length-1].name+"",He=t[0].mapScale+"",Fe=t[0].maps.map(oe).join(", ")+"",qe=t[4].distance.toFixed(1)+"",ze=Math.round(t[4].ascent)+"",Re=Math.round(t[4].descent)+"",We=t[4].effort.toFixed(1)+"",Ge=t[0].speed+"",Ne=xt(t[0].start)+"",Be=xt(t[0].start+t[4].duration)+"",Oe=kt(t[4].duration)+"",Ie=kt(t[4].breakDuration)+"";function Ke(e){t[9](e)}function Ue(e){t[10](e)}let Xe={};function Je(e){t[11](e)}function Ve(e){t[12](e)}void 0!==t[1]&&(Xe.show=t[1]),void 0!==t[0].speed&&(Xe.speed=t[0].speed),e=new Qt({props:Xe}),W.push((()=>at(e,"show",Ke))),W.push((()=>at(e,"speed",Ue)));let Ze={};function Qe(e){t[13](e)}function Ye(e){t[14](e)}void 0!==t[2]&&(Ze.show=t[2]),void 0!==t[0].start&&(Ze.start=t[0].start),i=new ne({props:Ze}),W.push((()=>at(i,"show",Je))),W.push((()=>at(i,"start",Ve)));let tn={};return void 0!==t[3]&&(tn.show=t[3]),void 0!==t[0].mapScale&&(tn.scale=t[0].mapScale),u=new Xt({props:tn}),W.push((()=>at(u,"show",Qe))),W.push((()=>at(u,"scale",Ye))),u.$on("close",t[6]),X=new wt({props:{name:"edit"}}),Z=new wt({props:{name:"swap_vert"}}),At=new Wt({props:{topic:"calculation"}}),Nt=new wt({props:{name:"edit"}}),Zt=new wt({props:{name:"edit"}}),Se=new wt({props:{name:"print"}}),Pe=new wt({props:{name:"output"}}),{c(){ct(e.$$.fragment),s=w(),ct(i.$$.fragment),c=w(),ct(u.$$.fragment),p=w(),h=b("div"),k=b("div"),y=b("p"),C=b("span"),C.textContent="Start: ",_=b("b"),P=v(Te),L=b("br"),j=w(),E=b("span"),E.textContent="Ziel: ",A=b("b"),T=v(De),D=b("br"),H=w(),F=b("span"),q=v("Landeskarten 1:"),z=v(He),R=v("'000: "),G=b("br"),N=w(),B=b("b"),O=v(Fe),I=w(),U=b("button"),ct(X.$$.fragment),J=w(),V=b("button"),ct(Z.$$.fragment),Q=v(" Richtung wechseln"),Y=w(),tt=b("div"),et=b("span"),et.textContent="Horizontaldistanz: ",nt=b("b"),st=v(qe),it=v(" km"),lt=b("br"),dt=w(),mt=b("span"),mt.textContent="Auf-/Abstieg: ",pt=v("â "),ht=b("b"),$t=v(ze),gt=v(" m"),bt=v(" â "),vt=b("b"),yt=v(Re),St=v(" m"),Ct=b("br"),Mt=w(),_t=b("span"),_t.textContent="Aufwand: ",Pt=b("b"),Lt=v(We),jt=v(" Lkm"),Et=w(),ct(At.$$.fragment),Tt=b("br"),Dt=w(),Ht=b("span"),Ht.textContent="Geschwindigkeit: ",Ft=b("b"),qt=v(Ge),zt=v(" Lkm/h"),Rt=w(),Gt=b("button"),ct(Nt.$$.fragment),Bt=w(),Ot=b("div"),It=b("span"),It.textContent="Abreise: ",Kt=b("b"),Ut=v(Ne),Jt=w(),Vt=b("button"),ct(Zt.$$.fragment),Yt=w(),te=b("br"),ee=w(),re=b("span"),re.textContent="Ankunft: ",se=b("b"),ie=v(Be),le=b("br"),ae=w(),ce=b("span"),ce.textContent="Gehzeit: ",ue=b("b"),fe=v(Oe),de=v(" h"),me=b("br"),pe=w(),he=b("span"),he.textContent="Pausen: ",$e=b("b"),ge=v(Ie),be=v(" h"),ve=w(),we=b("div"),ke=b("br"),xe=w(),ye=b("button"),ct(Se.$$.fragment),Ce=v(" Drucken"),Me=v("\r\n    Â \r\n    "),_e=b("button"),ct(Pe.$$.fragment),Le=v(" Exportieren (CSV)"),S(U,"class","pill noprint"),S(y,"class","svelte-qsjt41"),S(V,"class","pill noprint"),S(k,"class","svelte-qsjt41"),S(Gt,"class","pill noprint"),S(tt,"class","svelte-qsjt41"),S(Vt,"class","pill noprint"),S(Ot,"class","svelte-qsjt41"),S(h,"class","container svelte-qsjt41"),S(_e,"class","secondary"),S(we,"class","noprint")},m(n,r){ut(e,n,r),$(n,s,r),ut(i,n,r),$(n,c,r),ut(u,n,r),$(n,p,r),$(n,h,r),m(h,k),m(k,y),m(y,C),m(y,_),m(_,P),m(y,L),m(y,j),m(y,E),m(y,A),m(A,T),m(y,D),m(y,H),m(y,F),m(F,q),m(F,z),m(F,R),m(y,G),m(y,N),m(y,B),m(B,O),m(y,I),m(y,U),ut(X,U,null),m(k,J),m(k,V),ut(Z,V,null),m(V,Q),m(h,Y),m(h,tt),m(tt,et),m(tt,nt),m(nt,st),m(nt,it),m(tt,lt),m(tt,dt),m(tt,mt),m(tt,pt),m(tt,ht),m(ht,$t),m(ht,gt),m(tt,bt),m(tt,vt),m(vt,yt),m(vt,St),m(tt,Ct),m(tt,Mt),m(tt,_t),m(tt,Pt),m(Pt,Lt),m(Pt,jt),m(tt,Et),ut(At,tt,null),m(tt,Tt),m(tt,Dt),m(tt,Ht),m(tt,Ft),m(Ft,qt),m(Ft,zt),m(tt,Rt),m(tt,Gt),ut(Nt,Gt,null),m(h,Bt),m(h,Ot),m(Ot,It),m(Ot,Kt),m(Kt,Ut),m(Ot,Jt),m(Ot,Vt),ut(Zt,Vt,null),m(Ot,Yt),m(Ot,te),m(Ot,ee),m(Ot,re),m(Ot,se),m(se,ie),m(Ot,le),m(Ot,ae),m(Ot,ce),m(Ot,ue),m(ue,fe),m(ue,de),m(Ot,me),m(Ot,pe),m(Ot,he),m(Ot,$e),m($e,ge),m($e,be),$(n,ve,r),$(n,we,r),m(we,ke),m(we,xe),m(we,ye),ut(Se,ye,null),m(ye,Ce),m(we,Me),m(we,_e),ut(Pe,_e,null),m(_e,Le),je=!0,Ee||(Ae=[x(U,"click",t[15]),x(V,"click",t[5]),x(Gt,"click",t[16]),x(Vt,"click",t[17]),x(ye,"click",t[7]),x(_e,"click",t[8])],Ee=!0)},p(t,[o]){const s={};!n&&2&o&&(n=!0,s.show=t[1],K((()=>n=!1))),!r&&1&o&&(r=!0,s.speed=t[0].speed,K((()=>r=!1))),e.$set(s);const c={};!l&&4&o&&(l=!0,c.show=t[2],K((()=>l=!1))),!a&&1&o&&(a=!0,c.start=t[0].start,K((()=>a=!1))),i.$set(c);const m={};!f&&8&o&&(f=!0,m.show=t[3],K((()=>f=!1))),!d&&1&o&&(d=!0,m.scale=t[0].mapScale,K((()=>d=!1))),u.$set(m),(!je||1&o)&&Te!==(Te=t[0].markers[0].name+"")&&M(P,Te),(!je||1&o)&&De!==(De=t[0].markers[t[0].markers.length-1].name+"")&&M(T,De),(!je||1&o)&&He!==(He=t[0].mapScale+"")&&M(z,He),(!je||1&o)&&Fe!==(Fe=t[0].maps.map(oe).join(", ")+"")&&M(O,Fe),(!je||16&o)&&qe!==(qe=t[4].distance.toFixed(1)+"")&&M(st,qe),(!je||16&o)&&ze!==(ze=Math.round(t[4].ascent)+"")&&M($t,ze),(!je||16&o)&&Re!==(Re=Math.round(t[4].descent)+"")&&M(yt,Re),(!je||16&o)&&We!==(We=t[4].effort.toFixed(1)+"")&&M(Lt,We),(!je||1&o)&&Ge!==(Ge=t[0].speed+"")&&M(qt,Ge),(!je||1&o)&&Ne!==(Ne=xt(t[0].start)+"")&&M(Ut,Ne),(!je||17&o)&&Be!==(Be=xt(t[0].start+t[4].duration)+"")&&M(ie,Be),(!je||16&o)&&Oe!==(Oe=kt(t[4].duration)+"")&&M(fe,Oe),(!je||16&o)&&Ie!==(Ie=kt(t[4].breakDuration)+"")&&M(ge,Ie)},i(t){je||(rt(e.$$.fragment,t),rt(i.$$.fragment,t),rt(u.$$.fragment,t),rt(X.$$.fragment,t),rt(Z.$$.fragment,t),rt(At.$$.fragment,t),rt(Nt.$$.fragment,t),rt(Zt.$$.fragment,t),rt(Se.$$.fragment,t),rt(Pe.$$.fragment,t),je=!0)},o(t){ot(e.$$.fragment,t),ot(i.$$.fragment,t),ot(u.$$.fragment,t),ot(X.$$.fragment,t),ot(Z.$$.fragment,t),ot(At.$$.fragment,t),ot(Nt.$$.fragment,t),ot(Zt.$$.fragment,t),ot(Se.$$.fragment,t),ot(Pe.$$.fragment,t),je=!1},d(t){ft(e,t),t&&g(s),ft(i,t),t&&g(c),ft(u,t),t&&g(p),t&&g(h),ft(X),ft(Z),ft(At),ft(Nt),ft(Zt),t&&g(ve),t&&g(we),ft(Se),ft(Pe),Ee=!1,o(Ae)}}}const oe=t=>`${t.id}`;function se(t,e,n){let r,{route:o}=e,s=!1,i=!1,l=!1;return t.$$set=t=>{"route"in t&&n(0,o=t.route)},t.$$.update=()=>{1&t.$$.dirty&&n(4,r=function(t){const e=t.distanceSum[t.line.length-1]/1e3,n=t.effortSum[t.markers.length-1],r=n/t.speed,o=t.breakSum[t.markers.length-1]/60,s=r+o,{ascent:i,descent:l}=function(t){let e=0,n=0;for(let r=1;r<t.markers.length;r++){const o=t.markerProfile[r].height-t.markerProfile[r-1].height;o>0?e+=o:n-=o}return{ascent:e,descent:n}}(t);return{distance:e,effort:n,walkingDuration:r,breakDuration:o,duration:s,ascent:i,descent:l}}(o))},[o,s,i,l,r,function(){!function(t){t.line.reverse(),t.markers.reverse(),t.lineProfile?.reverse(),t.markerProfile?.reverse(),t.markers.forEach((e=>e.index=t.line.length-e.index-1)),Dt(t)}(o),n(0,o)},function(){Tt(o).then((()=>n(0,o))).catch((t=>{Mt(t.id),alert(t.message)}))},function(){Ct("print"),window.print()},function(){Ct("export-csv");const t=[["Nr.","Name","Kommentar","HÃ¶he / m","Unterschied HÃ¶he / m","Total Distanz / km","Unterschied Distanz / km","Total Aufwand / Lkm","Unterschied Aufwand / Lkm","Total Gehzeit / h","Unterschied Gehzeit / h","Uhrzeit / hh:mm","Pausen / min"],...qt(o).map((t=>[t.index+1,t.name,t.comment??"",t.height,t.diff?.height??0,t.distance,t.diff?.distance??0,t.effort,t.diff?.effort??0,t.duration,t.diff?.duration??0,xt(t.time),t.break]))].map((t=>t.map((t=>`"${t}"`)).join(","))).join("\n"),e=document.createElement("a");e.href=URL.createObjectURL(new Blob([t],{type:"text/csv"})),e.download="marschzeittabelle.csv",e.click()},function(t){s=t,n(1,s)},function(e){t.$$.not_equal(o.speed,e)&&(o.speed=e,n(0,o))},function(t){i=t,n(2,i)},function(e){t.$$.not_equal(o.start,e)&&(o.start=e,n(0,o))},function(t){l=t,n(3,l)},function(e){t.$$.not_equal(o.mapScale,e)&&(o.mapScale=e,n(0,o))},()=>n(3,l=!0),()=>n(1,s=!0),()=>n(2,i=!0)]}class ie extends pt{constructor(t){super(),mt(this,t,se,re,i,{route:0})}}function le(){for(let t of Object.keys(ae)){const e="--"+t.replace(/[A-Z]/g,(t=>"-"+t.toLowerCase()));ae[t]=window.getComputedStyle(document.body).getPropertyValue(e)}return ae}const ae={backgroundColor:null,textColor:null,darkerAccentColor:null,accentColor:null,lighterAccentColor:null,shadowColor:null};function ce(e){let n;return{c(){n=b("canvas"),S(n,"class","svelte-xd84ci")},m(t,r){$(t,n,r),e[2](n)},p:t,i:t,o:t,d(t){t&&g(n),e[2](null)}}}function ue(t,e,n){let r,{route:o}=e;return t.$$set=t=>{"route"in t&&n(1,o=t.route)},t.$$.update=()=>{3&t.$$.dirty&&r&&(n(0,r.width=800,r),n(0,r.height=200,r),function(t,e){const n=le(),r=e.getContext("2d");r.clearRect(0,0,e.width,e.height);const o=12;let s=1/0,i=-1/0;for(let e of t.lineProfile)s=Math.min(s,e.height),i=Math.max(i,e.height);const l={x:t.distanceSum[t.distanceSum.length-1],y:i-s},a=Math.min((e.width-24)/l.x,(e.height-24-40)/l.y);e.width=Math.floor(l.x*a+24),e.height=Math.floor(l.y*a+24+40);const c=(t,n)=>{return r={x:(l={x:t,y:s-n}).x*(c=a),y:l.y*c},i={x:o,y:e.height-o-40},{x:r.x+i.x,y:r.y+i.y};var r,i,l,c},u=()=>{for(let e=0;e<t.lineProfile.length;e++){const n=c(t.lineProfileDistanceSum[e],t.lineProfile[e].height);0===e?r.moveTo(n.x,n.y):r.lineTo(n.x,n.y)}};r.beginPath(),u();const f=c(0,i),d=c(0,s),m=c(l.x,s);r.lineTo(m.x,e.height),r.lineTo(d.x,e.height);const p=r.createLinearGradient(0,f.y,0,e.height);p.addColorStop(0,n.lighterAccentColor),p.addColorStop(1,n.backgroundColor),r.fillStyle=p,r.fill(),r.beginPath(),u(),r.lineWidth=4,r.lineCap=r.lineJoin="round",r.strokeStyle=n.accentColor,r.stroke(),r.font="bold 14px sans-serif",r.textAlign="center",r.textBaseline="middle";for(let e=0;e<t.markerProfile.length;e++){const o=c(t.distanceSum[t.markers[e].index],t.markerProfile[e].height);r.beginPath(),r.arc(o.x,o.y,10,0,2*Math.PI),r.fillStyle=n.darkerAccentColor,r.fill(),r.fillStyle=n.backgroundColor,r.fillText(e+1,o.x,o.y+.5)}const h=125*2**Math.floor(Math.log2(120/(125*a))),$=h*a;r.fillStyle=n.textColor,r.fillRect(e.width-o-$,e.height-4,$,2),r.fillRect(e.width-o-$,e.height-6,2,6),r.fillRect(e.width-o-2,e.height-6,2,6),r.textAlign="right",r.textBaseline="bottom",r.fillText(`${h} m`,e.width-o,e.height-6)}(o,r))},[r,o,function(t){W[t?"unshift":"push"]((()=>{r=t,n(0,r),n(1,o)}))}]}class fe extends pt{constructor(t){super(),mt(this,t,ue,ce,i,{route:1})}}function de(t){let e,n,r,s,i,l,a,c,u,f,d,p,h,k,y,M,P,L,j,E;return l=new wt({props:{name:"block"}}),f=new wt({props:{name:"hourglass_bottom"}}),k=new wt({props:{name:"hourglass_full"}}),{c(){e=b("label"),e.textContent="Pause (min)",n=w(),r=b("input"),s=w(),i=b("button"),ct(l.$$.fragment),a=v(" Keine"),c=w(),u=b("button"),ct(f.$$.fragment),d=v(" 5 min"),p=w(),h=b("button"),ct(k.$$.fragment),y=v(" 15 min"),M=w(),P=b("br"),S(e,"for","break"),S(r,"id","break"),S(r,"type","number"),S(r,"min","0"),r.required=!0,S(i,"type","button"),S(i,"class","pill"),S(u,"type","button"),S(u,"class","pill"),S(h,"type","button"),S(h,"class","pill")},m(o,g){$(o,e,g),$(o,n,g),$(o,r,g),_(r,t[0].break),$(o,s,g),$(o,i,g),ut(l,i,null),m(i,a),$(o,c,g),$(o,u,g),ut(f,u,null),m(u,d),$(o,p,g),$(o,h,g),ut(k,h,null),m(h,y),$(o,M,g),$(o,P,g),L=!0,j||(E=[x(r,"input",t[4]),x(i,"click",t[5]),x(u,"click",t[6]),x(h,"click",t[7])],j=!0)},p(t,e){1&e&&C(r.value)!==t[0].break&&_(r,t[0].break)},i(t){L||(rt(l.$$.fragment,t),rt(f.$$.fragment,t),rt(k.$$.fragment,t),L=!0)},o(t){ot(l.$$.fragment,t),ot(f.$$.fragment,t),ot(k.$$.fragment,t),L=!1},d(t){t&&g(e),t&&g(n),t&&g(r),t&&g(s),t&&g(i),ft(l),t&&g(c),t&&g(u),ft(f),t&&g(p),t&&g(h),ft(k),t&&g(M),t&&g(P),j=!1,o(E)}}}function me(t){let e,n,r,s,i,l,a,c,u,f,d,m,p=t[1]&&de(t);return{c(){e=b("label"),e.textContent="Name",n=w(),r=b("input"),s=w(),i=b("label"),i.textContent="Kommentar",l=w(),a=b("textarea"),c=w(),p&&p.c(),u=k(),S(e,"for","name"),S(r,"id","name"),S(r,"type","text"),r.required=!0,S(i,"for","comment"),S(a,"id","comment"),S(a,"class","svelte-1er4ovm")},m(o,h){$(o,e,h),$(o,n,h),$(o,r,h),_(r,t[0].name),$(o,s,h),$(o,i,h),$(o,l,h),$(o,a,h),_(a,t[0].comment),$(o,c,h),p&&p.m(o,h),$(o,u,h),f=!0,d||(m=[x(r,"input",t[2]),x(a,"input",t[3])],d=!0)},p(t,e){1&e&&r.value!==t[0].name&&_(r,t[0].name),1&e&&_(a,t[0].comment),t[1]?p?(p.p(t,e),2&e&&rt(p,1)):(p=de(t),p.c(),rt(p,1),p.m(u.parentNode,u)):p&&(et(),ot(p,1,1,(()=>{p=null})),nt())},i(t){f||(rt(p),f=!0)},o(t){ot(p),f=!1},d(t){t&&g(e),t&&g(n),t&&g(r),t&&g(s),t&&g(i),t&&g(l),t&&g(a),t&&g(c),p&&p.d(t),t&&g(u),d=!1,o(m)}}}function pe(t){let e,n;return e=new Ot({props:{title:"Wegpunkt bearbeiten",show:null!=t[0],$$slots:{default:[me]},$$scope:{ctx:t}}}),e.$on("close",t[8]),{c(){ct(e.$$.fragment)},m(t,r){ut(e,t,r),n=!0},p(t,[n]){const r={};1&n&&(r.show=null!=t[0]),515&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(rt(e.$$.fragment,t),n=!0)},o(t){ot(e.$$.fragment,t),n=!1},d(t){ft(e,t)}}}function he(t,e,n){let{marker:r}=e,{showBreak:o}=e;return t.$$set=t=>{"marker"in t&&n(0,r=t.marker),"showBreak"in t&&n(1,o=t.showBreak)},[r,o,function(){r.name=this.value,n(0,r)},function(){r.comment=this.value,n(0,r)},function(){r.break=C(this.value),n(0,r)},()=>n(0,r.break=0,r),()=>n(0,r.break=5,r),()=>n(0,r.break=15,r),function(e){z.call(this,t,e)}]}class $e extends pt{constructor(t){super(),mt(this,t,he,pe,i,{marker:0,showBreak:1})}}function ge(t,e,n){const r=t.slice();return r[6]=e[n],r}function be(t){let e,n,r,o,s,i,l,a,c=(t[6].comment??"")+"",u=t[6].diff&&ve(t),f=t[6].break>0&&we(t);return{c(){e=b("tr"),n=b("td"),r=v(c),o=w(),u&&u.c(),s=w(),f&&f.c(),i=w(),l=b("td"),a=w(),S(n,"class","comment svelte-1nh1bvr"),S(l,"class","svelte-1nh1bvr"),S(e,"class","alt svelte-1nh1bvr")},m(t,c){$(t,e,c),m(e,n),m(n,r),m(e,o),u&&u.m(e,null),m(e,s),f&&f.m(e,null),m(e,i),m(e,l),m(e,a)},p(t,n){4&n&&c!==(c=(t[6].comment??"")+"")&&M(r,c),t[6].diff?u?u.p(t,n):(u=ve(t),u.c(),u.m(e,s)):u&&(u.d(1),u=null),t[6].break>0?f?f.p(t,n):(f=we(t),f.c(),f.m(e,i)):f&&(f.d(1),f=null)},d(t){t&&g(e),u&&u.d(),f&&f.d()}}}function ve(t){let e,n,r,o,s,i,l,a,c,u,f,d,p,h,k,x=Math.round(t[6].diff.height)+"",y=t[6].diff.distance.toFixed(1)+"",C=t[6].diff.effort.toFixed(1)+"",_=kt(t[6].diff.duration)+"";return{c(){e=b("td"),n=v(x),r=v(" m"),o=w(),s=b("td"),i=v(y),l=v(" km"),a=w(),c=b("td"),u=v(C),f=v(" Lkm"),d=w(),p=b("td"),h=v(_),k=v(" h"),S(e,"class","number svelte-1nh1bvr"),S(s,"class","number svelte-1nh1bvr"),S(c,"class","number svelte-1nh1bvr"),S(p,"class","number svelte-1nh1bvr")},m(t,g){$(t,e,g),m(e,n),m(e,r),$(t,o,g),$(t,s,g),m(s,i),m(s,l),$(t,a,g),$(t,c,g),m(c,u),m(c,f),$(t,d,g),$(t,p,g),m(p,h),m(p,k)},p(t,e){4&e&&x!==(x=Math.round(t[6].diff.height)+"")&&M(n,x),4&e&&y!==(y=t[6].diff.distance.toFixed(1)+"")&&M(i,y),4&e&&C!==(C=t[6].diff.effort.toFixed(1)+"")&&M(u,C),4&e&&_!==(_=kt(t[6].diff.duration)+"")&&M(h,_)},d(t){t&&g(e),t&&g(o),t&&g(s),t&&g(a),t&&g(c),t&&g(d),t&&g(p)}}}function we(t){let e,n,r,o=kt(t[6].break/60)+"";return{c(){e=b("td"),n=v("+"),r=v(o),S(e,"class","number svelte-1nh1bvr")},m(t,o){$(t,e,o),m(e,n),m(e,r)},p(t,e){4&e&&o!==(o=kt(t[6].break/60)+"")&&M(r,o)},d(t){t&&g(e)}}}function ke(t){let e,n,r,o,s,i,l,a,c,u,f,d,p,h,y,C,_,P,L,j,E,A,T,D,H,F,q,z,R,W,G,N,B,O,I=t[6].index+1+"",K=t[6].name+"",U=Math.round(t[6].height)+"",X=t[6].distance.toFixed(1)+"",J=t[6].effort.toFixed(1)+"",V=kt(t[6].duration)+"",Z=xt(t[6].time)+"";function Q(){return t[5](t[6])}R=new wt({props:{name:"edit"}});let Y=(t[6].comment||t[6].diff)&&be(t);return{c(){e=b("tr"),n=b("td"),r=b("span"),o=v(I),s=w(),i=v(K),l=w(),a=b("td"),c=v(U),u=v(" m"),f=w(),d=b("td"),p=v(X),h=v(" km"),y=w(),C=b("td"),_=v(J),P=v(" Lkm"),L=w(),j=b("td"),E=v(V),A=v(" h"),T=w(),D=b("td"),H=v(Z),F=w(),q=b("td"),z=b("button"),ct(R.$$.fragment),W=w(),Y&&Y.c(),G=k(),S(r,"class","pill svelte-1nh1bvr"),S(n,"class","name svelte-1nh1bvr"),S(a,"class","number svelte-1nh1bvr"),S(d,"class","number svelte-1nh1bvr"),S(C,"class","number svelte-1nh1bvr"),S(j,"class","number svelte-1nh1bvr"),S(D,"class","number svelte-1nh1bvr"),S(z,"class","pill"),S(q,"class","noprint svelte-1nh1bvr")},m(t,g){$(t,e,g),m(e,n),m(n,r),m(r,o),m(n,s),m(n,i),m(e,l),m(e,a),m(a,c),m(a,u),m(e,f),m(e,d),m(d,p),m(d,h),m(e,y),m(e,C),m(C,_),m(C,P),m(e,L),m(e,j),m(j,E),m(j,A),m(e,T),m(e,D),m(D,H),m(e,F),m(e,q),m(q,z),ut(R,z,null),$(t,W,g),Y&&Y.m(t,g),$(t,G,g),N=!0,B||(O=x(z,"click",Q),B=!0)},p(e,n){t=e,(!N||4&n)&&I!==(I=t[6].index+1+"")&&M(o,I),(!N||4&n)&&K!==(K=t[6].name+"")&&M(i,K),(!N||4&n)&&U!==(U=Math.round(t[6].height)+"")&&M(c,U),(!N||4&n)&&X!==(X=t[6].distance.toFixed(1)+"")&&M(p,X),(!N||4&n)&&J!==(J=t[6].effort.toFixed(1)+"")&&M(_,J),(!N||4&n)&&V!==(V=kt(t[6].duration)+"")&&M(E,V),(!N||4&n)&&Z!==(Z=xt(t[6].time)+"")&&M(H,Z),t[6].comment||t[6].diff?Y?Y.p(t,n):(Y=be(t),Y.c(),Y.m(G.parentNode,G)):Y&&(Y.d(1),Y=null)},i(t){N||(rt(R.$$.fragment,t),N=!0)},o(t){ot(R.$$.fragment,t),N=!1},d(t){t&&g(e),ft(R),t&&g(W),Y&&Y.d(t),t&&g(G),B=!1,O()}}}function xe(t){let e,n,r,o,s,i;e=new $e({props:{marker:t[1],showBreak:t[3]}}),e.$on("close",t[4]);let l=t[2],a=[];for(let e=0;e<l.length;e+=1)a[e]=ke(ge(t,l,e));const c=t=>ot(a[t],1,1,(()=>{a[t]=null}));return{c(){ct(e.$$.fragment),n=w(),r=b("table"),o=b("tr"),o.innerHTML='<th class="svelte-1nh1bvr">Wegpunkt<br/>Kommentar</th> \n        <th class="svelte-1nh1bvr">HÃ¶he</th> \n        <th class="svelte-1nh1bvr">Distanz</th> \n        <th class="svelte-1nh1bvr">Aufwand</th> \n        <th class="svelte-1nh1bvr">Gehzeit</th> \n        <th class="svelte-1nh1bvr">Uhrzeit<br/>Pause</th>',s=w();for(let t=0;t<a.length;t+=1)a[t].c();S(r,"class","svelte-1nh1bvr")},m(t,l){ut(e,t,l),$(t,n,l),$(t,r,l),m(r,o),m(r,s);for(let t=0;t<a.length;t+=1)a[t].m(r,null);i=!0},p(t,[n]){const o={};if(2&n&&(o.marker=t[1]),8&n&&(o.showBreak=t[3]),e.$set(o),7&n){let e;for(l=t[2],e=0;e<l.length;e+=1){const o=ge(t,l,e);a[e]?(a[e].p(o,n),rt(a[e],1)):(a[e]=ke(o),a[e].c(),rt(a[e],1),a[e].m(r,null))}for(et(),e=l.length;e<a.length;e+=1)c(e);nt()}},i(t){if(!i){rt(e.$$.fragment,t);for(let t=0;t<l.length;t+=1)rt(a[t]);i=!0}},o(t){ot(e.$$.fragment,t),a=a.filter(Boolean);for(let t=0;t<a.length;t+=1)ot(a[t]);i=!1},d(t){ft(e,t),t&&g(n),t&&g(r),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(a,t)}}}function ye(t,e,n){let r,o,{route:s}=e,i=[];return t.$$set=t=>{"route"in t&&n(0,s=t.route)},t.$$.update=()=>{1&t.$$.dirty&&n(2,i=qt(s)),3&t.$$.dirty&&n(3,r=o!==s.markers[s.markers.length-1])},[s,o,i,r,function(){Dt(s),n(0,s),n(1,o=null)},t=>n(1,o=s.markers[t.index])]}class Se extends pt{constructor(t){super(),mt(this,t,ye,xe,i,{route:0})}}function Ce(t){let e,n,r;return e=new wt({props:{name:"visibility"}}),{c(){ct(e.$$.fragment),n=v(" Anzeigen")},m(t,o){ut(e,t,o),$(t,n,o),r=!0},i(t){r||(rt(e.$$.fragment,t),r=!0)},o(t){ot(e.$$.fragment,t),r=!1},d(t){ft(e,t),t&&g(n)}}}function Me(t){let e,n,r;return e=new wt({props:{name:"visibility_off"}}),{c(){ct(e.$$.fragment),n=v(" Ausblenden")},m(t,o){ut(e,t,o),$(t,n,o),r=!0},i(t){r||(rt(e.$$.fragment,t),r=!0)},o(t){ot(e.$$.fragment,t),r=!1},d(t){ft(e,t),t&&g(n)}}}function _e(t){let e,n,r,o;return n=new fe({props:{route:t[0]}}),{c(){e=b("div"),ct(n.$$.fragment)},m(t,r){$(t,e,r),ut(n,e,null),o=!0},p(t,e){const r={};1&e&&(r.route=t[0]),n.$set(r)},i(t){o||(rt(n.$$.fragment,t),I((()=>{r||(r=it(e,gt,{duration:100},!0)),r.run(1)})),o=!0)},o(t){ot(n.$$.fragment,t),r||(r=it(e,gt,{duration:100},!1)),r.run(0),o=!1},d(t){t&&g(e),ft(n),t&&r&&r.end()}}}function Pe(t){let e,n,r,s,i,l,a,c,u,f,d,p,h,k,y,C,M,P,j,E,A,T,D,H,F,q,z,R,G,N,B,O;function I(e){t[4](e)}a=new wt({props:{name:"edit"}});let U={};function X(e){t[5](e)}void 0!==t[0]&&(U.route=t[0]),k=new ie({props:U}),W.push((()=>at(k,"route",I)));let J={};void 0!==t[0]&&(J.route=t[0]),E=new Se({props:J}),W.push((()=>at(E,"route",X)));const V=[Me,Ce],Z=[];function Q(t,e){return t[1]?0:1}z=Q(t),R=Z[z]=V[z](t);let Y=t[1]&&_e(t);return{c(){e=b("div"),n=b("h1"),r=b("input"),s=w(),i=b("div"),l=b("button"),ct(a.$$.fragment),c=v(" Titel bearbeiten"),u=w(),f=b("br"),d=w(),p=b("br"),h=w(),ct(k.$$.fragment),C=w(),M=b("div"),P=b("h2"),P.textContent="Marschzeittabelle",j=w(),ct(E.$$.fragment),T=w(),D=b("div"),H=b("h2"),H.textContent="HÃ¶henprofil",F=w(),q=b("button"),R.c(),G=w(),Y&&Y.c(),S(r,"id","title"),S(r,"type","text"),S(r,"class","svelte-a9c1ov"),S(n,"class","svelte-a9c1ov"),S(l,"class","pill"),S(i,"class","noprint"),S(e,"class","options"),S(P,"class","svelte-a9c1ov"),S(M,"class","table svelte-a9c1ov"),S(H,"class","svelte-a9c1ov"),S(q,"class","pill noprint svelte-a9c1ov"),S(D,"class","profile svelte-a9c1ov"),L(D,"noprint",!t[1])},m(o,g){$(o,e,g),m(e,n),m(n,r),_(r,t[0].title),m(e,s),m(e,i),m(i,l),ut(a,l,null),m(l,c),m(i,u),m(i,f),m(i,d),m(i,p),m(e,h),ut(k,e,null),$(o,C,g),$(o,M,g),m(M,P),m(M,j),ut(E,M,null),$(o,T,g),$(o,D,g),m(D,H),m(D,F),m(D,q),Z[z].m(q,null),m(D,G),Y&&Y.m(D,null),N=!0,B||(O=[x(r,"input",t[2]),x(l,"click",t[3]),x(q,"click",t[6])],B=!0)},p(t,[e]){1&e&&r.value!==t[0].title&&_(r,t[0].title);const n={};!y&&1&e&&(y=!0,n.route=t[0],K((()=>y=!1))),k.$set(n);const o={};!A&&1&e&&(A=!0,o.route=t[0],K((()=>A=!1))),E.$set(o);let s=z;z=Q(t),z!==s&&(et(),ot(Z[s],1,1,(()=>{Z[s]=null})),nt(),R=Z[z],R||(R=Z[z]=V[z](t),R.c()),rt(R,1),R.m(q,null)),t[1]?Y?(Y.p(t,e),2&e&&rt(Y,1)):(Y=_e(t),Y.c(),rt(Y,1),Y.m(D,null)):Y&&(et(),ot(Y,1,1,(()=>{Y=null})),nt()),2&e&&L(D,"noprint",!t[1])},i(t){N||(rt(a.$$.fragment,t),rt(k.$$.fragment,t),rt(E.$$.fragment,t),rt(R),rt(Y),N=!0)},o(t){ot(a.$$.fragment,t),ot(k.$$.fragment,t),ot(E.$$.fragment,t),ot(R),ot(Y),N=!1},d(t){t&&g(e),ft(a),ft(k),t&&g(C),t&&g(M),ft(E),t&&g(T),t&&g(D),Z[z].d(),Y&&Y.d(),B=!1,o(O)}}}function Le(t,e,n){let{route:r}=e,o=!0;return t.$$set=t=>{"route"in t&&n(0,r=t.route)},[r,o,function(){r.title=this.value,n(0,r)},()=>document.getElementById("title").select(),function(t){r=t,n(0,r)},function(t){r=t,n(0,r)},()=>n(1,o=!o)]}class je extends pt{constructor(t){super(),mt(this,t,Le,Pe,i,{route:0})}}function Ee(e){let n,r,o,s,i,l,a,c,u,f,d,p,h,k,x,y,C,M,_,P,L,j,E,A,T,D;return a=new wt({props:{name:"draw",big:!0}}),h=new wt({props:{name:"output",big:!0}}),C=new Wt({props:{topic:"export",label:"Wie geht das?"}}),L=new wt({props:{name:"upload_file",big:!0}}),{c(){n=b("div"),n.innerHTML='<h1 class="svelte-1s02bpu">MarschzeitÂ­tabelle<br/>leicht gemacht.</h1> \n    <p class="subtitle svelte-1s02bpu">Wir Ã¼bertragen deine Route automatisch in eine Marschzeittabelle, damit dir mehr Zeit fÃ¼r den Rest der Wanderplanung bleibt.</p>',r=w(),o=b("div"),s=b("div"),i=b("h2"),l=v("1. Planen "),ct(a.$$.fragment),c=w(),u=b("p"),u.textContent="Route einzeichnen und Wegpunkte benennen - das kennst du bereits.",f=w(),d=b("h2"),p=v("2. Exportieren "),ct(h.$$.fragment),k=w(),x=b("p"),y=v("In wenigen Klicks erledigt. "),ct(C.$$.fragment),M=w(),_=b("h2"),P=v("3. Hochladen "),ct(L.$$.fragment),j=w(),E=b("p"),E.textContent="Jetzt noch Geschwindigkeit, Abreisezeit, Kommentare und Pausen anpassen.",A=w(),T=b("div"),T.innerHTML='<img class="map svelte-1s02bpu" src="map.jpg" alt="Beispiel-Karte"/> \n        <img class="output svelte-1s02bpu" src="output.jpg" alt="Beispiel-Ausgabe"/>',S(n,"class","title svelte-1s02bpu"),S(i,"class","svelte-1s02bpu"),S(u,"class","svelte-1s02bpu"),S(d,"class","svelte-1s02bpu"),S(x,"class","svelte-1s02bpu"),S(_,"class","svelte-1s02bpu"),S(E,"class","svelte-1s02bpu"),S(s,"class","steps svelte-1s02bpu"),S(T,"class","example svelte-1s02bpu"),S(o,"class","tutorial svelte-1s02bpu")},m(t,e){$(t,n,e),$(t,r,e),$(t,o,e),m(o,s),m(s,i),m(i,l),ut(a,i,null),m(s,c),m(s,u),m(s,f),m(s,d),m(d,p),ut(h,d,null),m(s,k),m(s,x),m(x,y),ut(C,x,null),m(s,M),m(s,_),m(_,P),ut(L,_,null),m(s,j),m(s,E),m(o,A),m(o,T),D=!0},p:t,i(t){D||(rt(a.$$.fragment,t),rt(h.$$.fragment,t),rt(C.$$.fragment,t),rt(L.$$.fragment,t),D=!0)},o(t){ot(a.$$.fragment,t),ot(h.$$.fragment,t),ot(C.$$.fragment,t),ot(L.$$.fragment,t),D=!1},d(t){t&&g(n),t&&g(r),t&&g(o),ft(a),ft(h),ft(C),ft(L)}}}class Ae extends pt{constructor(t){super(),mt(this,t,null,Ee,i,{})}}function Te(t){return function(t){return new Promise(((e,n)=>{const r=new FileReader;r.addEventListener("load",(()=>e(r.result))),r.addEventListener("error",(()=>n("Die Datei konnte nicht gelesen werden."))),r.readAsText(t)}))}(t).then((t=>async function(t){const e=(new DOMParser).parseFromString(t,"application/xml");if(e.querySelector("parsererror"))throw{id:"invalid-xml",message:"Die Datei ist nicht in gÃ¼ltigem XML-Format."};return e}(t))).then((e=>t.name.endsWith(".kml")?async function(t){const e=[],n=[],r=t=>{const[e,n]=t.split(",");return De(n,e)},o=t.querySelectorAll("Placemark");for(let t of o){if(t.querySelector("LineString, LinearRing")){const n=t.querySelector(":is(LineString, LinearRing) coordinates").innerHTML.trim().split(" ").map((t=>r(t)));e.push(n)}if(t.querySelector("Point")){const e=t.querySelector("name").innerHTML.trim(),o=t.querySelector("description")?.innerHTML?.trim(),s=r(t.querySelector("Point coordinates").innerHTML);n.push({name:e,comment:o,point:s})}}return{lines:e,markers:n}}(e):t.name.endsWith(".gpx")?async function(t){const e=[],n=[],r=t=>De(t.getAttribute("lat"),t.getAttribute("lon")),o=t.querySelectorAll("trkseg");for(let t of o){const n=Array.from(t.querySelectorAll("trkpt")).map((t=>r(t)));e.push(n)}const s=t.querySelectorAll("trkpt > name");for(let t of s){const e=t.parentElement,o=t.innerHTML.trim(),s=e.querySelector("desc")?.innerHTML?.trim(),i=r(e);n.push({name:o,comment:s,point:i})}if(0===n.length){const e=t.querySelectorAll("wpt");for(let t of e){const e=t.querySelector("name").innerHTML.trim(),o=r(t);n.push({name:e,point:o})}}return{lines:e,markers:n}}(e):void 0)).then((({lines:e,markers:n})=>async function(t,e,n){if(0===t.length)throw{id:"no-line",message:"Die Route enthÃ¤lt keine Linie."};if(0===e.length)throw{id:"no-markers",message:"Die Route enthÃ¤lt keine Wegpunkte."};for(;t.length>1;){const e=He(t);if(null==e)throw{id:"disjoint-lines",message:"Die Route enthÃ¤lt Linien, die nicht miteinander verbunden sind."};e.reverseFirst&&t[e.i].reverse(),e.reverseSecond&&t[e.j].reverse(),t[e.i].push(...t[e.j]),t.splice(e.j,1)}const r=t[0];let o=null;for(let t=0;t<r.length;t++){const n=e.filter((t=>null==o||!_t(t.point,o))).filter((e=>Pt(e.point,r[t])<10));if(0===n.length)continue;const s=n[0],i=n.filter((t=>null==t.index&&t!==s));if(e=e.filter((t=>!i.includes(t))),null==s.index)s.index=t;else{const n=Object.assign({},s);n.index=t,e.push(n)}o=s.point}const s=e.filter((t=>null==t.index));if(s.length>0){throw{id:"marker-not-on-line",message:`Wegpunkte nicht in der NÃ¤he von Eckpunkten der Linie: ${s.map((t=>`"${t.name}"`)).join(", ")}.`}}e.sort(((t,e)=>t.index-e.index));for(let t of e)t.break=0;const i=n.substring(0,n.lastIndexOf("."))||n;return{line:r,mapScale:25,markers:e,speed:4,start:0,title:i}}(e,n,t.name))).then((t=>async function(t){return t.lineProfile=await jt(t.line,!1,100),t.markerProfile=await jt(t.markers.map((e=>t.line[e.index])),!0,t.markers.length),Dt(t),t}(t))).then((t=>Tt(t)))}function De(t,e){const[n,r]=class{static WGStoCH(t,e){return[this.WGStoCHy(t,e),this.WGStoCHx(t,e)]}static WGStoCHx(t,e){const n=((t=this.DECtoSEX(t))-169028.66)/1e4,r=((e=this.DECtoSEX(e))-26782.5)/1e4;return 200147.07+308807.95*n+3745.25*Math.pow(r,2)+76.63*Math.pow(n,2)-194.56*Math.pow(r,2)*n+119.79*Math.pow(n,3)}static WGStoCHy(t,e){const n=((t=this.DECtoSEX(t))-169028.66)/1e4,r=((e=this.DECtoSEX(e))-26782.5)/1e4;return 600072.37+211455.93*r-10938.51*r*n-.36*r*Math.pow(n,2)-44.54*Math.pow(r,3)}static CHtoWGS(t,e){return[this.CHtoWGSlng(t,e),this.CHtoWGSlat(t,e)]}static CHtoWGSlat(t,e){const n=(t-6e5)/1e6,r=(e-2e5)/1e6;return 100*(16.9023892+3.238272*r-.270978*Math.pow(n,2)-.002528*Math.pow(r,2)-.0447*Math.pow(n,2)*r-.014*Math.pow(r,3))/36}static CHtoWGSlng(t,e){const n=(t-6e5)/1e6,r=(e-2e5)/1e6;return 100*(2.6779094+4.728982*n+.791484*n*r+.1306*n*Math.pow(r,2)-.0436*Math.pow(n,3))/36}static DECtoSEX(t){const e=parseInt(t),n=parseInt(60*(t-e));return 60*(60*(t-e)-n)+60*n+3600*e}}.WGStoCH(Number(t),Number(e));return{x:n,y:r}}function He(t){const e=(t,e)=>Pt(t,e)<10;for(let n=0;n<t.length;n++)for(let r=n+1;r<t.length;r++){if(e(t[n][t[n].length-1],t[r][0]))return{i:n,j:r,reverseFirst:!1,reverseSecond:!1};if(e(t[n][0],t[r][t[r].length-1]))return{i:n,j:r,reverseFirst:!0,reverseSecond:!0};if(e(t[n][0],t[r][0]))return{i:n,j:r,reverseFirst:!0,reverseSecond:!1};if(e(t[n][t[n].length-1],t[r][t[r].length-1]))return{i:n,j:r,reverseFirst:!1,reverseSecond:!0}}return null}function Fe(e){let n;return{c(){n=b("div"),S(n,"class","svelte-12lg60")},m(t,e){$(t,n,e)},p:t,i:t,o:t,d(t){t&&g(n)}}}class qe extends pt{constructor(t){super(),mt(this,t,null,Fe,i,{})}}function ze(e){let n,r,s,i,l,a,c,u,f,d,p,h,k,y,C,M;return d=new wt({props:{name:"upload_file"}}),{c(){n=b("h2"),n.textContent="Route hochladen",r=w(),s=b("p"),s.innerHTML='UnterstÃ¼tzt sind <b>KML-Dateien</b> von <a href="https://map.geo.admin.ch" target="_blank">map.geo.admin.ch</a> oder der <a href="https://www.swisstopo.admin.ch/en/maps-data-online/maps-geodata-online/swisstopo-app.html" target="_blank">swisstopo-App</a>, sowie <b>GPX-Dateien</b> von <a href="https://www.outdooractive.com/de/routeplanner" target="_blank">outdooractive.com</a>.',i=w(),l=b("p"),l.textContent="Datei hierher ziehen oder...",a=w(),c=b("input"),u=w(),f=b("button"),ct(d.$$.fragment),p=v(" Datei auswÃ¤hlen"),h=w(),k=b("br"),S(n,"class","svelte-cfhsjj"),S(c,"type","file"),S(c,"id","upload"),S(c,"accept",".kml, .gpx"),S(c,"class","svelte-cfhsjj")},m(t,o){$(t,n,o),$(t,r,o),$(t,s,o),$(t,i,o),$(t,l,o),$(t,a,o),$(t,c,o),$(t,u,o),$(t,f,o),ut(d,f,null),m(f,p),$(t,h,o),$(t,k,o),y=!0,C||(M=[x(c,"change",e[5]),x(f,"click",e[6])],C=!0)},p:t,i(t){y||(rt(d.$$.fragment,t),y=!0)},o(t){ot(d.$$.fragment,t),y=!1},d(t){t&&g(n),t&&g(r),t&&g(s),t&&g(i),t&&g(l),t&&g(a),t&&g(c),t&&g(u),t&&g(f),ft(d),t&&g(h),t&&g(k),C=!1,o(M)}}}function Re(t){let e,n,r,o={ctx:t,current:null,token:null,hasCatch:!0,pending:Ne,then:Ge,catch:We,error:8,blocks:[,,,]};return lt(n=t[1],o),{c(){e=k(),o.block.c()},m(t,n){$(t,e,n),o.block.m(t,o.anchor=n),o.mount=()=>e.parentNode,o.anchor=e,r=!0},p(e,r){t=e,o.ctx=t,2&r&&n!==(n=t[1])&&lt(n,o)||function(t,e,n){const r=e.slice(),{resolved:o}=t;t.current===t.then&&(r[t.value]=o),t.current===t.catch&&(r[t.error]=o),t.block.p(r,n)}(o,t,r)},i(t){r||(rt(o.block),r=!0)},o(t){for(let t=0;t<3;t+=1){ot(o.blocks[t])}r=!1},d(t){t&&g(e),o.block.d(t),o.token=null,o=null}}}function We(t){let e,n,r,o,s,i,l,a,c,u,f,d,p,h=t[8].message+"";return c=new wt({props:{name:"refresh"}}),{c(){e=b("h2"),e.textContent="Hoppla!",n=w(),r=b("p"),o=v("Es gab einen Fehler beim Import:"),s=b("br"),i=v(h),l=w(),a=b("button"),ct(c.$$.fragment),u=v(" Nochmal versuchen"),S(e,"class","svelte-cfhsjj"),S(a,"class","secondary")},m(h,g){$(h,e,g),$(h,n,g),$(h,r,g),m(r,o),m(r,s),m(r,i),$(h,l,g),$(h,a,g),ut(c,a,null),m(a,u),f=!0,d||(p=x(a,"click",t[4]),d=!0)},p(t,e){(!f||2&e)&&h!==(h=t[8].message+"")&&M(i,h)},i(t){f||(rt(c.$$.fragment,t),f=!0)},o(t){ot(c.$$.fragment,t),f=!1},d(t){t&&g(e),t&&g(n),t&&g(r),t&&g(l),t&&g(a),ft(c),d=!1,p()}}}function Ge(e){return{c:t,m:t,p:t,i:t,o:t,d:t}}function Ne(e){let n,r,o,s,i,l;return i=new qe({}),{c(){n=b("h2"),n.textContent="Route wird gewandert...",r=w(),o=b("br"),s=w(),ct(i.$$.fragment),S(n,"class","svelte-cfhsjj")},m(t,e){$(t,n,e),$(t,r,e),$(t,o,e),$(t,s,e),ut(i,t,e),l=!0},p:t,i(t){l||(rt(i.$$.fragment,t),l=!0)},o(t){ot(i.$$.fragment,t),l=!1},d(t){t&&g(n),t&&g(r),t&&g(o),t&&g(s),ft(i,t)}}}function Be(t){let e,n,r,s,i,l;const a=[Re,ze],c=[];function u(t,e){return t[0]&&t[0][0]?0:1}return n=u(t),r=c[n]=a[n](t),{c(){e=b("div"),r.c(),S(e,"class","svelte-cfhsjj")},m(r,o){$(r,e,o),c[n].m(e,null),s=!0,i||(l=[x(e,"drop",y(t[7])),x(e,"dragover",y(t[3]))],i=!0)},p(t,[o]){let s=n;n=u(t),n===s?c[n].p(t,o):(et(),ot(c[s],1,1,(()=>{c[s]=null})),nt(),r=c[n],r?r.p(t,o):(r=c[n]=a[n](t),r.c()),rt(r,1),r.m(e,null))},i(t){s||(rt(r),s=!0)},o(t){ot(r),s=!1},d(t){t&&g(e),c[n].d(),i=!1,o(l)}}}function Oe(t,e,n){let r,o,{route:s=null}=e;return t.$$set=t=>{"route"in t&&n(2,s=t.route)},t.$$.update=()=>{1&t.$$.dirty&&r&&r[0]&&n(1,o=Te(r[0]).then((t=>new Promise((e=>{Ct("upload"),setTimeout((()=>e(t)),500)})))).then((t=>n(2,s=t))).catch((t=>{throw Mt(t.id),t})))},[r,o,s,function(e){z.call(this,t,e)},()=>n(0,r=null),function(){r=this.files,n(0,r)},()=>document.getElementById("upload").click(),t=>n(0,r=t.dataTransfer.files)]}class Ie extends pt{constructor(t){super(),mt(this,t,Oe,Be,i,{route:2})}}function Ke(t){let e,n,r,o,s,i;return o=new je({props:{route:t[0]}}),{c(){e=b("header"),e.innerHTML='<a href=".">â® startseite</a>',n=w(),r=b("main"),ct(o.$$.fragment),S(e,"class","noprint")},m(t,s){$(t,e,s),$(t,n,s),$(t,r,s),ut(o,r,null),i=!0},p(t,e){const n={};1&e&&(n.route=t[0]),o.$set(n)},i(t){i||(rt(o.$$.fragment,t),I((()=>{s||(s=it(r,$t,{},!0)),s.run(1)})),i=!0)},o(t){ot(o.$$.fragment,t),s||(s=it(r,$t,{},!1)),s.run(0),i=!1},d(t){t&&g(e),t&&g(n),t&&g(r),ft(o),t&&s&&s.end()}}}function Ue(t){let e,n,r,o,s,i;function l(e){t[1](e)}n=new Ae({});let a={};return void 0!==t[0]&&(a.route=t[0]),o=new Ie({props:a}),W.push((()=>at(o,"route",l))),{c(){e=b("main"),ct(n.$$.fragment),r=w(),ct(o.$$.fragment)},m(t,s){$(t,e,s),ut(n,e,null),m(e,r),ut(o,e,null),i=!0},p(t,e){const n={};!s&&1&e&&(s=!0,n.route=t[0],K((()=>s=!1))),o.$set(n)},i(t){i||(rt(n.$$.fragment,t),rt(o.$$.fragment,t),i=!0)},o(t){ot(n.$$.fragment,t),ot(o.$$.fragment,t),i=!1},d(t){t&&g(e),ft(n),ft(o)}}}function Xe(t){let e,n,r,o,s;const i=[Ue,Ke],l=[];function a(t,e){return null==t[0]?0:1}return e=a(t),n=l[e]=i[e](t),{c(){n.c(),r=w(),o=b("footer"),o.innerHTML='<span>marschzeittabelle.ch</span> \n    <span class="noprint">| <a href="help">hilfe</a>\n        | <a href="https://github.com/ckolin/marschzeittabelle">github</a></span>',S(o,"class","svelte-1pxn2rk")},m(t,n){l[e].m(t,n),$(t,r,n),$(t,o,n),s=!0},p(t,[o]){let s=e;e=a(t),e===s?l[e].p(t,o):(et(),ot(l[s],1,1,(()=>{l[s]=null})),nt(),n=l[e],n?n.p(t,o):(n=l[e]=i[e](t),n.c()),rt(n,1),n.m(r.parentNode,r))},i(t){s||(rt(n),s=!0)},o(t){ot(n),s=!1},d(t){l[e].d(t),t&&g(r),t&&g(o)}}}function Je(t,e,n){let r;return[r,function(t){r=t,n(0,r)}]}return new class extends pt{constructor(t){super(),mt(this,t,Je,Xe,i,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
