var app=function(){"use strict";function t(){}const e=t=>t;function n(t){return t()}function r(){return Object.create(null)}function o(t){t.forEach(n)}function i(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let l;function c(t,e,n,r){return t[1]&&r?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](r(e))):n.ctx}const a="undefined"!=typeof window;let u=a?()=>window.performance.now():()=>Date.now(),d=a?t=>requestAnimationFrame(t):t;const f=new Set;function m(t){f.forEach((e=>{e.c(t)||(f.delete(e),e.f())})),0!==f.size&&d(m)}function h(t,e){t.appendChild(e)}function p(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function $(t){const e=w("style");return function(t,e){h(t.head||t,e)}(p(t),e),e.sheet}function g(t,e,n){t.insertBefore(e,n||null)}function b(t){t.parentNode.removeChild(t)}function w(t){return document.createElement(t)}function v(t){return document.createTextNode(t)}function k(){return v(" ")}function x(){return v("")}function y(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function S(t){return function(e){return e.preventDefault(),t.call(this,e)}}function C(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function M(t){return""===t?null:+t}function E(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function L(t,e){t.value=null==e?"":e}function P(t,e,n){t.classList[n?"add":"remove"](e)}function _(t,e,n=!1){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,n,!1,e),r}const A=new Map;let j,D=0;function F(t,e,n,r,o,i,s,l=0){const c=16.666/r;let a="{\n";for(let t=0;t<=1;t+=c){const r=e+(n-e)*i(t);a+=100*t+`%{${s(r,1-r)}}\n`}const u=a+`100% {${s(n,1-n)}}\n}`,d=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(u)}_${l}`,f=p(t),{stylesheet:m,rules:h}=A.get(f)||function(t,e){const n={stylesheet:$(e),rules:{}};return A.set(t,n),n}(f,t);h[d]||(h[d]=!0,m.insertRule(`@keyframes ${d} ${u}`,m.cssRules.length));const g=t.style.animation||"";return t.style.animation=`${g?`${g}, `:""}${d} ${r}ms linear ${o}ms 1 both`,D+=1,d}function H(t,e){const n=(t.style.animation||"").split(", "),r=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),o=n.length-r.length;o&&(t.style.animation=r.join(", "),D-=o,D||d((()=>{D||(A.forEach((t=>{const{stylesheet:e}=t;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.rules={}})),A.clear())})))}function T(t){j=t}function z(){if(!j)throw new Error("Function called outside component initialization");return j}function N(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const W=[],q=[],R=[],G=[],B=Promise.resolve();let O=!1;function U(t){R.push(t)}function I(t){G.push(t)}const X=new Set;let K,J=0;function V(){const t=j;do{for(;J<W.length;){const t=W[J];J++,T(t),Z(t.$$)}for(T(null),W.length=0,J=0;q.length;)q.pop()();for(let t=0;t<R.length;t+=1){const e=R[t];X.has(e)||(X.add(e),e())}R.length=0}while(W.length);for(;G.length;)G.pop()();O=!1,X.clear(),T(t)}function Z(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(U)}}function Q(t,e,n){t.dispatchEvent(_(`${e?"intro":"outro"}${n}`))}const Y=new Set;let tt;function et(){tt={r:0,c:[],p:tt}}function nt(){tt.r||o(tt.c),tt=tt.p}function rt(t,e){t&&t.i&&(Y.delete(t),t.i(e))}function ot(t,e,n,r){if(t&&t.o){if(Y.has(t))return;Y.add(t),tt.c.push((()=>{Y.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}const it={duration:0};function st(n,r,s,l){let c=r(n,s),a=l?0:1,h=null,p=null,$=null;function g(){$&&H(n,$)}function b(t,e){const n=t.b-a;return e*=Math.abs(n),{a:a,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function w(r){const{delay:i=0,duration:s=300,easing:l=e,tick:w=t,css:v}=c||it,k={start:u()+i,b:r};r||(k.group=tt,tt.r+=1),h||p?p=k:(v&&(g(),$=F(n,a,r,s,i,l,v)),r&&w(0,1),h=b(k,s),U((()=>Q(n,r,"start"))),function(t){let e;0===f.size&&d(m),new Promise((n=>{f.add(e={c:t,f:n})}))}((t=>{if(p&&t>p.start&&(h=b(p,s),p=null,Q(n,h.b,"start"),v&&(g(),$=F(n,a,h.b,h.duration,0,l,c.css))),h)if(t>=h.end)w(a=h.b,1-a),Q(n,h.b,"end"),p||(h.b?g():--h.group.r||o(h.group.c)),h=null;else if(t>=h.start){const e=t-h.start;a=h.a+h.d*l(e/h.duration),w(a,1-a)}return!(!h&&!p)})))}return{run(t){i(c)?(K||(K=Promise.resolve(),K.then((()=>{K=null}))),K).then((()=>{c=c(),w(t)})):w(t)},end(){g(),h=p=null}}}function lt(t,e){const n=e.token={};function r(t,r,o,i){if(e.token!==n)return;e.resolved=i;let s=e.ctx;void 0!==o&&(s=s.slice(),s[o]=i);const l=t&&(e.current=t)(s);let c=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==r&&t&&(et(),ot(t,1,1,(()=>{e.blocks[n]===t&&(e.blocks[n]=null)})),nt())})):e.block.d(1),l.c(),rt(l,1),l.m(e.mount(),e.anchor),c=!0),e.block=l,e.blocks&&(e.blocks[r]=l),c&&V()}if((o=t)&&"object"==typeof o&&"function"==typeof o.then){const n=z();if(t.then((t=>{T(n),r(e.then,1,e.value,t),T(null)}),(t=>{if(T(n),r(e.catch,2,e.error,t),T(null),!e.hasCatch)throw t})),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}var o}function ct(t,e,n){const r=t.$$.props[e];void 0!==r&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function at(t){t&&t.c()}function ut(t,e,r,s){const{fragment:l,on_mount:c,on_destroy:a,after_update:u}=t.$$;l&&l.m(e,r),s||U((()=>{const e=c.map(n).filter(i);a?a.push(...e):o(e),t.$$.on_mount=[]})),u.forEach(U)}function dt(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function ft(t,e){-1===t.$$.dirty[0]&&(W.push(t),O||(O=!0,B.then(V)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function mt(e,n,i,s,l,c,a,u=[-1]){const d=j;T(e);const f=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:l,bound:r(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(d?d.$$.context:[])),callbacks:r(),dirty:u,skip_bound:!1,root:n.target||d.$$.root};a&&a(f.root);let m=!1;if(f.ctx=i?i(e,n.props||{},((t,n,...r)=>{const o=r.length?r[0]:n;return f.ctx&&l(f.ctx[t],f.ctx[t]=o)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](o),m&&ft(e,t)),n})):[],f.update(),m=!0,o(f.before_update),f.fragment=!!s&&s(f.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);f.fragment&&f.fragment.l(t),t.forEach(b)}else f.fragment&&f.fragment.c();n.intro&&rt(e.$$.fragment),ut(e,n.target,n.anchor,n.customElement),V()}T(d)}class ht{$destroy(){dt(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function pt(t){const e=t-1;return e*e*e+1}function $t(t,{delay:n=0,duration:r=400,easing:o=e}={}){const i=+getComputedStyle(t).opacity;return{delay:n,duration:r,easing:o,css:t=>"opacity: "+t*i}}function gt(t,{delay:e=0,duration:n=400,easing:r=pt}={}){const o=getComputedStyle(t),i=+o.opacity,s=parseFloat(o.height),l=parseFloat(o.paddingTop),c=parseFloat(o.paddingBottom),a=parseFloat(o.marginTop),u=parseFloat(o.marginBottom),d=parseFloat(o.borderTopWidth),f=parseFloat(o.borderBottomWidth);return{delay:e,duration:n,easing:r,css:t=>`overflow: hidden;opacity: ${Math.min(20*t,1)*i};height: ${t*s}px;padding-top: ${t*l}px;padding-bottom: ${t*c}px;margin-top: ${t*a}px;margin-bottom: ${t*u}px;border-top-width: ${t*d}px;border-bottom-width: ${t*f}px;`}}function bt(e){let n,r;return{c(){n=w("span"),r=v(e[0]),C(n,"class","material-icons svelte-rsldo3")},m(t,e){g(t,n,e),h(n,r)},p(t,[e]){1&e&&E(r,t[0])},i:t,o:t,d(t){t&&b(n)}}}function wt(t,e,n){let{name:r}=e;return t.$$set=t=>{"name"in t&&n(0,r=t.name)},[r]}class vt extends ht{constructor(t){super(),mt(this,t,wt,bt,s,{name:0})}}function kt(t){const{h:e,m:n}=yt(t);return`${e}:${St(n)}`}function xt(t){const{h:e,m:n}=yt(t);return`${St(e%24)}:${St(n)}`}function yt(t){const e=Math.floor(t);return{h:e,m:Math.floor(60*(t-e))}}function St(t){return t<10?`0${t}`:t.toString()}function Ct(t,e){return t.x===e.x&&t.y===e.y}function Mt(t,e){return n=function(t,e){return{x:t.x-e.x,y:t.y-e.y}}(e,t),Math.hypot(n.x,n.y);var n}function Et(t,e,n){const r={type:"LineString",coordinates:t.map((t=>[Math.round(t.x),Math.round(t.y)]))};return fetch("https://api3.geo.admin.ch/rest/services/profile.json",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:`sr=21781&distinct_points=${e}&nb_points=${n}&geom=${JSON.stringify(r)}`}).then((t=>{if(t.ok)return t.json();throw"Das Höhenprofil konnte nicht geladen werden."})).then((n=>new Promise((r=>{let o=n.map((t=>({point:{x:t.easting,y:t.northing},height:t.alts.COMB})));e&&(o=o.filter((e=>t.some((t=>Mt(e.point,t)<2))))),r(o)})))).catch((()=>{throw"Die Verbindung zu den swisstopo-Servern ist fehlgeschlagen."}))}function Lt(t){t.distanceSum=Pt(t.line),t.lineProfileDistanceSum=Pt(t.lineProfile.map((t=>t.point))),t.effort=function(t){const e=[];e[0]=0;for(let n=1;n<t.markers.length;n++){const r=t.distanceSum[t.markers[n].index]-t.distanceSum[t.markers[n-1].index],o=t.markerProfile[n].height-t.markerProfile[n-1].height,i=o/r;e[n]=r/1e3,i>0?e[n]+=o/100:i<-.2&&(e[n]+=Math.abs(o)/150)}return e}(t),t.effortSum=_t(t.effort),t.breakSum=[0,..._t(t.markers.map((t=>t.break)))]}function Pt(t){return _t(t.map(((e,n)=>Mt(t[Math.max(0,n-1)],t[n]))))}function _t(t){const e=[];let n=0;for(let r=0;r<t.length;r++)n+=t[r],e[r]=n;return e}function At(t){const e=[];for(let n=0;n<t.markers.length;n++)e[n]={index:n,name:t.markers[n].name,comment:t.markers[n].comment,height:t.markerProfile[n].height,distance:t.distanceSum[t.markers[n].index]/1e3,effort:t.effortSum[n],duration:t.effortSum[n]/t.speed,time:t.effortSum[n]/t.speed+t.breakSum[n]/60+t.start,break:t.markers[n].break};for(let n=1;n<t.markers.length;n++)e[n-1].diff={height:e[n].height-e[n-1].height,distance:e[n].distance-e[n-1].distance,effort:t.effort[n],duration:e[n].duration-e[n-1].duration};return e}function jt(e){let n,r,o,i;return{c(){n=w("a"),r=w("button"),o=v(e[1]),C(r,"class","pill"),C(n,"class","noprint"),C(n,"href",i=null==e[0]?"help":`help#${e[0]}`),C(n,"target","_blank"),C(n,"tabindex","-1")},m(t,e){g(t,n,e),h(n,r),h(r,o)},p(t,[e]){2&e&&E(o,t[1]),1&e&&i!==(i=null==t[0]?"help":`help#${t[0]}`)&&C(n,"href",i)},i:t,o:t,d(t){t&&b(n)}}}function Dt(t,e,n){let{topic:r=null}=e,{label:o="?"}=e;return t.$$set=t=>{"topic"in t&&n(0,r=t.topic),"label"in t&&n(1,o=t.label)},[r,o]}class Ft extends ht{constructor(t){super(),mt(this,t,Dt,jt,s,{topic:0,label:1})}}function Ht(t){let e,n,r,o,i,s,l,a,u,d,f,m,p,$,x,M;const L=t[4].default,P=function(t,e,n,r){if(t){const o=c(t,e,n,r);return t[0](o)}}(L,t,t[3],null);return f=new vt({props:{name:"done"}}),{c(){e=w("div"),n=w("div"),r=w("h2"),o=v(t[1]),i=k(),s=w("form"),P&&P.c(),l=k(),a=w("br"),u=k(),d=w("button"),at(f.$$.fragment),m=v(" Fertig"),C(r,"class","svelte-eolvfk"),C(d,"class","svelte-eolvfk"),C(n,"class","dialog svelte-eolvfk"),C(e,"class","background svelte-eolvfk")},m(c,p){g(c,e,p),h(e,n),h(n,r),h(r,o),h(n,i),h(n,s),P&&P.m(s,null),h(s,l),h(s,a),h(s,u),h(s,d),ut(f,d,null),h(d,m),$=!0,x||(M=y(s,"submit",S(t[2])),x=!0)},p(t,e){(!$||2&e)&&E(o,t[1]),P&&P.p&&(!$||8&e)&&function(t,e,n,r,o,i){if(o){const s=c(e,n,r,i);t.p(s,o)}}(P,L,t,t[3],$?function(t,e,n,r){if(t[2]&&r){const o=t[2](r(n));if(void 0===e.dirty)return o;if("object"==typeof o){const t=[],n=Math.max(e.dirty.length,o.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|o[r];return t}return e.dirty|o}return e.dirty}(L,t[3],e,null):function(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}(t[3]),null)},i(t){$||(rt(P,t),rt(f.$$.fragment,t),U((()=>{p||(p=st(e,$t,{duration:100},!0)),p.run(1)})),$=!0)},o(t){ot(P,t),ot(f.$$.fragment,t),p||(p=st(e,$t,{duration:100},!1)),p.run(0),$=!1},d(t){t&&b(e),P&&P.d(t),dt(f),t&&p&&p.end(),x=!1,M()}}}function Tt(t){let e,n,r=t[0]&&Ht(t);return{c(){r&&r.c(),e=x()},m(t,o){r&&r.m(t,o),g(t,e,o),n=!0},p(t,[n]){t[0]?r?(r.p(t,n),1&n&&rt(r,1)):(r=Ht(t),r.c(),rt(r,1),r.m(e.parentNode,e)):r&&(et(),ot(r,1,1,(()=>{r=null})),nt())},i(t){n||(rt(r),n=!0)},o(t){ot(r),n=!1},d(t){r&&r.d(t),t&&b(e)}}}function zt(t,e,n){let{$$slots:r={},$$scope:o}=e,{title:i}=e,{show:s=!1}=e;const l=function(){const t=z();return(e,n)=>{const r=t.$$.callbacks[e];if(r){const o=_(e,n);r.slice().forEach((e=>{e.call(t,o)}))}}}();return t.$$set=t=>{"title"in t&&n(1,i=t.title),"show"in t&&n(0,s=t.show),"$$scope"in t&&n(3,o=t.$$scope)},[s,i,function(){n(0,s=!1),l("close")},o,r]}class Nt extends ht{constructor(t){super(),mt(this,t,zt,Tt,s,{title:1,show:0})}}function Wt(t){let e,n,r,i,s,l,c,a,u,d,f,m,p,$,x,S;return l=new vt({props:{name:"add"}}),d=new vt({props:{name:"remove"}}),{c(){e=w("label"),e.textContent="Geschwindigkeit (Lkm/h)",n=k(),r=w("input"),i=k(),s=w("button"),at(l.$$.fragment),c=v(" Schneller"),a=k(),u=w("button"),at(d.$$.fragment),f=v(" Langsamer"),m=k(),p=w("br"),C(e,"for","speed"),C(r,"id","speed"),C(r,"type","number"),C(r,"min","0.1"),C(r,"step","0.1"),r.required=!0,C(s,"type","button"),C(s,"class","pill"),C(u,"type","button"),C(u,"class","pill")},m(o,b){g(o,e,b),g(o,n,b),g(o,r,b),L(r,t[1]),g(o,i,b),g(o,s,b),ut(l,s,null),h(s,c),g(o,a,b),g(o,u,b),ut(d,u,null),h(u,f),g(o,m,b),g(o,p,b),$=!0,x||(S=[y(r,"input",t[3]),y(s,"click",t[4]),y(u,"click",t[5])],x=!0)},p(t,e){2&e&&M(r.value)!==t[1]&&L(r,t[1])},i(t){$||(rt(l.$$.fragment,t),rt(d.$$.fragment,t),$=!0)},o(t){ot(l.$$.fragment,t),ot(d.$$.fragment,t),$=!1},d(t){t&&b(e),t&&b(n),t&&b(r),t&&b(i),t&&b(s),dt(l),t&&b(a),t&&b(u),dt(d),t&&b(m),t&&b(p),x=!1,o(S)}}}function qt(t){let e,n,r;function o(e){t[6](e)}let i={title:"Geschwindigkeit anpassen",$$slots:{default:[Wt]},$$scope:{ctx:t}};return void 0!==t[0]&&(i.show=t[0]),e=new Nt({props:i}),q.push((()=>ct(e,"show",o))),{c(){at(e.$$.fragment)},m(t,n){ut(e,t,n),r=!0},p(t,[r]){const o={};130&r&&(o.$$scope={dirty:r,ctx:t}),!n&&1&r&&(n=!0,o.show=t[0],I((()=>n=!1))),e.$set(o)},i(t){r||(rt(e.$$.fragment,t),r=!0)},o(t){ot(e.$$.fragment,t),r=!1},d(t){dt(e,t)}}}function Rt(t,e,n){let{show:r}=e,{speed:o}=e,i=o;return t.$$set=t=>{"show"in t&&n(0,r=t.show),"speed"in t&&n(2,o=t.speed)},t.$$.update=()=>{2&t.$$.dirty&&!window.isNaN(i)&&i>0&&n(2,o=i)},[r,i,o,function(){i=M(this.value),n(1,i)},()=>n(1,i+=.5),()=>n(1,i=Math.max(.5,i-.5)),function(t){r=t,n(0,r)}]}class Gt extends ht{constructor(t){super(),mt(this,t,Rt,qt,s,{show:0,speed:2})}}function Bt(t){let e,n,r,i,s,l,c,a,u,d;return{c(){e=w("label"),e.textContent="Abreise (hh:mm)",n=k(),r=w("div"),i=w("input"),s=k(),l=w("span"),l.textContent=":",c=k(),a=w("input"),C(e,"for","hours"),C(i,"id","hours"),C(i,"type","number"),C(i,"min","0"),C(i,"max","23"),i.required=!0,C(i,"class","svelte-hssb7r"),C(a,"type","number"),C(a,"min","0"),C(a,"max","59"),a.required=!0,C(a,"class","svelte-hssb7r"),C(r,"class","svelte-hssb7r")},m(o,f){g(o,e,f),g(o,n,f),g(o,r,f),h(r,i),L(i,t[1]),h(r,s),h(r,l),h(r,c),h(r,a),L(a,t[2]),u||(d=[y(i,"input",t[4]),y(i,"input",Ut),y(i,"focus",It),y(a,"input",t[5]),y(a,"input",Ut),y(a,"focus",It)],u=!0)},p(t,e){2&e&&M(i.value)!==t[1]&&L(i,t[1]),4&e&&M(a.value)!==t[2]&&L(a,t[2])},d(t){t&&b(e),t&&b(n),t&&b(r),u=!1,o(d)}}}function Ot(t){let e,n,r;function o(e){t[6](e)}let i={title:"Abreise anpassen",$$slots:{default:[Bt]},$$scope:{ctx:t}};return void 0!==t[0]&&(i.show=t[0]),e=new Nt({props:i}),q.push((()=>ct(e,"show",o))),{c(){at(e.$$.fragment)},m(t,n){ut(e,t,n),r=!0},p(t,[r]){const o={};134&r&&(o.$$scope={dirty:r,ctx:t}),!n&&1&r&&(n=!0,o.show=t[0],I((()=>n=!1))),e.$set(o)},i(t){r||(rt(e.$$.fragment,t),r=!0)},o(t){ot(e.$$.fragment,t),r=!1},d(t){dt(e,t)}}}function Ut(t){const e=t.target;window.isNaN(e.value)&&(e.value=0),e.value.length>2&&(e.value=e.value.slice(-2)),e.value=e.value.padStart(2,"0")}function It(t){t.target.select()}function Xt(t,e,n){let{show:r}=e,{start:o}=e,[i,s]=xt(o).split(":");return t.$$set=t=>{"show"in t&&n(0,r=t.show),"start"in t&&n(3,o=t.start)},t.$$.update=()=>{6&t.$$.dirty&&n(3,o=Number(i)+Number(s)/60)},[r,i,s,o,function(){i=M(this.value),n(1,i)},function(){s=M(this.value),n(2,s)},function(t){r=t,n(0,r)}]}class Kt extends ht{constructor(t){super(),mt(this,t,Xt,Ot,s,{show:0,start:3})}}function Jt(t){let e,n,r,i,s,l,c,a,u,d,f,m,p,$,x,S,M,L,P,_,A,j,D,F,H,T,z,N,W,R,G,B,O,U,X,K,J,V,Z,Q,Y,tt,et,nt,it,st,lt,ft,mt,ht,pt,$t,gt,bt,wt,yt,St,Ct,Mt,Et,Lt,Pt,_t,At,jt,Dt,Ht,Tt,zt,Nt,Wt,qt,Rt,Bt,Ot,Ut,It,Xt,Jt,Vt,Zt,Qt,Yt,te,ee,ne,re,oe,ie,se=t[0].markers[0].name+"",le=t[0].markers[t[0].markers.length-1].name+"",ce=t[3].distance.toFixed(1)+"",ae=Math.round(t[3].ascent)+"",ue=Math.round(t[3].descent)+"",de=t[3].effort.toFixed(1)+"",fe=t[0].speed+"",me=xt(t[0].start)+"",he=xt(t[0].start+t[3].duration)+"",pe=kt(t[3].duration)+"",$e=kt(t[3].breakDuration)+"";function ge(e){t[6](e)}function be(e){t[7](e)}let we={};function ve(e){t[8](e)}function ke(e){t[9](e)}void 0!==t[1]&&(we.show=t[1]),void 0!==t[0].speed&&(we.speed=t[0].speed),e=new Gt({props:we}),q.push((()=>ct(e,"show",ge))),q.push((()=>ct(e,"speed",be)));let xe={};return void 0!==t[2]&&(xe.show=t[2]),void 0!==t[0].start&&(xe.start=t[0].start),s=new Kt({props:xe}),q.push((()=>ct(s,"show",ve))),q.push((()=>ct(s,"start",ke))),A=new vt({props:{name:"swap_vert"}}),nt=new Ft({props:{topic:"calculation"}}),$t=new vt({props:{name:"edit"}}),Et=new vt({props:{name:"edit"}}),Zt=new vt({props:{name:"print"}}),ee=new vt({props:{name:"output"}}),{c(){at(e.$$.fragment),i=k(),at(s.$$.fragment),a=k(),u=w("div"),d=w("div"),f=w("p"),m=v("Start: "),p=w("b"),$=v(se),x=w("br"),S=v("\n            Ziel: "),M=w("b"),L=v(le),P=k(),_=w("button"),at(A.$$.fragment),j=v(" Richtung wechseln"),D=k(),F=w("div"),H=v("Horizontaldistanz: "),T=w("b"),z=v(ce),N=v(" km"),W=w("br"),R=v("\n        Auf-/Abstieg: ↑ "),G=w("b"),B=v(ae),O=v(" m"),U=v(" ↓ "),X=w("b"),K=v(ue),J=v(" m"),V=w("br"),Z=v("\n        Aufwand: "),Q=w("b"),Y=v(de),tt=v(" Lkm"),et=k(),at(nt.$$.fragment),it=w("br"),st=v("\n        Geschwindigkeit: "),lt=w("b"),ft=v(fe),mt=v(" Lkm/h"),ht=k(),pt=w("button"),at($t.$$.fragment),gt=k(),bt=w("div"),wt=v("Abreise: "),yt=w("b"),St=v(me),Ct=k(),Mt=w("button"),at(Et.$$.fragment),Lt=k(),Pt=w("br"),_t=v("\n        Ankunft: "),At=w("b"),jt=v(he),Dt=w("br"),Ht=v("\n        Gehzeit: "),Tt=w("b"),zt=v(pe),Nt=v(" h"),Wt=w("br"),qt=v("\n        Pausen: "),Rt=w("b"),Bt=v($e),Ot=v(" h"),Ut=k(),It=w("div"),Xt=w("br"),Jt=k(),Vt=w("button"),at(Zt.$$.fragment),Qt=v(" Drucken"),Yt=v("\n     \n    "),te=w("button"),at(ee.$$.fragment),ne=v(" Exportieren (CSV)"),C(f,"class","svelte-1crre34"),C(_,"class","pill noprint"),C(d,"class","svelte-1crre34"),C(pt,"class","pill noprint"),C(F,"class","svelte-1crre34"),C(Mt,"class","pill noprint"),C(bt,"class","svelte-1crre34"),C(u,"class","container svelte-1crre34"),C(te,"class","secondary"),C(It,"class","noprint")},m(n,r){ut(e,n,r),g(n,i,r),ut(s,n,r),g(n,a,r),g(n,u,r),h(u,d),h(d,f),h(f,m),h(f,p),h(p,$),h(f,x),h(f,S),h(f,M),h(M,L),h(d,P),h(d,_),ut(A,_,null),h(_,j),h(u,D),h(u,F),h(F,H),h(F,T),h(T,z),h(T,N),h(F,W),h(F,R),h(F,G),h(G,B),h(G,O),h(F,U),h(F,X),h(X,K),h(X,J),h(F,V),h(F,Z),h(F,Q),h(Q,Y),h(Q,tt),h(F,et),ut(nt,F,null),h(F,it),h(F,st),h(F,lt),h(lt,ft),h(lt,mt),h(F,ht),h(F,pt),ut($t,pt,null),h(u,gt),h(u,bt),h(bt,wt),h(bt,yt),h(yt,St),h(bt,Ct),h(bt,Mt),ut(Et,Mt,null),h(bt,Lt),h(bt,Pt),h(bt,_t),h(bt,At),h(At,jt),h(bt,Dt),h(bt,Ht),h(bt,Tt),h(Tt,zt),h(Tt,Nt),h(bt,Wt),h(bt,qt),h(bt,Rt),h(Rt,Bt),h(Rt,Ot),g(n,Ut,r),g(n,It,r),h(It,Xt),h(It,Jt),h(It,Vt),ut(Zt,Vt,null),h(Vt,Qt),h(It,Yt),h(It,te),ut(ee,te,null),h(te,ne),re=!0,oe||(ie=[y(_,"click",t[4]),y(pt,"click",t[10]),y(Mt,"click",t[11]),y(Vt,"click",t[12]),y(te,"click",t[5])],oe=!0)},p(t,[o]){const i={};!n&&2&o&&(n=!0,i.show=t[1],I((()=>n=!1))),!r&&1&o&&(r=!0,i.speed=t[0].speed,I((()=>r=!1))),e.$set(i);const a={};!l&&4&o&&(l=!0,a.show=t[2],I((()=>l=!1))),!c&&1&o&&(c=!0,a.start=t[0].start,I((()=>c=!1))),s.$set(a),(!re||1&o)&&se!==(se=t[0].markers[0].name+"")&&E($,se),(!re||1&o)&&le!==(le=t[0].markers[t[0].markers.length-1].name+"")&&E(L,le),(!re||8&o)&&ce!==(ce=t[3].distance.toFixed(1)+"")&&E(z,ce),(!re||8&o)&&ae!==(ae=Math.round(t[3].ascent)+"")&&E(B,ae),(!re||8&o)&&ue!==(ue=Math.round(t[3].descent)+"")&&E(K,ue),(!re||8&o)&&de!==(de=t[3].effort.toFixed(1)+"")&&E(Y,de),(!re||1&o)&&fe!==(fe=t[0].speed+"")&&E(ft,fe),(!re||1&o)&&me!==(me=xt(t[0].start)+"")&&E(St,me),(!re||9&o)&&he!==(he=xt(t[0].start+t[3].duration)+"")&&E(jt,he),(!re||8&o)&&pe!==(pe=kt(t[3].duration)+"")&&E(zt,pe),(!re||8&o)&&$e!==($e=kt(t[3].breakDuration)+"")&&E(Bt,$e)},i(t){re||(rt(e.$$.fragment,t),rt(s.$$.fragment,t),rt(A.$$.fragment,t),rt(nt.$$.fragment,t),rt($t.$$.fragment,t),rt(Et.$$.fragment,t),rt(Zt.$$.fragment,t),rt(ee.$$.fragment,t),re=!0)},o(t){ot(e.$$.fragment,t),ot(s.$$.fragment,t),ot(A.$$.fragment,t),ot(nt.$$.fragment,t),ot($t.$$.fragment,t),ot(Et.$$.fragment,t),ot(Zt.$$.fragment,t),ot(ee.$$.fragment,t),re=!1},d(t){dt(e,t),t&&b(i),dt(s,t),t&&b(a),t&&b(u),dt(A),dt(nt),dt($t),dt(Et),t&&b(Ut),t&&b(It),dt(Zt),dt(ee),oe=!1,o(ie)}}}function Vt(t,e,n){let r,{route:o}=e,i=!1,s=!1;return t.$$set=t=>{"route"in t&&n(0,o=t.route)},t.$$.update=()=>{1&t.$$.dirty&&n(3,r=function(t){const e=t.distanceSum[t.line.length-1]/1e3,n=t.effortSum[t.markers.length-1],r=n/t.speed,o=t.breakSum[t.markers.length-1]/60,i=r+o,{ascent:s,descent:l}=function(t){let e=0,n=0;for(let r=1;r<t.markers.length;r++){const o=t.markerProfile[r].height-t.markerProfile[r-1].height;o>0?e+=o:n-=o}return{ascent:e,descent:n}}(t);return{distance:e,effort:n,walkingDuration:r,breakDuration:o,duration:i,ascent:s,descent:l}}(o))},[o,i,s,r,function(){!function(t){t.line.reverse(),t.markers.reverse(),t.lineProfile?.reverse(),t.markerProfile?.reverse(),t.markers.forEach((e=>e.index=t.line.length-e.index-1)),Lt(t)}(o),n(0,o)},function(){const t=[["Nr.","Name","Kommentar","Höhe / m","Unterschied Höhe / m","Total Distanz / km","Unterschied Distanz / km","Total Aufwand / Lkm","Unterschied Aufwand / Lkm","Total Gehzeit / h","Unterschied Gehzeit / h","Uhrzeit / hh:mm","Pausen / min"],...At(o).map((t=>[t.index+1,t.name,t.comment??"",t.height,t.diff?.height??0,t.distance,t.diff?.distance??0,t.effort,t.diff?.effort??0,t.duration,t.diff?.duration??0,xt(t.time),t.break]))].map((t=>t.map((t=>`"${t}"`)).join(","))).join("\n"),e=document.createElement("a");e.href=URL.createObjectURL(new Blob([t],{type:"text/csv"})),e.download="marschzeittabelle.csv",e.click()},function(t){i=t,n(1,i)},function(e){t.$$.not_equal(o.speed,e)&&(o.speed=e,n(0,o))},function(t){s=t,n(2,s)},function(e){t.$$.not_equal(o.start,e)&&(o.start=e,n(0,o))},()=>n(1,i=!0),()=>n(2,s=!0),()=>window.print()]}class Zt extends ht{constructor(t){super(),mt(this,t,Vt,Jt,s,{route:0})}}function Qt(){for(let t of Object.keys(Yt)){const e="--"+t.replace(/[A-Z]/g,(t=>"-"+t.toLowerCase()));Yt[t]=window.getComputedStyle(document.body).getPropertyValue(e)}return Yt}const Yt={backgroundColor:null,textColor:null,darkerAccentColor:null,accentColor:null,lighterAccentColor:null,shadowColor:null};function te(e){let n;return{c(){n=w("canvas"),C(n,"class","svelte-xd84ci")},m(t,r){g(t,n,r),e[2](n)},p:t,i:t,o:t,d(t){t&&b(n),e[2](null)}}}function ee(t,e,n){let r,{route:o}=e;return t.$$set=t=>{"route"in t&&n(1,o=t.route)},t.$$.update=()=>{3&t.$$.dirty&&r&&(n(0,r.width=800,r),n(0,r.height=200,r),function(t,e){const n=Qt(),r=e.getContext("2d");r.clearRect(0,0,e.width,e.height);const o=12;let i=1/0,s=-1/0;for(let e of t.lineProfile)i=Math.min(i,e.height),s=Math.max(s,e.height);const l={x:t.distanceSum[t.distanceSum.length-1],y:s-i},c=Math.min((e.width-24)/l.x,(e.height-24-40)/l.y);e.width=Math.floor(l.x*c+24),e.height=Math.floor(l.y*c+24+40);const a=(t,n)=>{return r={x:(l={x:t,y:i-n}).x*(a=c),y:l.y*a},s={x:o,y:e.height-o-40},{x:r.x+s.x,y:r.y+s.y};var r,s,l,a},u=()=>{for(let e=0;e<t.lineProfile.length;e++){const n=a(t.lineProfileDistanceSum[e],t.lineProfile[e].height);0===e?r.moveTo(n.x,n.y):r.lineTo(n.x,n.y)}};r.beginPath(),u();const d=a(0,s),f=a(0,i),m=a(l.x,i);r.lineTo(m.x,e.height),r.lineTo(f.x,e.height);const h=r.createLinearGradient(0,d.y,0,e.height);h.addColorStop(0,n.lighterAccentColor),h.addColorStop(1,n.backgroundColor),r.fillStyle=h,r.fill(),r.beginPath(),u(),r.lineWidth=4,r.lineCap=r.lineJoin="round",r.strokeStyle=n.accentColor,r.stroke(),r.font="bold 14px sans-serif",r.textAlign="center",r.textBaseline="middle";for(let e=0;e<t.markerProfile.length;e++){const o=a(t.distanceSum[t.markers[e].index],t.markerProfile[e].height);r.beginPath(),r.arc(o.x,o.y,10,0,2*Math.PI),r.fillStyle=n.darkerAccentColor,r.fill(),r.fillStyle=n.backgroundColor,r.fillText(e+1,o.x,o.y+.5)}const p=125*2**Math.floor(Math.log2(120/(125*c))),$=p*c;r.fillStyle=n.textColor,r.fillRect(e.width-o-$,e.height-4,$,2),r.fillRect(e.width-o-$,e.height-6,2,6),r.fillRect(e.width-o-2,e.height-6,2,6),r.textAlign="right",r.textBaseline="bottom",r.fillText(`${p} m`,e.width-o,e.height-6)}(o,r))},[r,o,function(t){q[t?"unshift":"push"]((()=>{r=t,n(0,r),n(1,o)}))}]}class ne extends ht{constructor(t){super(),mt(this,t,ee,te,s,{route:1})}}function re(t){let e,n,r,i,s,l,c,a,u,d,f,m,h;return{c(){e=w("label"),e.textContent="Pause (min)",n=k(),r=w("input"),i=k(),s=w("button"),s.textContent="5 min",l=k(),c=w("button"),c.textContent="15 min",a=k(),u=w("button"),u.textContent="30 min",d=k(),f=w("br"),C(e,"for","break"),C(r,"id","break"),C(r,"type","number"),C(r,"step","5"),C(r,"min","0"),r.required=!0,C(s,"type","button"),C(s,"class","pill"),C(c,"type","button"),C(c,"class","pill"),C(u,"type","button"),C(u,"class","pill")},m(o,p){g(o,e,p),g(o,n,p),g(o,r,p),L(r,t[2].break),g(o,i,p),g(o,s,p),g(o,l,p),g(o,c,p),g(o,a,p),g(o,u,p),g(o,d,p),g(o,f,p),m||(h=[y(r,"input",t[6]),y(s,"click",t[7]),y(c,"click",t[8]),y(u,"click",t[9])],m=!0)},p(t,e){4&e&&M(r.value)!==t[2].break&&L(r,t[2].break)},d(t){t&&b(e),t&&b(n),t&&b(r),t&&b(i),t&&b(s),t&&b(l),t&&b(c),t&&b(a),t&&b(u),t&&b(d),t&&b(f),m=!1,o(h)}}}function oe(t){let e,n,r,i,s,l,c,a,u,d,f,m=t[1]<t[0].markers.length-1&&re(t);return{c(){e=w("label"),e.textContent="Name",n=k(),r=w("input"),i=k(),s=w("label"),s.textContent="Kommentar",l=k(),c=w("textarea"),a=k(),m&&m.c(),u=x(),C(e,"for","name"),C(r,"id","name"),C(r,"type","text"),r.required=!0,C(s,"for","comment"),C(c,"id","comment"),C(c,"class","svelte-1er4ovm")},m(o,h){g(o,e,h),g(o,n,h),g(o,r,h),L(r,t[2].name),g(o,i,h),g(o,s,h),g(o,l,h),g(o,c,h),L(c,t[2].comment),g(o,a,h),m&&m.m(o,h),g(o,u,h),d||(f=[y(r,"input",t[4]),y(c,"input",t[5])],d=!0)},p(t,e){4&e&&r.value!==t[2].name&&L(r,t[2].name),4&e&&L(c,t[2].comment),t[1]<t[0].markers.length-1?m?m.p(t,e):(m=re(t),m.c(),m.m(u.parentNode,u)):m&&(m.d(1),m=null)},d(t){t&&b(e),t&&b(n),t&&b(r),t&&b(i),t&&b(s),t&&b(l),t&&b(c),t&&b(a),m&&m.d(t),t&&b(u),d=!1,o(f)}}}function ie(t){let e,n;return e=new Nt({props:{title:"Wegpunkt bearbeiten",show:null!=t[1],$$slots:{default:[oe]},$$scope:{ctx:t}}}),e.$on("close",t[3]),{c(){at(e.$$.fragment)},m(t,r){ut(e,t,r),n=!0},p(t,[n]){const r={};2&n&&(r.show=null!=t[1]),1031&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(rt(e.$$.fragment,t),n=!0)},o(t){ot(e.$$.fragment,t),n=!1},d(t){dt(e,t)}}}function se(t,e,n){let r,{route:o}=e,{selected:i=null}=e;return t.$$set=t=>{"route"in t&&n(0,o=t.route),"selected"in t&&n(1,i=t.selected)},t.$$.update=()=>{3&t.$$.dirty&&n(2,r=o.markers[i])},[o,i,r,function(){Lt(o),n(0,o),n(1,i=null)},function(){r.name=this.value,n(2,r),n(0,o),n(1,i)},function(){r.comment=this.value,n(2,r),n(0,o),n(1,i)},function(){r.break=M(this.value),n(2,r),n(0,o),n(1,i)},()=>n(2,r.break=5,r),()=>n(2,r.break=15,r),()=>n(2,r.break=30,r)]}class le extends ht{constructor(t){super(),mt(this,t,se,ie,s,{route:0,selected:1})}}function ce(t,e,n){const r=t.slice();return r[6]=e[n],r}function ae(t){let e,n,r,o,i,s,l,c,a=(t[6].comment??"")+"",u=t[6].diff&&ue(t),d=t[6].break>0&&de(t);return{c(){e=w("tr"),n=w("td"),r=v(a),o=k(),u&&u.c(),i=k(),d&&d.c(),s=k(),l=w("td"),c=k(),C(n,"class","comment svelte-d5ew91"),C(l,"class","svelte-d5ew91"),C(e,"class","alt svelte-d5ew91")},m(t,a){g(t,e,a),h(e,n),h(n,r),h(e,o),u&&u.m(e,null),h(e,i),d&&d.m(e,null),h(e,s),h(e,l),h(e,c)},p(t,n){2&n&&a!==(a=(t[6].comment??"")+"")&&E(r,a),t[6].diff?u?u.p(t,n):(u=ue(t),u.c(),u.m(e,i)):u&&(u.d(1),u=null),t[6].break>0?d?d.p(t,n):(d=de(t),d.c(),d.m(e,s)):d&&(d.d(1),d=null)},d(t){t&&b(e),u&&u.d(),d&&d.d()}}}function ue(t){let e,n,r,o,i,s,l,c,a,u,d,f,m,p,$,x=Math.round(t[6].diff.height)+"",y=t[6].diff.distance.toFixed(1)+"",S=t[6].diff.effort.toFixed(1)+"",M=kt(t[6].diff.duration)+"";return{c(){e=w("td"),n=v(x),r=v(" m"),o=k(),i=w("td"),s=v(y),l=v(" km"),c=k(),a=w("td"),u=v(S),d=v(" Lkm"),f=k(),m=w("td"),p=v(M),$=v(" h"),C(e,"class","number svelte-d5ew91"),C(i,"class","number svelte-d5ew91"),C(a,"class","number svelte-d5ew91"),C(m,"class","number svelte-d5ew91")},m(t,b){g(t,e,b),h(e,n),h(e,r),g(t,o,b),g(t,i,b),h(i,s),h(i,l),g(t,c,b),g(t,a,b),h(a,u),h(a,d),g(t,f,b),g(t,m,b),h(m,p),h(m,$)},p(t,e){2&e&&x!==(x=Math.round(t[6].diff.height)+"")&&E(n,x),2&e&&y!==(y=t[6].diff.distance.toFixed(1)+"")&&E(s,y),2&e&&S!==(S=t[6].diff.effort.toFixed(1)+"")&&E(u,S),2&e&&M!==(M=kt(t[6].diff.duration)+"")&&E(p,M)},d(t){t&&b(e),t&&b(o),t&&b(i),t&&b(c),t&&b(a),t&&b(f),t&&b(m)}}}function de(t){let e,n,r,o=kt(t[6].break/60)+"";return{c(){e=w("td"),n=v("+"),r=v(o),C(e,"class","number svelte-d5ew91")},m(t,o){g(t,e,o),h(e,n),h(e,r)},p(t,e){2&e&&o!==(o=kt(t[6].break/60)+"")&&E(r,o)},d(t){t&&b(e)}}}function fe(t){let e,n,r,o,i,s,l,c,a,u,d,f,m,p,$,S,M,L,P,_,A,j,D,F,H,T,z,N,W,q,R,G,B,O,U=t[6].index+1+"",I=t[6].name+"",X=Math.round(t[6].height)+"",K=t[6].distance.toFixed(1)+"",J=t[6].effort.toFixed(1)+"",V=kt(t[6].duration)+"",Z=xt(t[6].time)+"";function Q(){return t[5](t[6])}W=new vt({props:{name:"edit"}});let Y=(t[6].comment||t[6].diff)&&ae(t);return{c(){e=w("tr"),n=w("td"),r=w("span"),o=v(U),i=k(),s=v(I),l=k(),c=w("td"),a=v(X),u=v(" m"),d=k(),f=w("td"),m=v(K),p=v(" km"),$=k(),S=w("td"),M=v(J),L=v(" Lkm"),P=k(),_=w("td"),A=v(V),j=v(" h"),D=k(),F=w("td"),H=v(Z),T=k(),z=w("td"),N=w("button"),at(W.$$.fragment),q=k(),Y&&Y.c(),R=x(),C(r,"class","pill svelte-d5ew91"),C(n,"class","name svelte-d5ew91"),C(c,"class","number svelte-d5ew91"),C(f,"class","number svelte-d5ew91"),C(S,"class","number svelte-d5ew91"),C(_,"class","number svelte-d5ew91"),C(F,"class","number svelte-d5ew91"),C(N,"class","pill"),C(z,"class","noprint svelte-d5ew91")},m(t,b){g(t,e,b),h(e,n),h(n,r),h(r,o),h(n,i),h(n,s),h(e,l),h(e,c),h(c,a),h(c,u),h(e,d),h(e,f),h(f,m),h(f,p),h(e,$),h(e,S),h(S,M),h(S,L),h(e,P),h(e,_),h(_,A),h(_,j),h(e,D),h(e,F),h(F,H),h(e,T),h(e,z),h(z,N),ut(W,N,null),g(t,q,b),Y&&Y.m(t,b),g(t,R,b),G=!0,B||(O=y(N,"click",Q),B=!0)},p(e,n){t=e,(!G||2&n)&&U!==(U=t[6].index+1+"")&&E(o,U),(!G||2&n)&&I!==(I=t[6].name+"")&&E(s,I),(!G||2&n)&&X!==(X=Math.round(t[6].height)+"")&&E(a,X),(!G||2&n)&&K!==(K=t[6].distance.toFixed(1)+"")&&E(m,K),(!G||2&n)&&J!==(J=t[6].effort.toFixed(1)+"")&&E(M,J),(!G||2&n)&&V!==(V=kt(t[6].duration)+"")&&E(A,V),(!G||2&n)&&Z!==(Z=xt(t[6].time)+"")&&E(H,Z),t[6].comment||t[6].diff?Y?Y.p(t,n):(Y=ae(t),Y.c(),Y.m(R.parentNode,R)):Y&&(Y.d(1),Y=null)},i(t){G||(rt(W.$$.fragment,t),G=!0)},o(t){ot(W.$$.fragment,t),G=!1},d(t){t&&b(e),dt(W),t&&b(q),Y&&Y.d(t),t&&b(R),B=!1,O()}}}function me(t){let e,n,r,o,i,s,l,c;function a(e){t[3](e)}function u(e){t[4](e)}let d={};void 0!==t[0]&&(d.route=t[0]),void 0!==t[2]&&(d.selected=t[2]),e=new le({props:d}),q.push((()=>ct(e,"route",a))),q.push((()=>ct(e,"selected",u)));let f=t[1],m=[];for(let e=0;e<f.length;e+=1)m[e]=fe(ce(t,f,e));const p=t=>ot(m[t],1,1,(()=>{m[t]=null}));return{c(){at(e.$$.fragment),o=k(),i=w("table"),s=w("tr"),s.innerHTML='<th class="svelte-d5ew91">Wegpunkt</th> \n        <th class="svelte-d5ew91">Höhe</th> \n        <th class="svelte-d5ew91">Distanz</th> \n        <th class="svelte-d5ew91">Aufwand</th> \n        <th class="svelte-d5ew91">Gehzeit</th> \n        <th class="svelte-d5ew91">Uhrzeit</th>',l=k();for(let t=0;t<m.length;t+=1)m[t].c();C(i,"class","svelte-d5ew91")},m(t,n){ut(e,t,n),g(t,o,n),g(t,i,n),h(i,s),h(i,l);for(let t=0;t<m.length;t+=1)m[t].m(i,null);c=!0},p(t,[o]){const s={};if(!n&&1&o&&(n=!0,s.route=t[0],I((()=>n=!1))),!r&&4&o&&(r=!0,s.selected=t[2],I((()=>r=!1))),e.$set(s),6&o){let e;for(f=t[1],e=0;e<f.length;e+=1){const n=ce(t,f,e);m[e]?(m[e].p(n,o),rt(m[e],1)):(m[e]=fe(n),m[e].c(),rt(m[e],1),m[e].m(i,null))}for(et(),e=f.length;e<m.length;e+=1)p(e);nt()}},i(t){if(!c){rt(e.$$.fragment,t);for(let t=0;t<f.length;t+=1)rt(m[t]);c=!0}},o(t){ot(e.$$.fragment,t),m=m.filter(Boolean);for(let t=0;t<m.length;t+=1)ot(m[t]);c=!1},d(t){dt(e,t),t&&b(o),t&&b(i),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(m,t)}}}function he(t,e,n){let r,{route:o}=e,i=[];return t.$$set=t=>{"route"in t&&n(0,o=t.route)},t.$$.update=()=>{1&t.$$.dirty&&n(1,i=At(o))},[o,i,r,function(t){o=t,n(0,o)},function(t){r=t,n(2,r)},t=>n(2,r=t.index)]}class pe extends ht{constructor(t){super(),mt(this,t,he,me,s,{route:0})}}function $e(t){let e,n,r;return e=new vt({props:{name:"visibility"}}),{c(){at(e.$$.fragment),n=v(" Anzeigen")},m(t,o){ut(e,t,o),g(t,n,o),r=!0},i(t){r||(rt(e.$$.fragment,t),r=!0)},o(t){ot(e.$$.fragment,t),r=!1},d(t){dt(e,t),t&&b(n)}}}function ge(t){let e,n,r;return e=new vt({props:{name:"visibility_off"}}),{c(){at(e.$$.fragment),n=v(" Ausblenden")},m(t,o){ut(e,t,o),g(t,n,o),r=!0},i(t){r||(rt(e.$$.fragment,t),r=!0)},o(t){ot(e.$$.fragment,t),r=!1},d(t){dt(e,t),t&&b(n)}}}function be(t){let e,n,r,o;return n=new ne({props:{route:t[0]}}),{c(){e=w("div"),at(n.$$.fragment)},m(t,r){g(t,e,r),ut(n,e,null),o=!0},p(t,e){const r={};1&e&&(r.route=t[0]),n.$set(r)},i(t){o||(rt(n.$$.fragment,t),U((()=>{r||(r=st(e,gt,{duration:100},!0)),r.run(1)})),o=!0)},o(t){ot(n.$$.fragment,t),r||(r=st(e,gt,{duration:100},!1)),r.run(0),o=!1},d(t){t&&b(e),dt(n),t&&r&&r.end()}}}function we(t){let e,n,r,i,s,l,c,a,u,d,f,m,p,$,v,x,S,M,E,L,_,A,j,D,F;function H(e){t[4](e)}s=new vt({props:{name:"edit"}});let T={};function z(e){t[5](e)}void 0!==t[0]&&(T.route=t[0]),c=new Zt({props:T}),q.push((()=>ct(c,"route",H)));let N={};void 0!==t[0]&&(N.route=t[0]),p=new pe({props:N}),q.push((()=>ct(p,"route",z)));const W=[ge,$e],R=[];function G(t,e){return t[1]?0:1}L=G(t),_=R[L]=W[L](t);let B=t[1]&&be(t);return{c(){e=w("div"),n=w("h1"),r=k(),i=w("button"),at(s.$$.fragment),l=k(),at(c.$$.fragment),u=k(),d=w("div"),f=w("h2"),f.textContent="Marschzeittabelle",m=k(),at(p.$$.fragment),v=k(),x=w("div"),S=w("h2"),S.textContent="Höhenprofil",M=k(),E=w("button"),_.c(),A=k(),B&&B.c(),C(n,"id","title"),C(n,"contenteditable","true"),C(n,"class","svelte-gb9ui"),void 0===t[0].title&&U((()=>t[2].call(n))),C(i,"class","pill noprint svelte-gb9ui"),C(e,"class","options"),C(f,"class","svelte-gb9ui"),C(d,"class","table svelte-gb9ui"),C(S,"class","svelte-gb9ui"),C(E,"class","pill noprint svelte-gb9ui"),C(x,"class","profile svelte-gb9ui"),P(x,"noprint",!t[1])},m(o,a){g(o,e,a),h(e,n),void 0!==t[0].title&&(n.textContent=t[0].title),h(e,r),h(e,i),ut(s,i,null),h(e,l),ut(c,e,null),g(o,u,a),g(o,d,a),h(d,f),h(d,m),ut(p,d,null),g(o,v,a),g(o,x,a),h(x,S),h(x,M),h(x,E),R[L].m(E,null),h(x,A),B&&B.m(x,null),j=!0,D||(F=[y(n,"input",t[2]),y(i,"click",t[3]),y(E,"click",t[6])],D=!0)},p(t,[e]){1&e&&t[0].title!==n.textContent&&(n.textContent=t[0].title);const r={};!a&&1&e&&(a=!0,r.route=t[0],I((()=>a=!1))),c.$set(r);const o={};!$&&1&e&&($=!0,o.route=t[0],I((()=>$=!1))),p.$set(o);let i=L;L=G(t),L!==i&&(et(),ot(R[i],1,1,(()=>{R[i]=null})),nt(),_=R[L],_||(_=R[L]=W[L](t),_.c()),rt(_,1),_.m(E,null)),t[1]?B?(B.p(t,e),2&e&&rt(B,1)):(B=be(t),B.c(),rt(B,1),B.m(x,null)):B&&(et(),ot(B,1,1,(()=>{B=null})),nt()),2&e&&P(x,"noprint",!t[1])},i(t){j||(rt(s.$$.fragment,t),rt(c.$$.fragment,t),rt(p.$$.fragment,t),rt(_),rt(B),j=!0)},o(t){ot(s.$$.fragment,t),ot(c.$$.fragment,t),ot(p.$$.fragment,t),ot(_),ot(B),j=!1},d(t){t&&b(e),dt(s),dt(c),t&&b(u),t&&b(d),dt(p),t&&b(v),t&&b(x),R[L].d(),B&&B.d(),D=!1,o(F)}}}function ve(t,e,n){let{route:r}=e,o=!0;return t.$$set=t=>{"route"in t&&n(0,r=t.route)},[r,o,function(){r.title=this.textContent,n(0,r)},()=>document.getElementById("title").focus(),function(t){r=t,n(0,r)},function(t){r=t,n(0,r)},()=>n(1,o=!o)]}class ke extends ht{constructor(t){super(),mt(this,t,ve,we,s,{route:0})}}function xe(e){let n,r,o,i,s,c,a,u,d,f,m,p,$,x,y,S,M,E,L,P,_;return $=new Ft({props:{topic:"export",label:"Wie geht das?"}}),{c(){var t,e;n=w("div"),n.innerHTML='<h1 class="svelte-1k4l8dw">Marschzeit­tabelle<br/>leicht gemacht.</h1> \n<p class="subtitle svelte-1k4l8dw">Wir übertragen deine Route automatisch in eine Marschzeittabelle, damit du dich auf die Wanderplanung fokussieren kannst.</p>',r=k(),o=w("div"),i=w("div"),s=w("h2"),s.textContent="1. Planen",c=k(),a=w("p"),a.textContent="Route einzeichnen und Wegpunkte benennen - das kennst du bereits.",u=k(),d=w("h2"),d.textContent="2. Exportieren",f=k(),m=w("p"),p=v("In wenigen Klicks erledigt. "),at($.$$.fragment),x=k(),y=w("h2"),y.textContent="3. Hochladen",S=k(),M=w("p"),M.textContent="Jetzt noch Geschwindigkeit, Startzeit, Kommentare und Pausen hinzufügen.",E=k(),L=w("img"),C(n,"class","title svelte-1k4l8dw"),C(s,"class","svelte-1k4l8dw"),C(a,"class","svelte-1k4l8dw"),C(d,"class","svelte-1k4l8dw"),C(m,"class","svelte-1k4l8dw"),C(y,"class","svelte-1k4l8dw"),C(M,"class","svelte-1k4l8dw"),C(i,"class","svelte-1k4l8dw"),t=L.src,e=P="example.jpg",l||(l=document.createElement("a")),l.href=e,t!==l.href&&C(L,"src","example.jpg"),C(L,"alt","Beispiel"),C(L,"class","svelte-1k4l8dw"),C(o,"class","tutorial svelte-1k4l8dw")},m(t,e){g(t,n,e),g(t,r,e),g(t,o,e),h(o,i),h(i,s),h(i,c),h(i,a),h(i,u),h(i,d),h(i,f),h(i,m),h(m,p),ut($,m,null),h(i,x),h(i,y),h(i,S),h(i,M),h(o,E),h(o,L),_=!0},p:t,i(t){_||(rt($.$$.fragment,t),_=!0)},o(t){ot($.$$.fragment,t),_=!1},d(t){t&&b(n),t&&b(r),t&&b(o),dt($)}}}class ye extends ht{constructor(t){super(),mt(this,t,null,xe,s,{})}}function Se(t){return function(t){return new Promise(((e,n)=>{const r=new FileReader;r.addEventListener("load",(()=>e(r.result))),r.addEventListener("error",(()=>n("Die Datei konnte nicht gelesen werden."))),r.readAsText(t)}))}(t).then((t=>async function(t){const e=(new DOMParser).parseFromString(t,"application/xml");if(e.querySelector("parsererror"))throw"Die Datei ist nicht in gültigem XML-Format.";return e}(t))).then((e=>t.name.endsWith(".kml")?async function(t){const e=[],n=[],r=t=>{const[e,n]=t.split(",");return Ce(n,e)},o=t.querySelectorAll("Placemark");for(let t of o){if(t.querySelector("LineString, LinearRing")){const n=t.querySelector(":is(LineString, LinearRing) coordinates").innerHTML.trim().split(" ").map((t=>r(t)));e.push(n)}if(t.querySelector("Point")){const e=t.querySelector("name").innerHTML.trim(),o=t.querySelector("description")?.innerHTML?.trim(),i=r(t.querySelector("Point coordinates").innerHTML);n.push({name:e,comment:o,point:i})}}return{lines:e,markers:n}}(e):t.name.endsWith(".gpx")?async function(t){const e=[],n=[],r=t=>Ce(t.getAttribute("lat"),t.getAttribute("lon")),o=t.querySelectorAll("trkseg");for(let t of o){const n=Array.from(t.querySelectorAll("trkpt")).map((t=>r(t)));e.push(n)}const i=t.querySelectorAll("trkpt > name");for(let t of i){const e=t.parentElement,o=t.innerHTML.trim(),i=e.querySelector("desc")?.innerHTML?.trim(),s=r(e);n.push({name:o,comment:i,point:s})}if(0===n.length){const e=t.querySelectorAll("wpt");for(let t of e){const e=t.querySelector("name").innerHTML.trim(),o=r(t);n.push({name:e,point:o})}}return{lines:e,markers:n}}(e):void 0)).then((({lines:e,markers:n})=>async function(t,e,n){if(0===t.length)throw"Die Route enthält keine Linie.";if(0===e.length)throw"Die Route enthält keine Wegpunkte.";for(;t.length>1;){const e=Me(t);if(null==e)throw"Die Route enthält Linien, die nicht miteinander verbunden sind.";e.reverseFirst&&t[e.i].reverse(),e.reverseSecond&&t[e.j].reverse(),t[e.i].push(...t[e.j]),t.splice(e.j,1)}const r=t[0];let o=null;for(let t=0;t<r.length;t++){const n=e.filter((t=>null==o||!Ct(t.point,o))).filter((e=>Mt(e.point,r[t])<10));if(0===n.length)continue;const i=n[0],s=n.filter((t=>null==t.index&&t!==i));if(e=e.filter((t=>!s.includes(t))),null==i.index)i.index=t;else{const n=Object.assign({},i);n.index=t,e.push(n)}o=i.point}const i=e.filter((t=>null==t.index));if(i.length>0){throw`Wegpunkte nicht in der Nähe von Eckpunkten der Linie: ${i.map((t=>`"${t.name}"`)).join(", ")}.`}e.sort(((t,e)=>t.index-e.index));for(let t of e)t.break=0;return{line:r,markers:e,speed:4,start:0,title:n}}(e,n,t.name))).then((t=>async function(t){return t.lineProfile=await Et(t.line,!1,100),t.markerProfile=await Et(t.markers.map((e=>t.line[e.index])),!0,t.markers.length),Lt(t),t}(t)))}function Ce(t,e){const[n,r]=class{static WGStoCH(t,e){return[this.WGStoCHy(t,e),this.WGStoCHx(t,e)]}static WGStoCHx(t,e){const n=((t=this.DECtoSEX(t))-169028.66)/1e4,r=((e=this.DECtoSEX(e))-26782.5)/1e4;return 200147.07+308807.95*n+3745.25*Math.pow(r,2)+76.63*Math.pow(n,2)-194.56*Math.pow(r,2)*n+119.79*Math.pow(n,3)}static WGStoCHy(t,e){const n=((t=this.DECtoSEX(t))-169028.66)/1e4,r=((e=this.DECtoSEX(e))-26782.5)/1e4;return 600072.37+211455.93*r-10938.51*r*n-.36*r*Math.pow(n,2)-44.54*Math.pow(r,3)}static CHtoWGS(t,e){return[this.CHtoWGSlng(t,e),this.CHtoWGSlat(t,e)]}static CHtoWGSlat(t,e){const n=(t-6e5)/1e6,r=(e-2e5)/1e6;return 100*(16.9023892+3.238272*r-.270978*Math.pow(n,2)-.002528*Math.pow(r,2)-.0447*Math.pow(n,2)*r-.014*Math.pow(r,3))/36}static CHtoWGSlng(t,e){const n=(t-6e5)/1e6,r=(e-2e5)/1e6;return 100*(2.6779094+4.728982*n+.791484*n*r+.1306*n*Math.pow(r,2)-.0436*Math.pow(n,3))/36}static DECtoSEX(t){const e=parseInt(t),n=parseInt(60*(t-e));return 60*(60*(t-e)-n)+60*n+3600*e}}.WGStoCH(Number(t),Number(e));return{x:n,y:r}}function Me(t){const e=(t,e)=>Mt(t,e)<10;for(let n=0;n<t.length;n++)for(let r=n+1;r<t.length;r++){if(e(t[n][t[n].length-1],t[r][0]))return{i:n,j:r,reverseFirst:!1,reverseSecond:!1};if(e(t[n][0],t[r][t[r].length-1]))return{i:n,j:r,reverseFirst:!0,reverseSecond:!0};if(e(t[n][0],t[r][0]))return{i:n,j:r,reverseFirst:!0,reverseSecond:!1};if(e(t[n][t[n].length-1],t[r][t[r].length-1]))return{i:n,j:r,reverseFirst:!1,reverseSecond:!0}}return null}function Ee(e){let n;return{c(){n=w("div"),C(n,"class","svelte-12lg60")},m(t,e){g(t,n,e)},p:t,i:t,o:t,d(t){t&&b(n)}}}class Le extends ht{constructor(t){super(),mt(this,t,null,Ee,s,{})}}function Pe(e){let n,r,i,s,l,c,a,u,d,f,m,p,$,x,S,M;return f=new vt({props:{name:"upload_file"}}),{c(){n=w("h2"),n.textContent="Route hochladen",r=k(),i=w("p"),i.innerHTML='Unterstützt sind <b>KML-Dateien</b> von <a href="https://map.geo.admin.ch" target="_blank">map.geo.admin.ch</a> oder der <a href="https://www.swisstopo.admin.ch/en/maps-data-online/maps-geodata-online/swisstopo-app.html" target="_blank">swisstopo-App</a>, sowie <b>GPX-Dateien</b> von <a href="https://www.outdooractive.com/de/routeplanner" target="_blank">outdooractive.com</a>.',s=k(),l=w("p"),l.textContent="Datei hierher ziehen oder...",c=k(),a=w("input"),u=k(),d=w("button"),at(f.$$.fragment),m=v(" Datei auswählen"),p=k(),$=w("br"),C(n,"class","svelte-cfhsjj"),C(a,"type","file"),C(a,"id","upload"),C(a,"accept",".kml, .gpx"),C(a,"class","svelte-cfhsjj")},m(t,o){g(t,n,o),g(t,r,o),g(t,i,o),g(t,s,o),g(t,l,o),g(t,c,o),g(t,a,o),g(t,u,o),g(t,d,o),ut(f,d,null),h(d,m),g(t,p,o),g(t,$,o),x=!0,S||(M=[y(a,"change",e[5]),y(d,"click",e[6])],S=!0)},p:t,i(t){x||(rt(f.$$.fragment,t),x=!0)},o(t){ot(f.$$.fragment,t),x=!1},d(t){t&&b(n),t&&b(r),t&&b(i),t&&b(s),t&&b(l),t&&b(c),t&&b(a),t&&b(u),t&&b(d),dt(f),t&&b(p),t&&b($),S=!1,o(M)}}}function _e(t){let e,n,r,o={ctx:t,current:null,token:null,hasCatch:!0,pending:De,then:je,catch:Ae,error:8,blocks:[,,,]};return lt(n=t[1],o),{c(){e=x(),o.block.c()},m(t,n){g(t,e,n),o.block.m(t,o.anchor=n),o.mount=()=>e.parentNode,o.anchor=e,r=!0},p(e,r){t=e,o.ctx=t,2&r&&n!==(n=t[1])&&lt(n,o)||function(t,e,n){const r=e.slice(),{resolved:o}=t;t.current===t.then&&(r[t.value]=o),t.current===t.catch&&(r[t.error]=o),t.block.p(r,n)}(o,t,r)},i(t){r||(rt(o.block),r=!0)},o(t){for(let t=0;t<3;t+=1){ot(o.blocks[t])}r=!1},d(t){t&&b(e),o.block.d(t),o.token=null,o=null}}}function Ae(t){let e,n,r,o,i,s,l,c,a,u,d,f,m,p=t[8]+"";return a=new vt({props:{name:"refresh"}}),{c(){e=w("h2"),e.textContent="Hoppla!",n=k(),r=w("p"),o=v("Es gab einen Fehler beim Import:"),i=w("br"),s=v(p),l=k(),c=w("button"),at(a.$$.fragment),u=v(" Nochmal versuchen"),C(e,"class","svelte-cfhsjj"),C(c,"class","secondary")},m(p,$){g(p,e,$),g(p,n,$),g(p,r,$),h(r,o),h(r,i),h(r,s),g(p,l,$),g(p,c,$),ut(a,c,null),h(c,u),d=!0,f||(m=y(c,"click",t[4]),f=!0)},p(t,e){(!d||2&e)&&p!==(p=t[8]+"")&&E(s,p)},i(t){d||(rt(a.$$.fragment,t),d=!0)},o(t){ot(a.$$.fragment,t),d=!1},d(t){t&&b(e),t&&b(n),t&&b(r),t&&b(l),t&&b(c),dt(a),f=!1,m()}}}function je(e){return{c:t,m:t,p:t,i:t,o:t,d:t}}function De(e){let n,r,o,i,s,l;return s=new Le({}),{c(){n=w("h2"),n.textContent="Route wird gewandert...",r=k(),o=w("br"),i=k(),at(s.$$.fragment),C(n,"class","svelte-cfhsjj")},m(t,e){g(t,n,e),g(t,r,e),g(t,o,e),g(t,i,e),ut(s,t,e),l=!0},p:t,i(t){l||(rt(s.$$.fragment,t),l=!0)},o(t){ot(s.$$.fragment,t),l=!1},d(t){t&&b(n),t&&b(r),t&&b(o),t&&b(i),dt(s,t)}}}function Fe(t){let e,n,r,i,s,l;const c=[_e,Pe],a=[];function u(t,e){return t[0]&&t[0][0]?0:1}return n=u(t),r=a[n]=c[n](t),{c(){e=w("div"),r.c(),C(e,"class","svelte-cfhsjj")},m(r,o){g(r,e,o),a[n].m(e,null),i=!0,s||(l=[y(e,"drop",S(t[7])),y(e,"dragover",S(t[3]))],s=!0)},p(t,[o]){let i=n;n=u(t),n===i?a[n].p(t,o):(et(),ot(a[i],1,1,(()=>{a[i]=null})),nt(),r=a[n],r?r.p(t,o):(r=a[n]=c[n](t),r.c()),rt(r,1),r.m(e,null))},i(t){i||(rt(r),i=!0)},o(t){ot(r),i=!1},d(t){t&&b(e),a[n].d(),s=!1,o(l)}}}function He(t,e,n){let r,o,{route:i=null}=e;return t.$$set=t=>{"route"in t&&n(2,i=t.route)},t.$$.update=()=>{1&t.$$.dirty&&r&&r[0]&&n(1,o=Se(r[0]).then((t=>new Promise((e=>setTimeout((()=>e(t)),500))))).then((t=>n(2,i=t))))},[r,o,i,function(e){N.call(this,t,e)},()=>n(0,r=null),function(){r=this.files,n(0,r)},()=>document.getElementById("upload").click(),t=>n(0,r=t.dataTransfer.files)]}class Te extends ht{constructor(t){super(),mt(this,t,He,Fe,s,{route:2})}}function ze(t){let e,n,r,o,i,s;return o=new ke({props:{route:t[0]}}),{c(){e=w("header"),e.innerHTML='<a href=".">❮ startseite</a>',n=k(),r=w("main"),at(o.$$.fragment),C(e,"class","noprint")},m(t,i){g(t,e,i),g(t,n,i),g(t,r,i),ut(o,r,null),s=!0},p(t,e){const n={};1&e&&(n.route=t[0]),o.$set(n)},i(t){s||(rt(o.$$.fragment,t),U((()=>{i||(i=st(r,$t,{},!0)),i.run(1)})),s=!0)},o(t){ot(o.$$.fragment,t),i||(i=st(r,$t,{},!1)),i.run(0),s=!1},d(t){t&&b(e),t&&b(n),t&&b(r),dt(o),t&&i&&i.end()}}}function Ne(t){let e,n,r,o,i,s;function l(e){t[1](e)}n=new ye({});let c={};return void 0!==t[0]&&(c.route=t[0]),o=new Te({props:c}),q.push((()=>ct(o,"route",l))),{c(){e=w("main"),at(n.$$.fragment),r=k(),at(o.$$.fragment)},m(t,i){g(t,e,i),ut(n,e,null),h(e,r),ut(o,e,null),s=!0},p(t,e){const n={};!i&&1&e&&(i=!0,n.route=t[0],I((()=>i=!1))),o.$set(n)},i(t){s||(rt(n.$$.fragment,t),rt(o.$$.fragment,t),s=!0)},o(t){ot(n.$$.fragment,t),ot(o.$$.fragment,t),s=!1},d(t){t&&b(e),dt(n),dt(o)}}}function We(t){let e,n,r,o,i;const s=[Ne,ze],l=[];function c(t,e){return null==t[0]?0:1}return e=c(t),n=l[e]=s[e](t),{c(){n.c(),r=k(),o=w("footer"),o.innerHTML='<span>marschzeittabelle.ch</span> \n    <span class="noprint">| <a href="help">hilfe</a>\n        | <a href="https://github.com/ckolin/marschzeittabelle">github</a></span>',C(o,"class","svelte-1pxn2rk")},m(t,n){l[e].m(t,n),g(t,r,n),g(t,o,n),i=!0},p(t,[o]){let i=e;e=c(t),e===i?l[e].p(t,o):(et(),ot(l[i],1,1,(()=>{l[i]=null})),nt(),n=l[e],n?n.p(t,o):(n=l[e]=s[e](t),n.c()),rt(n,1),n.m(r.parentNode,r))},i(t){i||(rt(n),i=!0)},o(t){ot(n),i=!1},d(t){l[e].d(t),t&&b(r),t&&b(o)}}}function qe(t,e,n){let r;return[r,function(t){r=t,n(0,r)}]}return new class extends ht{constructor(t){super(),mt(this,t,qe,We,s,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
