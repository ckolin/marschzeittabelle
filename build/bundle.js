var app=function(){"use strict";function t(){}const e=t=>t;function n(t){return t()}function r(){return Object.create(null)}function o(t){t.forEach(n)}function i(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function l(t,e,n,r){return t[1]&&r?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](r(e))):n.ctx}const a="undefined"!=typeof window;let c=a?()=>window.performance.now():()=>Date.now(),u=a?t=>requestAnimationFrame(t):t;const f=new Set;function d(t){f.forEach((e=>{e.c(t)||(f.delete(e),e.f())})),0!==f.size&&u(d)}function m(t){let e;return 0===f.size&&u(d),{promise:new Promise((n=>{f.add(e={c:t,f:n})})),abort(){f.delete(e)}}}function p(t,e){t.appendChild(e)}function h(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function $(t){const e=w("style");return function(t,e){p(t.head||t,e),e.sheet}(h(t),e),e.sheet}function g(t,e,n){t.insertBefore(e,n||null)}function b(t){t.parentNode&&t.parentNode.removeChild(t)}function k(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function w(t){return document.createElement(t)}function v(t){return document.createTextNode(t)}function x(){return v(" ")}function y(){return v("")}function S(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function C(t){return function(e){return e.preventDefault(),t.call(this,e)}}function M(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function _(t){return""===t?null:+t}function P(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function D(t,e){t.value=null==e?"":e}function L(t,e,n){for(let n=0;n<t.options.length;n+=1){const r=t.options[n];if(r.__value===e)return void(r.selected=!0)}n&&void 0===e||(t.selectedIndex=-1)}function E(t,e,n){t.classList[n?"add":"remove"](e)}function z(t,e,{bubbles:n=!1,cancelable:r=!1}={}){const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,n,r,e),o}const F=new Map;let T,A=0;function H(t,e,n,r,o,i,s,l=0){const a=16.666/r;let c="{\n";for(let t=0;t<=1;t+=a){const r=e+(n-e)*i(t);c+=100*t+`%{${s(r,1-r)}}\n`}const u=c+`100% {${s(n,1-n)}}\n}`,f=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(u)}_${l}`,d=h(t),{stylesheet:m,rules:p}=F.get(d)||function(t,e){const n={stylesheet:$(e),rules:{}};return F.set(t,n),n}(d,t);p[f]||(p[f]=!0,m.insertRule(`@keyframes ${f} ${u}`,m.cssRules.length));const g=t.style.animation||"";return t.style.animation=`${g?`${g}, `:""}${f} ${r}ms linear ${o}ms 1 both`,A+=1,f}function j(t,e){const n=(t.style.animation||"").split(", "),r=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),o=n.length-r.length;o&&(t.style.animation=r.join(", "),A-=o,A||u((()=>{A||(F.forEach((t=>{const{ownerNode:e}=t.stylesheet;e&&b(e)})),F.clear())})))}function q(t){T=t}function N(){if(!T)throw new Error("Function called outside component initialization");return T}function G(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const R=[],W=[];let O=[];const B=[],I=Promise.resolve();let K=!1;function J(t){O.push(t)}function X(t){B.push(t)}const U=new Set;let V,Z=0;function Q(){if(0!==Z)return;const t=T;do{try{for(;Z<R.length;){const t=R[Z];Z++,q(t),Y(t.$$)}}catch(t){throw R.length=0,Z=0,t}for(q(null),R.length=0,Z=0;W.length;)W.pop()();for(let t=0;t<O.length;t+=1){const e=O[t];U.has(e)||(U.add(e),e())}O.length=0}while(R.length);for(;B.length;)B.pop()();K=!1,U.clear(),q(t)}function Y(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(J)}}function tt(){return V||(V=Promise.resolve(),V.then((()=>{V=null}))),V}function et(t,e,n){t.dispatchEvent(z(`${e?"intro":"outro"}${n}`))}const nt=new Set;let rt;function ot(){rt={r:0,c:[],p:rt}}function it(){rt.r||o(rt.c),rt=rt.p}function st(t,e){t&&t.i&&(nt.delete(t),t.i(e))}function lt(t,e,n,r){if(t&&t.o){if(nt.has(t))return;nt.add(t),rt.c.push((()=>{nt.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}else r&&r()}const at={duration:0};function ct(n,r,o){const s={direction:"in"};let l,a,u=r(n,o,s),f=!1,d=0;function p(){l&&j(n,l)}function h(){const{delay:r=0,duration:o=300,easing:i=e,tick:s=t,css:h}=u||at;h&&(l=H(n,0,1,o,r,i,h,d++)),s(0,1);const $=c()+r,g=$+o;a&&a.abort(),f=!0,J((()=>et(n,!0,"start"))),a=m((t=>{if(f){if(t>=g)return s(1,0),et(n,!0,"end"),p(),f=!1;if(t>=$){const e=i((t-$)/o);s(e,1-e)}}return f}))}let $=!1;return{start(){$||($=!0,j(n),i(u)?(u=u(s),tt().then(h)):h())},invalidate(){$=!1},end(){f&&(p(),f=!1)}}}function ut(n,r,s,l){const a={direction:"both"};let u=r(n,s,a),f=l?0:1,d=null,p=null,h=null;function $(){h&&j(n,h)}function g(t,e){const n=t.b-f;return e*=Math.abs(n),{a:f,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function b(r){const{delay:i=0,duration:s=300,easing:l=e,tick:a=t,css:b}=u||at,k={start:c()+i,b:r};r||(k.group=rt,rt.r+=1),d||p?p=k:(b&&($(),h=H(n,f,r,s,i,l,b)),r&&a(0,1),d=g(k,s),J((()=>et(n,r,"start"))),m((t=>{if(p&&t>p.start&&(d=g(p,s),p=null,et(n,d.b,"start"),b&&($(),h=H(n,f,d.b,d.duration,0,l,u.css))),d)if(t>=d.end)a(f=d.b,1-f),et(n,d.b,"end"),p||(d.b?$():--d.group.r||o(d.group.c)),d=null;else if(t>=d.start){const e=t-d.start;f=d.a+d.d*l(e/d.duration),a(f,1-f)}return!(!d&&!p)})))}return{run(t){i(u)?tt().then((()=>{u=u(a),b(t)})):b(t)},end(){$(),d=p=null}}}function ft(t,e){const n=e.token={};function r(t,r,o,i){if(e.token!==n)return;e.resolved=i;let s=e.ctx;void 0!==o&&(s=s.slice(),s[o]=i);const l=t&&(e.current=t)(s);let a=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==r&&t&&(ot(),lt(t,1,1,(()=>{e.blocks[n]===t&&(e.blocks[n]=null)})),it())})):e.block.d(1),l.c(),st(l,1),l.m(e.mount(),e.anchor),a=!0),e.block=l,e.blocks&&(e.blocks[r]=l),a&&Q()}if(!(o=t)||"object"!=typeof o&&"function"!=typeof o||"function"!=typeof o.then){if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}else{const n=N();if(t.then((t=>{q(n),r(e.then,1,e.value,t),q(null)}),(t=>{if(q(n),r(e.catch,2,e.error,t),q(null),!e.hasCatch)throw t})),e.current!==e.pending)return r(e.pending,0),!0}var o}function dt(t,e,n){const r=t.$$.props[e];void 0!==r&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function mt(t){t&&t.c()}function pt(t,e,r,s){const{fragment:l,after_update:a}=t.$$;l&&l.m(e,r),s||J((()=>{const e=t.$$.on_mount.map(n).filter(i);t.$$.on_destroy?t.$$.on_destroy.push(...e):o(e),t.$$.on_mount=[]})),a.forEach(J)}function ht(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];O.forEach((r=>-1===t.indexOf(r)?e.push(r):n.push(r))),n.forEach((t=>t())),O=e}(n.after_update),o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function $t(t,e){-1===t.$$.dirty[0]&&(R.push(t),K||(K=!0,I.then(Q)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function gt(e,n,i,s,l,a,c,u=[-1]){const f=T;q(e);const d=e.$$={fragment:null,ctx:[],props:a,update:t,not_equal:l,bound:r(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(f?f.$$.context:[])),callbacks:r(),dirty:u,skip_bound:!1,root:n.target||f.$$.root};c&&c(d.root);let m=!1;if(d.ctx=i?i(e,n.props||{},((t,n,...r)=>{const o=r.length?r[0]:n;return d.ctx&&l(d.ctx[t],d.ctx[t]=o)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](o),m&&$t(e,t)),n})):[],d.update(),m=!0,o(d.before_update),d.fragment=!!s&&s(d.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);d.fragment&&d.fragment.l(t),t.forEach(b)}else d.fragment&&d.fragment.c();n.intro&&st(e.$$.fragment),pt(e,n.target,n.anchor,n.customElement),Q()}q(f)}class bt{$destroy(){ht(this,1),this.$destroy=t}$on(e,n){if(!i(n))return t;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function kt(t){const e=t-1;return e*e*e+1}function wt(t,{delay:n=0,duration:r=400,easing:o=e}={}){const i=+getComputedStyle(t).opacity;return{delay:n,duration:r,easing:o,css:t=>"opacity: "+t*i}}function vt(t,{delay:e=0,duration:n=400,easing:r=kt,axis:o="y"}={}){const i=getComputedStyle(t),s=+i.opacity,l="y"===o?"height":"width",a=parseFloat(i[l]),c="y"===o?["top","bottom"]:["left","right"],u=c.map((t=>`${t[0].toUpperCase()}${t.slice(1)}`)),f=parseFloat(i[`padding${u[0]}`]),d=parseFloat(i[`padding${u[1]}`]),m=parseFloat(i[`margin${u[0]}`]),p=parseFloat(i[`margin${u[1]}`]),h=parseFloat(i[`border${u[0]}Width`]),$=parseFloat(i[`border${u[1]}Width`]);return{delay:e,duration:n,easing:r,css:t=>`overflow: hidden;opacity: ${Math.min(20*t,1)*s};${l}: ${t*a}px;padding-${c[0]}: ${t*f}px;padding-${c[1]}: ${t*d}px;margin-${c[0]}: ${t*m}px;margin-${c[1]}: ${t*p}px;border-${c[0]}-width: ${t*h}px;border-${c[1]}-width: ${t*$}px;`}}const xt="route-v001";function yt(e){let n,r;return{c(){n=w("span"),r=v(e[0]),M(n,"class","material-icons-round svelte-3om24"),E(n,"big",e[1])},m(t,e){g(t,n,e),p(n,r)},p(t,[e]){1&e&&P(r,t[0]),2&e&&E(n,"big",t[1])},i:t,o:t,d(t){t&&b(n)}}}function St(t,e,n){let{name:r}=e,{big:o=!1}=e;return t.$$set=t=>{"name"in t&&n(0,r=t.name),"big"in t&&n(1,o=t.big)},[r,o]}class Ct extends bt{constructor(t){super(),gt(this,t,St,yt,s,{name:0,big:1})}}function Mt(t){const e=t=>Math.round(t);return`${e(t.x)}/${e(t.y)}`}function _t(t){const{h:e,m:n}=Dt(t);return`${e}:${Lt(n)}`}function Pt(t){const{h:e,m:n}=Dt(t);return`${Lt(e%24)}:${Lt(n)}`}function Dt(t){const e=Math.floor(t);return{h:e,m:Math.floor(60*(t-e))}}function Lt(t){return t<10?`0${t}`:t.toString()}function Et(t){window.goatcounter?.count&&window.goatcounter.count({path:t,title:"",event:!0})}function zt(t){null==t&&(document.body.innerHTML='\n        <style>\n            img {\n                display: block;\n                margin-top: 5rem;\n                margin-left: auto;\n                width: 40%;\n            }\n\n            body {\n                font-size: 20px;\n            }\n        </style>\n        <img src="https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fstatic.politifact.com%2Fpolitifact%2Fphotos%2FHomer_Simpson.jpg&f=1&nofb=1">\n        <h2>D\'oh! Da isch öppis schiefgloffe 😕</h2>\n        <p>Scho sit längerem versuech ich, dem Fehler wos bi dir grad geh het uf d Spur z cho.</p>\n        <p>Ich wär dir unglaublich dankbar, wenn du churz chönntisch schildere was du klickt hesch sowie was du hesch welle mache und mir es E-Mail a mzt (at) colins.computer würdsch schicke.</p>\n        <p>Falls möglech wärs super, wenn du au no d Route chasch mitschicke.<p>\n        <p>Danke vilmal und no en schöne Tag! 💚</p>'),Et(`error-${t}`)}function Ft(t,e){return t.x===e.x&&t.y===e.y}function Tt(t,e){return n=function(t,e){return{x:t.x-e.x,y:t.y-e.y}}(e,t),Math.hypot(n.x,n.y);var n}const At="https://api3.geo.admin.ch/rest/services",Ht=2;function jt(t,e,n){const r={type:"LineString",coordinates:t.map((t=>[Math.round(t.x),Math.round(t.y)]))};return fetch(`${At}/profile.json`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:`sr=21781&distinct_points=${e}&nb_points=${n}&geom=${JSON.stringify(r)}`}).catch(qt).then((t=>Nt(t,"Das Höhenprofil konnten nicht geladen werden."))).then((n=>new Promise((r=>{if(0===n.length)throw{id:"empty-response",message:"Für die Route sind keine Höhendaten verfügbar."};let o=n.map((t=>({point:{x:t.easting,y:t.northing},height:t.alts.COMB})));e&&(o=o.filter((e=>t.some((t=>Tt(e.point,t)<Ht))))),r(o)}))))}function qt(){throw{id:"connection-failed",message:"Die Verbindung zu den swisstopo-Servern ist fehlgeschlagen."}}async function Nt(t,e){if(!t.ok)throw{id:"response-not-ok",message:e};try{return await t.json()}catch{throw{id:"invalid-json",message:e}}}async function Gt(t){return await Promise.all([Rt(t),Wt(t)]),t}async function Rt(t){return t.lineProfile=await jt(t.line,!1,100),t.markerProfile=await jt(t.markers.map((e=>t.line[e.index])),!0,t.markers.length),Ot(t),t}async function Wt(t){return t.maps=await function(t,e){const n={paths:[t.map((t=>[Math.round(t.x),Math.round(t.y)]))]};return fetch(`${At}/all/MapServer/identify`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:`geometry=${JSON.stringify(n)}&geometryType=esriGeometryPolyline&layers=all:ch.swisstopo.pixelkarte-pk${e}.metadata&tolerance=0&returnGeometry=false`}).catch(qt).then((t=>Nt(t,"Die Landeskarten konnten nicht geladen werden."))).then((t=>new Promise((e=>{e(t.results.map((t=>({id:t.id,name:t.attributes.lk_name}))))}))))}(t.line,t.mapScale),t}function Ot(t){t.distanceSum=Bt(t.line),t.lineProfileDistanceSum=Bt(t.lineProfile.map((t=>t.point))),t.effort=function(t){const e=[];e[0]=0;for(let n=1;n<t.markers.length;n++){const r=t.distanceSum[t.markers[n].index]-t.distanceSum[t.markers[n-1].index],o=t.markerProfile[n].height-t.markerProfile[n-1].height,i=o/r;e[n]=r/1e3,i>0?e[n]+=o/100:i<-.2&&(e[n]+=Math.abs(o)/150)}return e}(t),t.effortSum=It(t.effort),t.breakSum=[0,...It(t.markers.map((t=>t.break)))]}function Bt(t){return It(t.map(((e,n)=>Tt(t[Math.max(0,n-1)],t[n]))))}function It(t){const e=[];let n=0;for(let r=0;r<t.length;r++)n+=t[r],e[r]=n;return e}function Kt(t){const e=[];for(let n=0;n<t.markers.length;n++)e[n]={index:n,name:t.markers[n].name,comment:t.markers[n].comment,coordinates:t.markers[n].point,height:t.markerProfile[n].height,distance:t.distanceSum[t.markers[n].index]/1e3,effort:t.effortSum[n],duration:t.effortSum[n]/t.speed,time:t.effortSum[n]/t.speed+t.breakSum[n]/60+t.start,break:t.markers[n].break};for(let n=1;n<t.markers.length;n++)e[n-1].diff={height:e[n].height-e[n-1].height,distance:e[n].distance-e[n-1].distance,effort:t.effort[n],duration:e[n].duration-e[n-1].duration};return e}function Jt(e){let n,r,o;return{c(){n=w("a"),r=v(e[1]),M(n,"class","noprint svelte-1734900"),M(n,"href",o=null==e[0]?"help":`help#${e[0]}`),M(n,"target","_blank")},m(t,e){g(t,n,e),p(n,r)},p(t,[e]){2&e&&P(r,t[1]),1&e&&o!==(o=null==t[0]?"help":`help#${t[0]}`)&&M(n,"href",o)},i:t,o:t,d(t){t&&b(n)}}}function Xt(t,e,n){let{topic:r=null}=e,{label:o="?"}=e;return t.$$set=t=>{"topic"in t&&n(0,r=t.topic),"label"in t&&n(1,o=t.label)},[r,o]}class Ut extends bt{constructor(t){super(),gt(this,t,Xt,Jt,s,{topic:0,label:1})}}function Vt(t){let e,n,r,o,i,s,a,c,u,f,d,m,h,$,k,y,_,D;const L=t[4].default,E=function(t,e,n,r){if(t){const o=l(t,e,n,r);return t[0](o)}}(L,t,t[3],null);return h=new Ct({props:{name:"done"}}),{c(){e=w("div"),n=w("div"),r=x(),o=w("div"),i=w("h2"),s=v(t[1]),a=x(),c=w("form"),E&&E.c(),u=x(),f=w("br"),d=x(),m=w("button"),mt(h.$$.fragment),$=v(" Fertig"),M(n,"class","background svelte-1v8si1e"),M(i,"class","svelte-1v8si1e"),M(m,"class","svelte-1v8si1e"),M(o,"class","dialog svelte-1v8si1e")},m(l,b){g(l,e,b),p(e,n),p(e,r),p(e,o),p(o,i),p(i,s),p(o,a),p(o,c),E&&E.m(c,null),p(c,u),p(c,f),p(c,d),p(c,m),pt(h,m,null),p(m,$),y=!0,_||(D=S(c,"submit",C(t[2])),_=!0)},p(t,e){(!y||2&e)&&P(s,t[1]),E&&E.p&&(!y||8&e)&&function(t,e,n,r,o,i){if(o){const s=l(e,n,r,i);t.p(s,o)}}(E,L,t,t[3],y?function(t,e,n,r){if(t[2]&&r){const o=t[2](r(n));if(void 0===e.dirty)return o;if("object"==typeof o){const t=[],n=Math.max(e.dirty.length,o.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|o[r];return t}return e.dirty|o}return e.dirty}(L,t[3],e,null):function(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}(t[3]),null)},i(t){y||(st(E,t),st(h.$$.fragment,t),J((()=>{y&&(k||(k=ut(e,wt,{duration:100},!0)),k.run(1))})),y=!0)},o(t){lt(E,t),lt(h.$$.fragment,t),k||(k=ut(e,wt,{duration:100},!1)),k.run(0),y=!1},d(t){t&&b(e),E&&E.d(t),ht(h),t&&k&&k.end(),_=!1,D()}}}function Zt(t){let e,n,r=t[0]&&Vt(t);return{c(){r&&r.c(),e=y()},m(t,o){r&&r.m(t,o),g(t,e,o),n=!0},p(t,[n]){t[0]?r?(r.p(t,n),1&n&&st(r,1)):(r=Vt(t),r.c(),st(r,1),r.m(e.parentNode,e)):r&&(ot(),lt(r,1,1,(()=>{r=null})),it())},i(t){n||(st(r),n=!0)},o(t){lt(r),n=!1},d(t){r&&r.d(t),t&&b(e)}}}function Qt(t,e,n){let{$$slots:r={},$$scope:o}=e,{title:i}=e,{show:s=!1}=e;const l=function(){const t=N();return(e,n,{cancelable:r=!1}={})=>{const o=t.$$.callbacks[e];if(o){const i=z(e,n,{cancelable:r});return o.slice().forEach((e=>{e.call(t,i)})),!i.defaultPrevented}return!0}}();return t.$$set=t=>{"title"in t&&n(1,i=t.title),"show"in t&&n(0,s=t.show),"$$scope"in t&&n(3,o=t.$$scope)},[s,i,function(){n(0,s=!1),l("close")},o,r]}class Yt extends bt{constructor(t){super(),gt(this,t,Qt,Zt,s,{title:1,show:0})}}function te(t){let e,n,r,o,i,s,l,a,c,u;return{c(){e=w("label"),e.textContent="Massstab",n=x(),r=w("select"),o=w("option"),o.textContent="1:25'000",i=w("option"),i.textContent="1:50'000",s=w("option"),s.textContent="1:100'000",l=x(),a=w("br"),M(e,"for","scale"),o.__value=25,o.value=o.__value,i.__value=50,i.value=i.__value,s.__value=100,s.value=s.__value,M(r,"id","scale"),r.required=!0,void 0===t[1]&&J((()=>t[2].call(r)))},m(f,d){g(f,e,d),g(f,n,d),g(f,r,d),p(r,o),p(r,i),p(r,s),L(r,t[1],!0),g(f,l,d),g(f,a,d),c||(u=S(r,"change",t[2]),c=!0)},p(t,e){2&e&&L(r,t[1])},d(t){t&&b(e),t&&b(n),t&&b(r),t&&b(l),t&&b(a),c=!1,u()}}}function ee(t){let e,n,r;function o(e){t[3](e)}let i={title:"Kartenmassstab wählen",$$slots:{default:[te]},$$scope:{ctx:t}};return void 0!==t[0]&&(i.show=t[0]),e=new Yt({props:i}),W.push((()=>dt(e,"show",o))),e.$on("close",t[4]),{c(){mt(e.$$.fragment)},m(t,n){pt(e,t,n),r=!0},p(t,[r]){const o={};34&r&&(o.$$scope={dirty:r,ctx:t}),!n&&1&r&&(n=!0,o.show=t[0],X((()=>n=!1))),e.$set(o)},i(t){r||(st(e.$$.fragment,t),r=!0)},o(t){lt(e.$$.fragment,t),r=!1},d(t){ht(e,t)}}}function ne(t,e,n){let{show:r}=e,{scale:o}=e;return t.$$set=t=>{"show"in t&&n(0,r=t.show),"scale"in t&&n(1,o=t.scale)},[r,o,function(){o=function(t){const e=t.querySelector(":checked");return e&&e.__value}(this),n(1,o)},function(t){r=t,n(0,r)},function(e){G.call(this,t,e)}]}class re extends bt{constructor(t){super(),gt(this,t,ne,ee,s,{show:0,scale:1})}}function oe(t){let e,n,r,i,s,l,a,c,u,f,d,m,h,$,k,y;return l=new Ct({props:{name:"remove"}}),f=new Ct({props:{name:"add"}}),{c(){e=w("label"),e.textContent="Geschwindigkeit (Lkm/h)",n=x(),r=w("input"),i=x(),s=w("button"),mt(l.$$.fragment),a=v(" Langsamer"),c=x(),u=w("button"),mt(f.$$.fragment),d=v(" Schneller"),m=x(),h=w("br"),M(e,"for","speed"),M(r,"id","speed"),M(r,"type","number"),M(r,"min","0.1"),M(r,"step","0.1"),r.required=!0,M(s,"type","button"),M(s,"class","pill"),M(u,"type","button"),M(u,"class","pill")},m(o,b){g(o,e,b),g(o,n,b),g(o,r,b),D(r,t[1]),g(o,i,b),g(o,s,b),pt(l,s,null),p(s,a),g(o,c,b),g(o,u,b),pt(f,u,null),p(u,d),g(o,m,b),g(o,h,b),$=!0,k||(y=[S(r,"input",t[3]),S(s,"click",t[4]),S(u,"click",t[5])],k=!0)},p(t,e){2&e&&_(r.value)!==t[1]&&D(r,t[1])},i(t){$||(st(l.$$.fragment,t),st(f.$$.fragment,t),$=!0)},o(t){lt(l.$$.fragment,t),lt(f.$$.fragment,t),$=!1},d(t){t&&b(e),t&&b(n),t&&b(r),t&&b(i),t&&b(s),ht(l),t&&b(c),t&&b(u),ht(f),t&&b(m),t&&b(h),k=!1,o(y)}}}function ie(t){let e,n,r;function o(e){t[6](e)}let i={title:"Geschwindigkeit anpassen",$$slots:{default:[oe]},$$scope:{ctx:t}};return void 0!==t[0]&&(i.show=t[0]),e=new Yt({props:i}),W.push((()=>dt(e,"show",o))),{c(){mt(e.$$.fragment)},m(t,n){pt(e,t,n),r=!0},p(t,[r]){const o={};130&r&&(o.$$scope={dirty:r,ctx:t}),!n&&1&r&&(n=!0,o.show=t[0],X((()=>n=!1))),e.$set(o)},i(t){r||(st(e.$$.fragment,t),r=!0)},o(t){lt(e.$$.fragment,t),r=!1},d(t){ht(e,t)}}}function se(t,e,n){let{show:r}=e,{speed:o}=e,i=o;return t.$$set=t=>{"show"in t&&n(0,r=t.show),"speed"in t&&n(2,o=t.speed)},t.$$.update=()=>{2&t.$$.dirty&&!window.isNaN(i)&&i>0&&n(2,o=i)},[r,i,o,function(){i=_(this.value),n(1,i)},()=>n(1,i=Math.max(.5,i-.5)),()=>n(1,i+=.5),function(t){r=t,n(0,r)}]}class le extends bt{constructor(t){super(),gt(this,t,se,ie,s,{show:0,speed:2})}}function ae(e){let n;return{c(){n=w("div"),M(n,"class","svelte-19o0idp"),E(n,"small",e[0])},m(t,e){g(t,n,e)},p(t,[e]){1&e&&E(n,"small",t[0])},i:t,o:t,d(t){t&&b(n)}}}function ce(t,e,n){let{small:r=!1}=e;return t.$$set=t=>{"small"in t&&n(0,r=t.small)},[r]}class ue extends bt{constructor(t){super(),gt(this,t,ce,ae,s,{small:0})}}function fe(t){let e,n,r,i,s,l,a,c,u,f,d,m,h,$,k,y,C,_,P,L;return l=new Ct({props:{name:"brightness_low"}}),f=new Ct({props:{name:"brightness_medium"}}),$=new Ct({props:{name:"brightness_high"}}),{c(){e=w("label"),e.textContent="Abreise",n=x(),r=w("input"),i=x(),s=w("button"),mt(l.$$.fragment),a=v(" 08:00"),c=x(),u=w("button"),mt(f.$$.fragment),d=v(" 12:00"),m=x(),h=w("button"),mt($.$$.fragment),k=v(" 16:00"),y=x(),C=w("br"),M(e,"for","start"),M(r,"id","start"),M(r,"type","time"),r.required=!0,M(s,"type","button"),M(s,"class","pill"),M(u,"type","button"),M(u,"class","pill"),M(h,"type","button"),M(h,"class","pill")},m(o,b){g(o,e,b),g(o,n,b),g(o,r,b),D(r,t[1]),g(o,i,b),g(o,s,b),pt(l,s,null),p(s,a),g(o,c,b),g(o,u,b),pt(f,u,null),p(u,d),g(o,m,b),g(o,h,b),pt($,h,null),p(h,k),g(o,y,b),g(o,C,b),_=!0,P||(L=[S(r,"input",t[3]),S(s,"click",t[4]),S(u,"click",t[5]),S(h,"click",t[6])],P=!0)},p(t,e){2&e&&D(r,t[1])},i(t){_||(st(l.$$.fragment,t),st(f.$$.fragment,t),st($.$$.fragment,t),_=!0)},o(t){lt(l.$$.fragment,t),lt(f.$$.fragment,t),lt($.$$.fragment,t),_=!1},d(t){t&&b(e),t&&b(n),t&&b(r),t&&b(i),t&&b(s),ht(l),t&&b(c),t&&b(u),ht(f),t&&b(m),t&&b(h),ht($),t&&b(y),t&&b(C),P=!1,o(L)}}}function de(t){let e,n,r;function o(e){t[7](e)}let i={title:"Abreise anpassen",$$slots:{default:[fe]},$$scope:{ctx:t}};return void 0!==t[0]&&(i.show=t[0]),e=new Yt({props:i}),W.push((()=>dt(e,"show",o))),{c(){mt(e.$$.fragment)},m(t,n){pt(e,t,n),r=!0},p(t,[r]){const o={};258&r&&(o.$$scope={dirty:r,ctx:t}),!n&&1&r&&(n=!0,o.show=t[0],X((()=>n=!1))),e.$set(o)},i(t){r||(st(e.$$.fragment,t),r=!0)},o(t){lt(e.$$.fragment,t),r=!1},d(t){ht(e,t)}}}function me(t,e,n){let{show:r}=e,{start:o}=e,i=Pt(o);return t.$$set=t=>{"show"in t&&n(0,r=t.show),"start"in t&&n(2,o=t.start)},t.$$.update=()=>{2&t.$$.dirty&&n(2,o=i.split(":").map(((t,e)=>Number(t)/60**e)).reduce(((t,e)=>t+e)))},[r,i,o,function(){i=this.value,n(1,i)},()=>n(1,i="08:00"),()=>n(1,i="12:00"),()=>n(1,i="16:00"),function(t){r=t,n(0,r)}]}class pe extends bt{constructor(t){super(),gt(this,t,me,de,s,{show:0,start:2})}}function he(t,e,n){const r=t.slice();return r[19]=e[n],r}function $e(e){let n,r=e[0].maps,o=[];for(let t=0;t<r.length;t+=1)o[t]=be(he(e,r,t));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();n=y()},m(t,e){for(let n=0;n<o.length;n+=1)o[n]&&o[n].m(t,e);g(t,n,e)},p(t,e){if(1&e){let i;for(r=t[0].maps,i=0;i<r.length;i+=1){const s=he(t,r,i);o[i]?o[i].p(s,e):(o[i]=be(s),o[i].c(),o[i].m(n.parentNode,n))}for(;i<o.length;i+=1)o[i].d(1);o.length=r.length}},i:t,o:t,d(t){k(o,t),t&&b(n)}}}function ge(e){let n,r,o,i;return n=new ue({props:{small:!0}}),{c(){mt(n.$$.fragment),r=x(),o=w("br")},m(t,e){pt(n,t,e),g(t,r,e),g(t,o,e),i=!0},p:t,i(t){i||(st(n.$$.fragment,t),i=!0)},o(t){lt(n.$$.fragment,t),i=!1},d(t){ht(n,t),t&&b(r),t&&b(o)}}}function be(t){let e,n,r,o,i,s,l=t[19].name+"",a=t[19].id+"";return{c(){e=w("b"),n=v(l),r=v(" ("),o=v(a),i=v(")"),s=w("br")},m(t,l){g(t,e,l),p(e,n),p(e,r),p(e,o),p(e,i),g(t,s,l)},p(t,e){1&e&&l!==(l=t[19].name+"")&&P(n,l),1&e&&a!==(a=t[19].id+"")&&P(o,a)},d(t){t&&b(e),t&&b(s)}}}function ke(t){let e,n,r,i,s,l,a,c,u,f,d,m,h,$,k,y,C,_,D,L,E,z,F,T,A,H,j,q,N,G,R,O,B,I,K,J,U,V,Z,Q,Y,tt,et,nt,rt,at,ct,ut,ft,$t,gt,bt,kt,wt,vt,xt,yt,St,Mt,Dt,Lt,Et,zt,Ft,Tt,At,Ht,jt,qt,Nt,Gt,Rt,Wt,Ot,Bt,It,Kt,Jt,Xt,Vt,Zt,Qt,Yt,te,ee,ne,oe,ie,se,ae,ce,ue,fe,de,me,he,be,ke,we,ve,xe,ye,Se,Ce,Me,_e,Pe,De,Le,Ee,ze,Fe,Te,Ae,He=t[0].markers[0].name+"",je=t[0].markers[t[0].markers.length-1].name+"",qe=t[0].mapScale+"",Ne=t[5].distance.toFixed(1)+"",Ge=Math.round(t[5].ascent)+"",Re=Math.round(t[5].descent)+"",We=t[5].effort.toFixed(1)+"",Oe=t[0].speed+"",Be=Pt(t[0].start)+"",Ie=Pt(t[0].start+t[5].duration)+"",Ke=_t(t[5].duration)+"",Je=_t(t[5].breakDuration)+"";function Xe(e){t[10](e)}function Ue(e){t[11](e)}let Ve={};function Ze(e){t[12](e)}function Qe(e){t[13](e)}void 0!==t[1]&&(Ve.show=t[1]),void 0!==t[0].speed&&(Ve.speed=t[0].speed),e=new le({props:Ve}),W.push((()=>dt(e,"show",Xe))),W.push((()=>dt(e,"speed",Ue)));let Ye={};function tn(e){t[14](e)}function en(e){t[15](e)}void 0!==t[2]&&(Ye.show=t[2]),void 0!==t[0].start&&(Ye.start=t[0].start),s=new pe({props:Ye}),W.push((()=>dt(s,"show",Ze))),W.push((()=>dt(s,"start",Qe)));let nn={};void 0!==t[3]&&(nn.show=t[3]),void 0!==t[0].mapScale&&(nn.scale=t[0].mapScale),u=new re({props:nn}),W.push((()=>dt(u,"show",tn))),W.push((()=>dt(u,"scale",en))),u.$on("close",t[7]),R=new Ct({props:{name:"edit"}});const rn=[ge,$e],on=[];function sn(t,e){return t[4]?0:1}return K=sn(t),J=on[K]=rn[K](t),Z=new Ct({props:{name:"swap_vert"}}),Tt=new Ut({props:{topic:"calculation"}}),Ot=new Ct({props:{name:"edit"}}),Qt=new Ct({props:{name:"edit"}}),_e=new Ct({props:{name:"print"}}),Ee=new Ct({props:{name:"table_chart"}}),{c(){mt(e.$$.fragment),i=x(),mt(s.$$.fragment),c=x(),mt(u.$$.fragment),m=x(),h=w("div"),$=w("div"),k=w("span"),k.textContent="Start: ",y=w("b"),C=v(He),_=w("br"),D=x(),L=w("span"),L.textContent="Ziel: ",E=w("b"),z=v(je),F=w("br"),T=x(),A=w("span"),H=v("Landeskarten 1:"),j=v(qe),q=v("'000:"),N=x(),G=w("button"),mt(R.$$.fragment),O=x(),B=w("br"),I=x(),J.c(),U=x(),V=w("button"),mt(Z.$$.fragment),Q=v(" Richtung wechseln"),Y=x(),tt=w("div"),et=w("span"),et.textContent="Horizontaldistanz: ",nt=w("b"),rt=v(Ne),at=v(" km"),ct=w("br"),ut=x(),ft=w("span"),ft.textContent="Auf-/Abstieg: ",$t=v("↑ "),gt=w("b"),bt=v(Ge),kt=v(" m"),wt=v(" ↓ "),vt=w("b"),xt=v(Re),yt=v(" m"),St=w("br"),Mt=x(),Dt=w("span"),Dt.textContent="Aufwand: ",Lt=w("b"),Et=v(We),zt=v(" Lkm"),Ft=x(),mt(Tt.$$.fragment),At=w("br"),Ht=x(),jt=w("span"),jt.textContent="Geschwindigkeit: ",qt=w("b"),Nt=v(Oe),Gt=v(" Lkm/h"),Rt=x(),Wt=w("button"),mt(Ot.$$.fragment),Bt=x(),It=w("div"),Kt=w("span"),Kt.textContent="Abreise: ",Jt=w("b"),Xt=v(Be),Vt=x(),Zt=w("button"),mt(Qt.$$.fragment),Yt=x(),te=w("br"),ee=x(),ne=w("span"),ne.textContent="Ankunft: ",oe=w("b"),ie=v(Ie),se=w("br"),ae=x(),ce=w("span"),ce.textContent="Gehzeit: ",ue=w("b"),fe=v(Ke),de=v(" h"),me=w("br"),he=x(),be=w("span"),be.textContent="Pausen: ",ke=w("b"),we=v(Je),ve=v(" h"),xe=x(),ye=w("div"),Se=w("br"),Ce=x(),Me=w("button"),mt(_e.$$.fragment),Pe=v(" Drucken (PDF)"),De=v("\n     \n    "),Le=w("button"),mt(Ee.$$.fragment),ze=v(" Tabelle exportieren (CSV)"),M(G,"class","pill noprint"),G.disabled=t[4],M(V,"class","pill noprint pad svelte-mpbsbs"),M($,"class","svelte-mpbsbs"),M(Wt,"class","pill noprint"),M(tt,"class","svelte-mpbsbs"),M(Zt,"class","pill noprint"),M(It,"class","svelte-mpbsbs"),M(h,"class","container svelte-mpbsbs"),M(Le,"class","secondary"),M(ye,"class","noprint")},m(n,r){pt(e,n,r),g(n,i,r),pt(s,n,r),g(n,c,r),pt(u,n,r),g(n,m,r),g(n,h,r),p(h,$),p($,k),p($,y),p(y,C),p($,_),p($,D),p($,L),p($,E),p(E,z),p($,F),p($,T),p($,A),p(A,H),p(A,j),p(A,q),p($,N),p($,G),pt(R,G,null),p($,O),p($,B),p($,I),on[K].m($,null),p($,U),p($,V),pt(Z,V,null),p(V,Q),p(h,Y),p(h,tt),p(tt,et),p(tt,nt),p(nt,rt),p(nt,at),p(tt,ct),p(tt,ut),p(tt,ft),p(tt,$t),p(tt,gt),p(gt,bt),p(gt,kt),p(tt,wt),p(tt,vt),p(vt,xt),p(vt,yt),p(tt,St),p(tt,Mt),p(tt,Dt),p(tt,Lt),p(Lt,Et),p(Lt,zt),p(tt,Ft),pt(Tt,tt,null),p(tt,At),p(tt,Ht),p(tt,jt),p(tt,qt),p(qt,Nt),p(qt,Gt),p(tt,Rt),p(tt,Wt),pt(Ot,Wt,null),p(h,Bt),p(h,It),p(It,Kt),p(It,Jt),p(Jt,Xt),p(It,Vt),p(It,Zt),pt(Qt,Zt,null),p(It,Yt),p(It,te),p(It,ee),p(It,ne),p(It,oe),p(oe,ie),p(It,se),p(It,ae),p(It,ce),p(It,ue),p(ue,fe),p(ue,de),p(It,me),p(It,he),p(It,be),p(It,ke),p(ke,we),p(ke,ve),g(n,xe,r),g(n,ye,r),p(ye,Se),p(ye,Ce),p(ye,Me),pt(_e,Me,null),p(Me,Pe),p(ye,De),p(ye,Le),pt(Ee,Le,null),p(Le,ze),Fe=!0,Te||(Ae=[S(G,"click",t[16]),S(V,"click",t[6]),S(Wt,"click",t[17]),S(Zt,"click",t[18]),S(Me,"click",t[8]),S(Le,"click",t[9])],Te=!0)},p(t,[o]){const i={};!n&&2&o&&(n=!0,i.show=t[1],X((()=>n=!1))),!r&&1&o&&(r=!0,i.speed=t[0].speed,X((()=>r=!1))),e.$set(i);const c={};!l&&4&o&&(l=!0,c.show=t[2],X((()=>l=!1))),!a&&1&o&&(a=!0,c.start=t[0].start,X((()=>a=!1))),s.$set(c);const m={};!f&&8&o&&(f=!0,m.show=t[3],X((()=>f=!1))),!d&&1&o&&(d=!0,m.scale=t[0].mapScale,X((()=>d=!1))),u.$set(m),(!Fe||1&o)&&He!==(He=t[0].markers[0].name+"")&&P(C,He),(!Fe||1&o)&&je!==(je=t[0].markers[t[0].markers.length-1].name+"")&&P(z,je),(!Fe||1&o)&&qe!==(qe=t[0].mapScale+"")&&P(j,qe),(!Fe||16&o)&&(G.disabled=t[4]);let p=K;K=sn(t),K===p?on[K].p(t,o):(ot(),lt(on[p],1,1,(()=>{on[p]=null})),it(),J=on[K],J?J.p(t,o):(J=on[K]=rn[K](t),J.c()),st(J,1),J.m($,U)),(!Fe||32&o)&&Ne!==(Ne=t[5].distance.toFixed(1)+"")&&P(rt,Ne),(!Fe||32&o)&&Ge!==(Ge=Math.round(t[5].ascent)+"")&&P(bt,Ge),(!Fe||32&o)&&Re!==(Re=Math.round(t[5].descent)+"")&&P(xt,Re),(!Fe||32&o)&&We!==(We=t[5].effort.toFixed(1)+"")&&P(Et,We),(!Fe||1&o)&&Oe!==(Oe=t[0].speed+"")&&P(Nt,Oe),(!Fe||1&o)&&Be!==(Be=Pt(t[0].start)+"")&&P(Xt,Be),(!Fe||33&o)&&Ie!==(Ie=Pt(t[0].start+t[5].duration)+"")&&P(ie,Ie),(!Fe||32&o)&&Ke!==(Ke=_t(t[5].duration)+"")&&P(fe,Ke),(!Fe||32&o)&&Je!==(Je=_t(t[5].breakDuration)+"")&&P(we,Je)},i(t){Fe||(st(e.$$.fragment,t),st(s.$$.fragment,t),st(u.$$.fragment,t),st(R.$$.fragment,t),st(J),st(Z.$$.fragment,t),st(Tt.$$.fragment,t),st(Ot.$$.fragment,t),st(Qt.$$.fragment,t),st(_e.$$.fragment,t),st(Ee.$$.fragment,t),Fe=!0)},o(t){lt(e.$$.fragment,t),lt(s.$$.fragment,t),lt(u.$$.fragment,t),lt(R.$$.fragment,t),lt(J),lt(Z.$$.fragment,t),lt(Tt.$$.fragment,t),lt(Ot.$$.fragment,t),lt(Qt.$$.fragment,t),lt(_e.$$.fragment,t),lt(Ee.$$.fragment,t),Fe=!1},d(t){ht(e,t),t&&b(i),ht(s,t),t&&b(c),ht(u,t),t&&b(m),t&&b(h),ht(R),on[K].d(),ht(Z),ht(Tt),ht(Ot),ht(Qt),t&&b(xe),t&&b(ye),ht(_e),ht(Ee),Te=!1,o(Ae)}}}function we(t,e,n){let r,o,{route:i}=e,s=!1,l=!1,a=!1;return t.$$set=t=>{"route"in t&&n(0,i=t.route)},t.$$.update=()=>{1&t.$$.dirty&&n(5,r=function(t){const e=t.distanceSum[t.line.length-1]/1e3,n=t.effortSum[t.markers.length-1],r=n/t.speed,o=t.breakSum[t.markers.length-1]/60,i=r+o,{ascent:s,descent:l}=function(t){let e=0,n=0;for(let r=1;r<t.markers.length;r++){const o=t.markerProfile[r].height-t.markerProfile[r-1].height;o>0?e+=o:n-=o}return{ascent:e,descent:n}}(t);return{distance:e,effort:n,walkingDuration:r,breakDuration:o,duration:i,ascent:s,descent:l}}(i))},[i,s,l,a,o,r,function(){!function(t){t.line.reverse(),t.markers.reverse(),t.lineProfile?.reverse(),t.markerProfile?.reverse(),t.markers.forEach((e=>e.index=t.line.length-e.index-1)),Ot(t)}(i),n(0,i)},function(){n(4,o=!0),Wt(i).then((()=>new Promise((t=>{setTimeout(t,300)})))).then((()=>{n(0,i),n(4,o=!1)})).catch((t=>{zt(t.id),alert(t.message)}))},function(){window.print?(Et("print"),window.print()):(zt("print"),alert("Dein Browser unterstützt das Drucken nicht."))},function(){Et("export-csv");const t=[["Nr.","Wegpunkt","Koordinaten","Kommentar","Höhe / m","Differenz Höhe / m","Total Distanz / km","Differenz Distanz / km","Total Aufwand / Lkm","Differenz Aufwand / Lkm","Total Gehzeit / h","Differenz Gehzeit / h","Uhrzeit / hh:mm","Pause / min"],...Kt(i).map((t=>[t.index+1,t.name,Mt(t.coordinates),t.comment??"",t.height,t.diff?.height??0,t.distance,t.diff?.distance??0,t.effort,t.diff?.effort??0,t.duration,t.diff?.duration??0,Pt(t.time),t.break]))].map((t=>t.map((t=>`"${t}"`)).join(","))).join("\n"),e=document.createElement("a");e.href=URL.createObjectURL(new Blob([t],{type:"text/csv"})),e.download=`${i.title||"marschzeittabelle"}.csv`,e.click()},function(t){s=t,n(1,s)},function(e){t.$$.not_equal(i.speed,e)&&(i.speed=e,n(0,i))},function(t){l=t,n(2,l)},function(e){t.$$.not_equal(i.start,e)&&(i.start=e,n(0,i))},function(t){a=t,n(3,a)},function(e){t.$$.not_equal(i.mapScale,e)&&(i.mapScale=e,n(0,i))},()=>n(3,a=!0),()=>n(1,s=!0),()=>n(2,l=!0)]}class ve extends bt{constructor(t){super(),gt(this,t,we,ke,s,{route:0})}}function xe(){for(let t of Object.keys(ye)){const e="--"+t.replace(/[A-Z]/g,(t=>"-"+t.toLowerCase()));ye[t]=window.getComputedStyle(document.body).getPropertyValue(e)}return ye}const ye={backgroundColor:null,textColor:null,darkerAccentColor:null,accentColor:null,lighterAccentColor:null,shadowColor:null};function Se(e){let n;return{c(){n=w("canvas"),M(n,"class","svelte-xd84ci")},m(t,r){g(t,n,r),e[2](n)},p:t,i:t,o:t,d(t){t&&b(n),e[2](null)}}}function Ce(t,e,n){let r,{route:o}=e;return t.$$set=t=>{"route"in t&&n(1,o=t.route)},t.$$.update=()=>{3&t.$$.dirty&&r&&(n(0,r.width=800,r),n(0,r.height=200,r),function(t,e){const n=xe(),r=e.getContext("2d");r.clearRect(0,0,e.width,e.height);const o=12;let i=1/0,s=-1/0;for(let e of t.lineProfile)i=Math.min(i,e.height),s=Math.max(s,e.height);const l={x:t.distanceSum[t.distanceSum.length-1],y:s-i},a=Math.min((e.width-24)/l.x,(e.height-24-40)/l.y);e.width=Math.floor(l.x*a+24),e.height=Math.floor(l.y*a+24+40);const c=(t,n)=>{return r={x:(l={x:t,y:i-n}).x*(c=a),y:l.y*c},s={x:o,y:e.height-o-40},{x:r.x+s.x,y:r.y+s.y};var r,s,l,c},u=()=>{for(let e=0;e<t.lineProfile.length;e++){const n=c(t.lineProfileDistanceSum[e],t.lineProfile[e].height);0===e?r.moveTo(n.x,n.y):r.lineTo(n.x,n.y)}};r.beginPath(),u();const f=c(0,s),d=c(0,i),m=c(l.x,i);r.lineTo(m.x,e.height),r.lineTo(d.x,e.height);const p=r.createLinearGradient(0,f.y,0,e.height);p.addColorStop(0,n.lighterAccentColor),p.addColorStop(1,n.backgroundColor),r.fillStyle=p,r.fill(),r.beginPath(),u(),r.lineWidth=4,r.lineCap=r.lineJoin="round",r.strokeStyle=n.accentColor,r.stroke(),r.font="bold 14px sans-serif",r.textAlign="center",r.textBaseline="middle";for(let e=0;e<t.markerProfile.length;e++){const o=c(t.distanceSum[t.markers[e].index],t.markerProfile[e].height);r.beginPath(),r.arc(o.x,o.y,10,0,2*Math.PI),r.fillStyle=n.darkerAccentColor,r.fill(),r.fillStyle=n.backgroundColor,r.fillText(e+1,o.x,o.y+.5)}const h=125*2**Math.floor(Math.log2(120/(125*a))),$=h*a;r.fillStyle=n.textColor,r.fillRect(e.width-o-$,e.height-4,$,2),r.fillRect(e.width-o-$,e.height-6,2,6),r.fillRect(e.width-o-2,e.height-6,2,6),r.textAlign="right",r.textBaseline="bottom",r.fillText(`${h} m`,e.width-o,e.height-6)}(o,r))},[r,o,function(t){W[t?"unshift":"push"]((()=>{r=t,n(0,r),n(1,o)}))}]}class Me extends bt{constructor(t){super(),gt(this,t,Ce,Se,s,{route:1})}}function _e(t){let e,n,r,i,s,l,a,c,u,f,d,m,h,$,k,y,C,P,L,E;return l=new Ct({props:{name:"block"}}),f=new Ct({props:{name:"hourglass_bottom"}}),$=new Ct({props:{name:"hourglass_full"}}),{c(){e=w("label"),e.textContent="Pause (min)",n=x(),r=w("input"),i=x(),s=w("button"),mt(l.$$.fragment),a=v(" Keine"),c=x(),u=w("button"),mt(f.$$.fragment),d=v(" 5 min"),m=x(),h=w("button"),mt($.$$.fragment),k=v(" 15 min"),y=x(),C=w("br"),M(e,"for","break"),M(r,"id","break"),M(r,"type","number"),M(r,"min","0"),r.required=!0,M(s,"type","button"),M(s,"class","pill"),M(u,"type","button"),M(u,"class","pill"),M(h,"type","button"),M(h,"class","pill")},m(o,b){g(o,e,b),g(o,n,b),g(o,r,b),D(r,t[0].break),g(o,i,b),g(o,s,b),pt(l,s,null),p(s,a),g(o,c,b),g(o,u,b),pt(f,u,null),p(u,d),g(o,m,b),g(o,h,b),pt($,h,null),p(h,k),g(o,y,b),g(o,C,b),P=!0,L||(E=[S(r,"input",t[4]),S(s,"click",t[5]),S(u,"click",t[6]),S(h,"click",t[7])],L=!0)},p(t,e){1&e&&_(r.value)!==t[0].break&&D(r,t[0].break)},i(t){P||(st(l.$$.fragment,t),st(f.$$.fragment,t),st($.$$.fragment,t),P=!0)},o(t){lt(l.$$.fragment,t),lt(f.$$.fragment,t),lt($.$$.fragment,t),P=!1},d(t){t&&b(e),t&&b(n),t&&b(r),t&&b(i),t&&b(s),ht(l),t&&b(c),t&&b(u),ht(f),t&&b(m),t&&b(h),ht($),t&&b(y),t&&b(C),L=!1,o(E)}}}function Pe(t){let e,n,r,i,s,l,a,c,u,f,d,m,p=t[1]&&_e(t);return{c(){e=w("label"),e.textContent="Name",n=x(),r=w("input"),i=x(),s=w("label"),s.textContent="Kommentar",l=x(),a=w("textarea"),c=x(),p&&p.c(),u=y(),M(e,"for","name"),M(r,"id","name"),M(r,"type","text"),r.required=!0,M(s,"for","comment"),M(a,"id","comment"),M(a,"class","svelte-1er4ovm")},m(o,h){g(o,e,h),g(o,n,h),g(o,r,h),D(r,t[0].name),g(o,i,h),g(o,s,h),g(o,l,h),g(o,a,h),D(a,t[0].comment),g(o,c,h),p&&p.m(o,h),g(o,u,h),f=!0,d||(m=[S(r,"input",t[2]),S(a,"input",t[3])],d=!0)},p(t,e){1&e&&r.value!==t[0].name&&D(r,t[0].name),1&e&&D(a,t[0].comment),t[1]?p?(p.p(t,e),2&e&&st(p,1)):(p=_e(t),p.c(),st(p,1),p.m(u.parentNode,u)):p&&(ot(),lt(p,1,1,(()=>{p=null})),it())},i(t){f||(st(p),f=!0)},o(t){lt(p),f=!1},d(t){t&&b(e),t&&b(n),t&&b(r),t&&b(i),t&&b(s),t&&b(l),t&&b(a),t&&b(c),p&&p.d(t),t&&b(u),d=!1,o(m)}}}function De(t){let e,n;return e=new Yt({props:{title:"Wegpunkt bearbeiten",show:null!=t[0],$$slots:{default:[Pe]},$$scope:{ctx:t}}}),e.$on("close",t[8]),{c(){mt(e.$$.fragment)},m(t,r){pt(e,t,r),n=!0},p(t,[n]){const r={};1&n&&(r.show=null!=t[0]),515&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(st(e.$$.fragment,t),n=!0)},o(t){lt(e.$$.fragment,t),n=!1},d(t){ht(e,t)}}}function Le(t,e,n){let{marker:r}=e,{showBreak:o}=e;return t.$$set=t=>{"marker"in t&&n(0,r=t.marker),"showBreak"in t&&n(1,o=t.showBreak)},[r,o,function(){r.name=this.value,n(0,r)},function(){r.comment=this.value,n(0,r)},function(){r.break=_(this.value),n(0,r)},()=>n(0,r.break=0,r),()=>n(0,r.break=5,r),()=>n(0,r.break=15,r),function(e){G.call(this,t,e)}]}class Ee extends bt{constructor(t){super(),gt(this,t,Le,De,s,{marker:0,showBreak:1})}}function ze(t,e,n){const r=t.slice();return r[6]=e[n],r}function Fe(t){let e,n,r,o,i,s,l,a,c,u,f,d,m,h,$,k=Math.round(t[6].diff.height)+"",y=t[6].diff.distance.toFixed(1)+"",S=t[6].diff.effort.toFixed(1)+"",C=_t(t[6].diff.duration)+"";return{c(){e=w("td"),n=v(k),r=v(" m"),o=x(),i=w("td"),s=v(y),l=v(" km"),a=x(),c=w("td"),u=v(S),f=v(" Lkm"),d=x(),m=w("td"),h=v(C),$=v(" h"),M(e,"class","number svelte-it8kun"),M(i,"class","number svelte-it8kun"),M(c,"class","number svelte-it8kun"),M(m,"class","number svelte-it8kun")},m(t,b){g(t,e,b),p(e,n),p(e,r),g(t,o,b),g(t,i,b),p(i,s),p(i,l),g(t,a,b),g(t,c,b),p(c,u),p(c,f),g(t,d,b),g(t,m,b),p(m,h),p(m,$)},p(t,e){4&e&&k!==(k=Math.round(t[6].diff.height)+"")&&P(n,k),4&e&&y!==(y=t[6].diff.distance.toFixed(1)+"")&&P(s,y),4&e&&S!==(S=t[6].diff.effort.toFixed(1)+"")&&P(u,S),4&e&&C!==(C=_t(t[6].diff.duration)+"")&&P(h,C)},d(t){t&&b(e),t&&b(o),t&&b(i),t&&b(a),t&&b(c),t&&b(d),t&&b(m)}}}function Te(t){let e,n,r,o=_t(t[6].break/60)+"";return{c(){e=w("td"),n=v("+"),r=v(o),M(e,"class","number svelte-it8kun")},m(t,o){g(t,e,o),p(e,n),p(e,r)},p(t,e){4&e&&o!==(o=_t(t[6].break/60)+"")&&P(r,o)},d(t){t&&b(e)}}}function Ae(t){let e,n,r,o,i=t[6].comment+"";return{c(){e=w("tr"),n=w("td"),r=v(i),o=x(),M(n,"class","comment svelte-it8kun"),M(n,"colspan","100"),M(e,"class","alt comment svelte-it8kun")},m(t,i){g(t,e,i),p(e,n),p(n,r),p(e,o)},p(t,e){4&e&&i!==(i=t[6].comment+"")&&P(r,i)},d(t){t&&b(e)}}}function He(t){let e,n,r,o,i,s,l,a,c,u,f,d,m,h,$,k,C,_,D,L,E,z,F,T,A,H,j,q,N,G,R,W,O,B,I,K,J,X,U,V,Z,Q,Y=t[6].index+1+"",tt=t[6].name+"",et=Math.round(t[6].height)+"",nt=t[6].distance.toFixed(1)+"",rt=t[6].effort.toFixed(1)+"",ot=_t(t[6].duration)+"",it=Pt(t[6].time)+"",at=Mt(t[6].coordinates)+"";function ct(){return t[5](t[6])}N=new Ct({props:{name:"edit"}});let ut=t[6].diff&&Fe(t),ft=t[6].break>0&&Te(t),dt=t[6].comment&&Ae(t);return{c(){e=w("tr"),n=w("td"),r=w("span"),o=v(Y),i=x(),s=v(tt),l=x(),a=w("td"),c=v(et),u=v(" m"),f=x(),d=w("td"),m=v(nt),h=v(" km"),$=x(),k=w("td"),C=v(rt),_=v(" Lkm"),D=x(),L=w("td"),E=v(ot),z=v(" h"),F=x(),T=w("td"),A=v(it),H=x(),j=w("td"),q=w("button"),mt(N.$$.fragment),G=x(),R=w("tr"),W=w("td"),O=v(at),B=x(),ut&&ut.c(),I=x(),ft&&ft.c(),K=x(),J=w("td"),X=x(),dt&&dt.c(),U=y(),M(r,"class","pill svelte-it8kun"),M(n,"class","name svelte-it8kun"),M(a,"class","number svelte-it8kun"),M(d,"class","number svelte-it8kun"),M(k,"class","number svelte-it8kun"),M(L,"class","number svelte-it8kun"),M(T,"class","number svelte-it8kun"),M(q,"class","pill"),M(j,"class","noprint svelte-it8kun"),M(W,"class","coordinates svelte-it8kun"),M(J,"class","svelte-it8kun"),M(R,"class","alt svelte-it8kun")},m(t,b){g(t,e,b),p(e,n),p(n,r),p(r,o),p(n,i),p(n,s),p(e,l),p(e,a),p(a,c),p(a,u),p(e,f),p(e,d),p(d,m),p(d,h),p(e,$),p(e,k),p(k,C),p(k,_),p(e,D),p(e,L),p(L,E),p(L,z),p(e,F),p(e,T),p(T,A),p(e,H),p(e,j),p(j,q),pt(N,q,null),g(t,G,b),g(t,R,b),p(R,W),p(W,O),p(R,B),ut&&ut.m(R,null),p(R,I),ft&&ft.m(R,null),p(R,K),p(R,J),g(t,X,b),dt&&dt.m(t,b),g(t,U,b),V=!0,Z||(Q=S(q,"click",ct),Z=!0)},p(e,n){t=e,(!V||4&n)&&Y!==(Y=t[6].index+1+"")&&P(o,Y),(!V||4&n)&&tt!==(tt=t[6].name+"")&&P(s,tt),(!V||4&n)&&et!==(et=Math.round(t[6].height)+"")&&P(c,et),(!V||4&n)&&nt!==(nt=t[6].distance.toFixed(1)+"")&&P(m,nt),(!V||4&n)&&rt!==(rt=t[6].effort.toFixed(1)+"")&&P(C,rt),(!V||4&n)&&ot!==(ot=_t(t[6].duration)+"")&&P(E,ot),(!V||4&n)&&it!==(it=Pt(t[6].time)+"")&&P(A,it),(!V||4&n)&&at!==(at=Mt(t[6].coordinates)+"")&&P(O,at),t[6].diff?ut?ut.p(t,n):(ut=Fe(t),ut.c(),ut.m(R,I)):ut&&(ut.d(1),ut=null),t[6].break>0?ft?ft.p(t,n):(ft=Te(t),ft.c(),ft.m(R,K)):ft&&(ft.d(1),ft=null),t[6].comment?dt?dt.p(t,n):(dt=Ae(t),dt.c(),dt.m(U.parentNode,U)):dt&&(dt.d(1),dt=null)},i(t){V||(st(N.$$.fragment,t),V=!0)},o(t){lt(N.$$.fragment,t),V=!1},d(t){t&&b(e),ht(N),t&&b(G),t&&b(R),ut&&ut.d(),ft&&ft.d(),t&&b(X),dt&&dt.d(t),t&&b(U),Z=!1,Q()}}}function je(t){let e,n,r,o,i,s;e=new Ee({props:{marker:t[1],showBreak:t[3]}}),e.$on("close",t[4]);let l=t[2],a=[];for(let e=0;e<l.length;e+=1)a[e]=He(ze(t,l,e));const c=t=>lt(a[t],1,1,(()=>{a[t]=null}));return{c(){mt(e.$$.fragment),n=x(),r=w("table"),o=w("tr"),o.innerHTML='<th class="svelte-it8kun">Wegpunkt<br/>Kommentar</th> \n        <th class="svelte-it8kun">Höhe</th> \n        <th class="svelte-it8kun">Distanz</th> \n        <th class="svelte-it8kun">Aufwand</th> \n        <th class="svelte-it8kun">Gehzeit</th> \n        <th class="svelte-it8kun">Uhrzeit<br/>Pause</th>',i=x();for(let t=0;t<a.length;t+=1)a[t].c();M(r,"class","svelte-it8kun")},m(t,l){pt(e,t,l),g(t,n,l),g(t,r,l),p(r,o),p(r,i);for(let t=0;t<a.length;t+=1)a[t]&&a[t].m(r,null);s=!0},p(t,[n]){const o={};if(2&n&&(o.marker=t[1]),8&n&&(o.showBreak=t[3]),e.$set(o),7&n){let e;for(l=t[2],e=0;e<l.length;e+=1){const o=ze(t,l,e);a[e]?(a[e].p(o,n),st(a[e],1)):(a[e]=He(o),a[e].c(),st(a[e],1),a[e].m(r,null))}for(ot(),e=l.length;e<a.length;e+=1)c(e);it()}},i(t){if(!s){st(e.$$.fragment,t);for(let t=0;t<l.length;t+=1)st(a[t]);s=!0}},o(t){lt(e.$$.fragment,t),a=a.filter(Boolean);for(let t=0;t<a.length;t+=1)lt(a[t]);s=!1},d(t){ht(e,t),t&&b(n),t&&b(r),k(a,t)}}}function qe(t,e,n){let r,o,{route:i}=e,s=[];return t.$$set=t=>{"route"in t&&n(0,i=t.route)},t.$$.update=()=>{1&t.$$.dirty&&n(2,s=Kt(i)),3&t.$$.dirty&&n(3,r=o!==i.markers[i.markers.length-1])},[i,o,s,r,function(){Ot(i),n(0,i),n(1,o=null)},t=>n(1,o=i.markers[t.index])]}class Ne extends bt{constructor(t){super(),gt(this,t,qe,je,s,{route:0})}}function Ge(t){let e,n,r;return e=new Ct({props:{name:"visibility"}}),{c(){mt(e.$$.fragment),n=v(" Anzeigen")},m(t,o){pt(e,t,o),g(t,n,o),r=!0},i(t){r||(st(e.$$.fragment,t),r=!0)},o(t){lt(e.$$.fragment,t),r=!1},d(t){ht(e,t),t&&b(n)}}}function Re(t){let e,n,r;return e=new Ct({props:{name:"visibility_off"}}),{c(){mt(e.$$.fragment),n=v(" Ausblenden")},m(t,o){pt(e,t,o),g(t,n,o),r=!0},i(t){r||(st(e.$$.fragment,t),r=!0)},o(t){lt(e.$$.fragment,t),r=!1},d(t){ht(e,t),t&&b(n)}}}function We(t){let e,n,r,o;return n=new Me({props:{route:t[0]}}),{c(){e=w("div"),mt(n.$$.fragment)},m(t,r){g(t,e,r),pt(n,e,null),o=!0},p(t,e){const r={};1&e&&(r.route=t[0]),n.$set(r)},i(t){o||(st(n.$$.fragment,t),J((()=>{o&&(r||(r=ut(e,vt,{duration:100},!0)),r.run(1))})),o=!0)},o(t){lt(n.$$.fragment,t),r||(r=ut(e,vt,{duration:100},!1)),r.run(0),o=!1},d(t){t&&b(e),ht(n),t&&r&&r.end()}}}function Oe(t){let e,n,r,i,s,l,a,c,u,f,d,m,h,$,k,y,C,_,P,L,z,F,T,A,H,j,q,N,G,R,O,B;function I(e){t[4](e)}a=new Ct({props:{name:"edit"}});let K={};function J(e){t[5](e)}void 0!==t[0]&&(K.route=t[0]),$=new ve({props:K}),W.push((()=>dt($,"route",I)));let U={};void 0!==t[0]&&(U.route=t[0]),L=new Ne({props:U}),W.push((()=>dt(L,"route",J)));const V=[Re,Ge],Z=[];function Q(t,e){return t[1]?0:1}q=Q(t),N=Z[q]=V[q](t);let Y=t[1]&&We(t);return{c(){e=w("div"),n=w("h1"),r=w("input"),i=x(),s=w("div"),l=w("button"),mt(a.$$.fragment),c=v(" Titel bearbeiten"),u=x(),f=w("br"),d=x(),m=w("br"),h=x(),mt($.$$.fragment),y=x(),C=w("div"),_=w("h2"),_.textContent="Marschzeittabelle",P=x(),mt(L.$$.fragment),F=x(),T=w("div"),A=w("h2"),A.textContent="Höhenprofil",H=x(),j=w("button"),N.c(),G=x(),Y&&Y.c(),M(r,"id","title"),M(r,"type","text"),M(r,"class","svelte-a9c1ov"),M(n,"class","svelte-a9c1ov"),M(l,"class","pill"),M(s,"class","noprint"),M(e,"class","options"),M(_,"class","svelte-a9c1ov"),M(C,"class","table svelte-a9c1ov"),M(A,"class","svelte-a9c1ov"),M(j,"class","pill noprint svelte-a9c1ov"),M(T,"class","profile svelte-a9c1ov"),E(T,"noprint",!t[1])},m(o,b){g(o,e,b),p(e,n),p(n,r),D(r,t[0].title),p(e,i),p(e,s),p(s,l),pt(a,l,null),p(l,c),p(s,u),p(s,f),p(s,d),p(s,m),p(e,h),pt($,e,null),g(o,y,b),g(o,C,b),p(C,_),p(C,P),pt(L,C,null),g(o,F,b),g(o,T,b),p(T,A),p(T,H),p(T,j),Z[q].m(j,null),p(T,G),Y&&Y.m(T,null),R=!0,O||(B=[S(r,"input",t[2]),S(l,"click",t[3]),S(j,"click",t[6])],O=!0)},p(t,[e]){1&e&&r.value!==t[0].title&&D(r,t[0].title);const n={};!k&&1&e&&(k=!0,n.route=t[0],X((()=>k=!1))),$.$set(n);const o={};!z&&1&e&&(z=!0,o.route=t[0],X((()=>z=!1))),L.$set(o);let i=q;q=Q(t),q!==i&&(ot(),lt(Z[i],1,1,(()=>{Z[i]=null})),it(),N=Z[q],N||(N=Z[q]=V[q](t),N.c()),st(N,1),N.m(j,null)),t[1]?Y?(Y.p(t,e),2&e&&st(Y,1)):(Y=We(t),Y.c(),st(Y,1),Y.m(T,null)):Y&&(ot(),lt(Y,1,1,(()=>{Y=null})),it()),(!R||2&e)&&E(T,"noprint",!t[1])},i(t){R||(st(a.$$.fragment,t),st($.$$.fragment,t),st(L.$$.fragment,t),st(N),st(Y),R=!0)},o(t){lt(a.$$.fragment,t),lt($.$$.fragment,t),lt(L.$$.fragment,t),lt(N),lt(Y),R=!1},d(t){t&&b(e),ht(a),ht($),t&&b(y),t&&b(C),ht(L),t&&b(F),t&&b(T),Z[q].d(),Y&&Y.d(),O=!1,o(B)}}}function Be(t,e,n){let{route:r}=e,o=!0;return t.$$set=t=>{"route"in t&&n(0,r=t.route)},t.$$.update=()=>{1&t.$$.dirty&&function(t){const e={line:t.line,mapScale:t.mapScale,markers:t.markers,speed:t.speed,start:t.start,title:t.title,timestamp:Date.now()};localStorage.setItem(xt,JSON.stringify(e))}(r)},[r,o,function(){r.title=this.value,n(0,r)},()=>document.getElementById("title").select(),function(t){r=t,n(0,r)},function(t){r=t,n(0,r)},()=>n(1,o=!o)]}class Ie extends bt{constructor(t){super(),gt(this,t,Be,Oe,s,{route:0})}}function Ke(e){let n,r,o,i,s,l,a,c,u,f,d,m,h,$,k,y,S,C,_,P,D,L,E,z,F,T;return a=new Ct({props:{name:"draw",big:!0}}),h=new Ct({props:{name:"output",big:!0}}),S=new Ut({props:{topic:"export",label:"Wie geht das?"}}),D=new Ct({props:{name:"upload_file",big:!0}}),{c(){n=w("div"),n.innerHTML='<h1 class="svelte-12swpck">Marschzeit­tabelle<br/>leicht gemacht.</h1> \n    <h2 class="svelte-12swpck">Übertrage deine Route automatisch in eine Marschzeittabelle.</h2>',r=x(),o=w("div"),i=w("div"),s=w("h2"),l=v("1. Planen "),mt(a.$$.fragment),c=x(),u=w("p"),u.textContent="Route einzeichnen und Wegpunkte benennen - das kennst du bereits.",f=x(),d=w("h2"),m=v("2. Exportieren "),mt(h.$$.fragment),$=x(),k=w("p"),y=v("In wenigen Klicks erledigt. "),mt(S.$$.fragment),C=x(),_=w("h2"),P=v("3. Hochladen "),mt(D.$$.fragment),L=x(),E=w("p"),E.textContent="Jetzt noch Geschwindigkeit, Abreisezeit, Kommentare und Pausen anpassen.",z=x(),F=w("video"),F.innerHTML='<source src="recording.webm"/>',M(n,"class","title svelte-12swpck"),M(s,"class","svelte-12swpck"),M(u,"class","svelte-12swpck"),M(d,"class","svelte-12swpck"),M(k,"class","svelte-12swpck"),M(_,"class","svelte-12swpck"),M(E,"class","svelte-12swpck"),M(i,"class","steps svelte-12swpck"),F.autoplay=!0,F.controls=!0,F.loop=!0,F.muted=!0,M(F,"class","svelte-12swpck"),M(o,"class","tutorial svelte-12swpck")},m(t,e){g(t,n,e),g(t,r,e),g(t,o,e),p(o,i),p(i,s),p(s,l),pt(a,s,null),p(i,c),p(i,u),p(i,f),p(i,d),p(d,m),pt(h,d,null),p(i,$),p(i,k),p(k,y),pt(S,k,null),p(i,C),p(i,_),p(_,P),pt(D,_,null),p(i,L),p(i,E),p(o,z),p(o,F),T=!0},p:t,i(t){T||(st(a.$$.fragment,t),st(h.$$.fragment,t),st(S.$$.fragment,t),st(D.$$.fragment,t),T=!0)},o(t){lt(a.$$.fragment,t),lt(h.$$.fragment,t),lt(S.$$.fragment,t),lt(D.$$.fragment,t),T=!1},d(t){t&&b(n),t&&b(r),t&&b(o),ht(a),ht(h),ht(S),ht(D)}}}class Je extends bt{constructor(t){super(),gt(this,t,null,Ke,s,{})}}class Xe{static WGStoCH(t,e){return[this.WGStoCHy(t,e),this.WGStoCHx(t,e)]}static WGStoCHx(t,e){const n=((t=this.DECtoSEX(t))-169028.66)/1e4,r=((e=this.DECtoSEX(e))-26782.5)/1e4;return 200147.07+308807.95*n+3745.25*Math.pow(r,2)+76.63*Math.pow(n,2)-194.56*Math.pow(r,2)*n+119.79*Math.pow(n,3)}static WGStoCHy(t,e){const n=((t=this.DECtoSEX(t))-169028.66)/1e4,r=((e=this.DECtoSEX(e))-26782.5)/1e4;return 600072.37+211455.93*r-10938.51*r*n-.36*r*Math.pow(n,2)-44.54*Math.pow(r,3)}static CHtoWGS(t,e){return[this.CHtoWGSlng(t,e),this.CHtoWGSlat(t,e)]}static CHtoWGSlat(t,e){const n=(t-6e5)/1e6,r=(e-2e5)/1e6;return 100*(16.9023892+3.238272*r-.270978*Math.pow(n,2)-.002528*Math.pow(r,2)-.0447*Math.pow(n,2)*r-.014*Math.pow(r,3))/36}static CHtoWGSlng(t,e){const n=(t-6e5)/1e6,r=(e-2e5)/1e6;return 100*(2.6779094+4.728982*n+.791484*n*r+.1306*n*Math.pow(r,2)-.0436*Math.pow(n,3))/36}static DECtoSEX(t){const e=parseInt(t),n=parseInt(60*(t-e));return 60*(60*(t-e)-n)+60*n+3600*e}}const Ue=10;function Ve(t){return function(t){return new Promise(((e,n)=>{const r=new FileReader;r.addEventListener("load",(()=>e(r.result))),r.addEventListener("error",n),r.readAsText(t)}))}(t).then((t=>async function(t){const e=(new DOMParser).parseFromString(t,"application/xml");if(e.querySelector("parsererror"))throw{id:"invalid-xml",message:"Die Datei ist nicht in gültigem XML-Format."};return e}(t)),(()=>{throw{id:"file-error",message:"Die Datei konnte nicht gelesen werden."}})).then((e=>t.name.endsWith(".kml")?async function(t){const e=[],n=[],r=t=>{const[e,n]=t.split(",");return Ze(n,e)},o=t.querySelectorAll("Placemark");for(let t of o){if(t.querySelector("LineString, LinearRing")){const n=t.querySelector(":is(LineString, LinearRing) coordinates").innerHTML.trim().split(" ").map((t=>r(t)));e.push(n)}if(t.querySelector("Point")){const e=t.querySelector("name").innerHTML.trim(),o=t.querySelector("description")?.innerHTML?.trim(),i=r(t.querySelector("Point coordinates").innerHTML);n.push({name:e,comment:o,point:i})}}return{lines:e,markers:n}}(e):t.name.endsWith(".gpx")?async function(t){const e=[],n=[],r=t=>Ze(t.getAttribute("lat"),t.getAttribute("lon")),o=t.querySelectorAll("trkseg");for(let t of o){const n=Array.from(t.querySelectorAll("trkpt")).map((t=>r(t)));e.push(n)}const i=t.querySelectorAll("trkpt > name");for(let t of i){const e=t.parentElement,o=t.innerHTML.trim(),i=e.querySelector("desc")?.innerHTML?.trim(),s=r(e);n.push({name:o,comment:i,point:s})}if(0===n.length){const e=t.querySelectorAll("wpt");for(let t of e){const e=t.querySelector("name").innerHTML.trim(),o=r(t);n.push({name:e,point:o})}}return{lines:e,markers:n}}(e):void 0)).then((({lines:e,markers:n})=>async function(t,e,n){if(0===t.length)throw{id:"no-line",message:"Die Route enthält keine Linie."};if(e.length<2)throw{id:"no-markers",message:"Die Route enthält weniger als zwei Wegpunkte."};for(;t.length>1;){const e=Qe(t);if(null==e)throw{id:"disjoint-lines",message:"Die Route enthält Linien, die nicht miteinander verbunden sind."};e.reverseFirst&&t[e.i].reverse(),e.reverseSecond&&t[e.j].reverse(),t[e.i].push(...t[e.j]),t.splice(e.j,1)}const r=t[0];let o=null;for(let t=0;t<r.length;t++){const n=e.filter((t=>null==o||!Ft(t.point,o))).filter((e=>Tt(e.point,r[t])<Ue));if(0===n.length)continue;const i=n[0],s=n.filter((t=>null==t.index&&t!==i));if(e=e.filter((t=>!s.includes(t))),null==i.index)i.index=t;else{const n=Object.assign({},i);n.index=t,e.push(n)}o=i.point}const i=e.filter((t=>null==t.index));if(i.length>0){throw{id:"marker-not-on-line",message:`Wegpunkte nicht in der Nähe von Eckpunkten der Linie: ${i.map((t=>t.name?`"${t.name}"`:Mt(t.point))).join(", ")}.`}}e.sort(((t,e)=>t.index-e.index));for(let t of e)t.break=0;const s=n.substring(0,n.lastIndexOf("."))||n;return{line:r,mapScale:25,markers:e,speed:4,start:0,title:s}}(e,n,t.name))).then((t=>Gt(t)))}function Ze(t,e){const[n,r]=Xe.WGStoCH(Number(t),Number(e));return{x:n,y:r}}function Qe(t){const e=(t,e)=>Tt(t,e)<Ue;for(let n=0;n<t.length;n++)for(let r=n+1;r<t.length;r++){if(e(t[n][t[n].length-1],t[r][0]))return{i:n,j:r,reverseFirst:!1,reverseSecond:!1};if(e(t[n][0],t[r][t[r].length-1]))return{i:n,j:r,reverseFirst:!0,reverseSecond:!0};if(e(t[n][0],t[r][0]))return{i:n,j:r,reverseFirst:!0,reverseSecond:!1};if(e(t[n][t[n].length-1],t[r][t[r].length-1]))return{i:n,j:r,reverseFirst:!1,reverseSecond:!0}}return null}function Ye(t){let e,n,r,o,i={ctx:t,current:null,token:null,hasCatch:!0,pending:rn,then:nn,catch:en,error:11,blocks:[,,,]};return ft(n=t[1],i),{c(){e=w("div"),i.block.c(),M(e,"class","message svelte-jxf9x4")},m(t,n){g(t,e,n),i.block.m(e,i.anchor=null),i.mount=()=>e,i.anchor=null,o=!0},p(e,r){t=e,i.ctx=t,2&r&&n!==(n=t[1])&&ft(n,i)||function(t,e,n){const r=e.slice(),{resolved:o}=t;t.current===t.then&&(r[t.value]=o),t.current===t.catch&&(r[t.error]=o),t.block.p(r,n)}(i,t,r)},i(t){o||(st(i.block),r||J((()=>{r=ct(e,wt,{duration:100}),r.start()})),o=!0)},o(t){for(let t=0;t<3;t+=1){lt(i.blocks[t])}o=!1},d(t){t&&b(e),i.block.d(),i.token=null,i=null}}}function tn(e){let n,r,i,s,l,a,c,u,f,d,m,h,$,k,y,_,P,D;h=new Ct({props:{name:"upload_file"}});let L=e[2]&&function(e){let n,r,o,i,s,l,a,c,u,f,d,m,h,$,k,y,C,_=function(t){const e=(Date.now()-t)/1e3/60,n=e/60,r=n/24,o=r/30,i=o/12;return e<1?"gerade eben":n<1?`vor ${Math.round(e)} Minuten`:r<1?`vor ${Math.round(n)} Stunden`:o<1?`vor ${Math.round(r)} Tagen`:i<1?`vor ${Math.round(o)} Monaten`:`vor ${Math.round(i)} Jahren`}(e[2].timestamp)+"";return c=new Ct({props:{name:"schedule"}}),h=new Ct({props:{name:"file_open"}}),{c(){n=w("div"),r=w("h2"),r.textContent="Zuletzt bearbeitet",o=x(),i=w("p"),s=w("b"),s.textContent=`"${e[2].title}"`,l=w("br"),a=x(),mt(c.$$.fragment),u=x(),f=v(_),d=x(),m=w("button"),mt(h.$$.fragment),$=v(" Öffnen"),M(r,"class","svelte-jxf9x4"),M(m,"class","secondary"),M(n,"class","recent svelte-jxf9x4")},m(t,b){g(t,n,b),p(n,r),p(n,o),p(n,i),p(i,s),p(i,l),p(i,a),pt(c,i,null),p(i,u),p(i,f),p(n,d),p(n,m),pt(h,m,null),p(m,$),k=!0,y||(C=S(m,"click",e[3]),y=!0)},p:t,i(t){k||(st(c.$$.fragment,t),st(h.$$.fragment,t),k=!0)},o(t){lt(c.$$.fragment,t),lt(h.$$.fragment,t),k=!1},d(t){t&&b(n),ht(c),ht(h),y=!1,C()}}}(e);return{c(){n=w("div"),r=w("div"),i=w("h2"),i.textContent="Route hochladen",s=x(),l=w("p"),l.innerHTML='Unterstützt sind <b>KML-Dateien</b> von <a href="https://map.geo.admin.ch" target="_blank">map.geo.admin.ch</a> oder der <a href="https://www.swisstopo.admin.ch/en/maps-data-online/maps-geodata-online/swisstopo-app.html" target="_blank">swisstopo-App</a>, sowie <b>GPX-Dateien</b> von <a href="https://www.outdooractive.com/de/routeplanner" target="_blank">outdooractive.com</a>.',a=x(),c=w("p"),c.textContent="Datei hierher ziehen oder...",u=x(),f=w("input"),d=x(),m=w("button"),mt(h.$$.fragment),$=v(" Datei auswählen"),k=x(),L&&L.c(),M(i,"class","svelte-jxf9x4"),M(f,"type","file"),M(f,"id","upload"),M(f,"accept",".kml, .gpx"),M(f,"class","svelte-jxf9x4"),M(r,"class","upload svelte-jxf9x4"),M(n,"class","import svelte-jxf9x4")},m(t,o){g(t,n,o),p(n,r),p(r,i),p(r,s),p(r,l),p(r,a),p(r,c),p(r,u),p(r,f),p(r,d),p(r,m),pt(h,m,null),p(m,$),p(n,k),L&&L.m(n,null),_=!0,P||(D=[S(f,"change",e[7]),S(m,"click",e[8]),S(r,"drop",C(e[9])),S(r,"dragover",C(e[6]))],P=!0)},p(t,e){t[2]&&L.p(t,e)},i(t){_||(st(h.$$.fragment,t),st(L),y||J((()=>{y=ct(n,wt,{duration:100}),y.start()})),_=!0)},o(t){lt(h.$$.fragment,t),lt(L),_=!1},d(t){t&&b(n),ht(h),L&&L.d(),P=!1,o(D)}}}function en(t){let e,n,r,o,i,s,l,a,c,u,f,d,m,h,$,k=t[11].message+"";return f=new Ct({props:{name:"refresh"}}),{c(){e=w("h2"),e.textContent="Hoppla!",n=x(),r=w("p"),o=v("Es gab einen Fehler beim Import:"),i=w("br"),s=x(),l=w("b"),a=v(k),c=x(),u=w("button"),mt(f.$$.fragment),d=v(" Nochmal versuchen"),M(e,"class","svelte-jxf9x4"),M(u,"class","secondary")},m(b,k){g(b,e,k),g(b,n,k),g(b,r,k),p(r,o),p(r,i),p(r,s),p(r,l),p(l,a),g(b,c,k),g(b,u,k),pt(f,u,null),p(u,d),m=!0,h||($=S(u,"click",t[4]),h=!0)},p(t,e){(!m||2&e)&&k!==(k=t[11].message+"")&&P(a,k)},i(t){m||(st(f.$$.fragment,t),m=!0)},o(t){lt(f.$$.fragment,t),m=!1},d(t){t&&b(e),t&&b(n),t&&b(r),t&&b(c),t&&b(u),ht(f),h=!1,$()}}}function nn(e){return{c:t,m:t,p:t,i:t,o:t,d:t}}function rn(e){let n,r,o,i,s,l;return s=new ue({}),{c(){n=w("h2"),n.textContent="Route wird gewandert...",r=x(),o=w("br"),i=x(),mt(s.$$.fragment),M(n,"class","svelte-jxf9x4")},m(t,e){g(t,n,e),g(t,r,e),g(t,o,e),g(t,i,e),pt(s,t,e),l=!0},p:t,i(t){l||(st(s.$$.fragment,t),l=!0)},o(t){lt(s.$$.fragment,t),l=!1},d(t){t&&b(n),t&&b(r),t&&b(o),t&&b(i),ht(s,t)}}}function on(t){let e,n,r,o;const i=[tn,Ye],s=[];function l(t,e){return null==t[1]?0:1}return e=l(t),n=s[e]=i[e](t),{c(){n.c(),r=y()},m(t,n){s[e].m(t,n),g(t,r,n),o=!0},p(t,[o]){let a=e;e=l(t),e===a?s[e].p(t,o):(ot(),lt(s[a],1,1,(()=>{s[a]=null})),it(),n=s[e],n?n.p(t,o):(n=s[e]=i[e](t),n.c()),st(n,1),n.m(r.parentNode,r))},i(t){o||(st(n),o=!0)},o(t){lt(n),o=!1},d(t){s[e].d(t),t&&b(r)}}}function sn(t,e,n){let r,o,{route:i=null}=e,s=function(){try{return JSON.parse(localStorage.getItem(xt))}catch{return null}}();function l(t){return t.then((t=>new Promise((e=>{Et("import-success"),setTimeout((()=>e(t)),500)})))).then((t=>n(5,i=t))).catch((t=>{throw zt(t.id),t}))}return t.$$set=t=>{"route"in t&&n(5,i=t.route)},t.$$.update=()=>{1&t.$$.dirty&&r&&r[0]&&(Et("upload-file"),n(1,o=l(Ve(r[0]))))},[r,o,s,function(){Et("open-recent"),n(1,o=l(Gt(s)))},function(){n(0,r=null),n(1,o=null)},i,function(e){G.call(this,t,e)},function(){r=this.files,n(0,r)},()=>document.getElementById("upload").click(),t=>n(0,r=t.dataTransfer.files)]}class ln extends bt{constructor(t){super(),gt(this,t,sn,on,s,{route:5})}}function an(t){let e,n,r,o,i,s,l;function a(e){t[2](e)}let c={};return void 0!==t[0]&&(c.route=t[0]),o=new Ie({props:c}),W.push((()=>dt(o,"route",a))),{c(){e=w("header"),e.innerHTML='<a href=".">❮ startseite</a>',n=x(),r=w("main"),mt(o.$$.fragment),M(e,"class","noprint")},m(t,i){g(t,e,i),g(t,n,i),g(t,r,i),pt(o,r,null),l=!0},p(t,e){const n={};!i&&1&e&&(i=!0,n.route=t[0],X((()=>i=!1))),o.$set(n)},i(t){l||(st(o.$$.fragment,t),J((()=>{l&&(s||(s=ut(r,wt,{},!0)),s.run(1))})),l=!0)},o(t){lt(o.$$.fragment,t),s||(s=ut(r,wt,{},!1)),s.run(0),l=!1},d(t){t&&b(e),t&&b(n),t&&b(r),ht(o),t&&s&&s.end()}}}function cn(t){let e,n,r,o,i,s;function l(e){t[1](e)}n=new Je({});let a={};return void 0!==t[0]&&(a.route=t[0]),o=new ln({props:a}),W.push((()=>dt(o,"route",l))),{c(){e=w("main"),mt(n.$$.fragment),r=x(),mt(o.$$.fragment)},m(t,i){g(t,e,i),pt(n,e,null),p(e,r),pt(o,e,null),s=!0},p(t,e){const n={};!i&&1&e&&(i=!0,n.route=t[0],X((()=>i=!1))),o.$set(n)},i(t){s||(st(n.$$.fragment,t),st(o.$$.fragment,t),s=!0)},o(t){lt(n.$$.fragment,t),lt(o.$$.fragment,t),s=!1},d(t){t&&b(e),ht(n),ht(o)}}}function un(t){let e,n,r,o,i,s,l;document.title=e=(null==t[0]?"":`${t[0].title} - `)+"Marschzeittabelle";const a=[cn,an],c=[];function u(t,e){return null==t[0]?0:1}return r=u(t),o=c[r]=a[r](t),{c(){n=x(),o.c(),i=x(),s=w("footer"),s.innerHTML='<span>marschzeittabelle.ch</span> \n    <span class="noprint">| <a href="help" target="_blank">hilfe</a>\n        | <a href="https://github.com/ckolin/marschzeittabelle" target="_blank">quellcode</a></span>',M(s,"class","svelte-1pxn2rk")},m(t,e){g(t,n,e),c[r].m(t,e),g(t,i,e),g(t,s,e),l=!0},p(t,[n]){(!l||1&n)&&e!==(e=(null==t[0]?"":`${t[0].title} - `)+"Marschzeittabelle")&&(document.title=e);let s=r;r=u(t),r===s?c[r].p(t,n):(ot(),lt(c[s],1,1,(()=>{c[s]=null})),it(),o=c[r],o?o.p(t,n):(o=c[r]=a[r](t),o.c()),st(o,1),o.m(i.parentNode,i))},i(t){l||(st(o),l=!0)},o(t){lt(o),l=!1},d(t){t&&b(n),c[r].d(t),t&&b(i),t&&b(s)}}}function fn(t,e,n){let r;return[r,function(t){r=t,n(0,r)},function(t){r=t,n(0,r)}]}return new class extends bt{constructor(t){super(),gt(this,t,fn,un,s,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
