var app=function(){"use strict";function t(){}const e=t=>t;function n(t){return t()}function r(){return Object.create(null)}function o(t){t.forEach(n)}function i(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let l;function c(t,e,n,r){return t[1]&&r?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](r(e))):n.ctx}const a="undefined"!=typeof window;let u=a?()=>window.performance.now():()=>Date.now(),f=a?t=>requestAnimationFrame(t):t;const d=new Set;function h(t){d.forEach((e=>{e.c(t)||(d.delete(e),e.f())})),0!==d.size&&f(h)}function m(t,e){t.appendChild(e)}function p(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function g(t){const e=v("style");return function(t,e){m(t.head||t,e)}(p(t),e),e.sheet}function $(t,e,n){t.insertBefore(e,n||null)}function b(t){t.parentNode.removeChild(t)}function v(t){return document.createElement(t)}function x(t){return document.createTextNode(t)}function k(){return x(" ")}function y(){return x("")}function w(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function S(t){return function(e){return e.preventDefault(),t.call(this,e)}}function C(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function M(t){return""===t?null:+t}function q(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function E(t,e){t.value=null==e?"":e}const P=new Map;let z,D=0;function L(t,e,n,r,o,i,s,l=0){const c=16.666/r;let a="{\n";for(let t=0;t<=1;t+=c){const r=e+(n-e)*i(t);a+=100*t+`%{${s(r,1-r)}}\n`}const u=a+`100% {${s(n,1-n)}}\n}`,f=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(u)}_${l}`,d=p(t),{stylesheet:h,rules:m}=P.get(d)||function(t,e){const n={stylesheet:g(e),rules:{}};return P.set(t,n),n}(d,t);m[f]||(m[f]=!0,h.insertRule(`@keyframes ${f} ${u}`,h.cssRules.length));const $=t.style.animation||"";return t.style.animation=`${$?`${$}, `:""}${f} ${r}ms linear ${o}ms 1 both`,D+=1,f}function _(t,e){const n=(t.style.animation||"").split(", "),r=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),o=n.length-r.length;o&&(t.style.animation=r.join(", "),D-=o,D||f((()=>{D||(P.forEach((t=>{const{stylesheet:e}=t;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.rules={}})),P.clear())})))}function A(t){z=t}function H(){if(!z)throw new Error("Function called outside component initialization");return z}function T(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const F=[],j=[],W=[],R=[],N=Promise.resolve();let G=!1;function O(t){W.push(t)}function B(t){R.push(t)}const U=new Set;let X,I=0;function K(){const t=z;do{for(;I<F.length;){const t=F[I];I++,A(t),J(t.$$)}for(A(null),F.length=0,I=0;j.length;)j.pop()();for(let t=0;t<W.length;t+=1){const e=W[t];U.has(e)||(U.add(e),e())}W.length=0}while(F.length);for(;R.length;)R.pop()();G=!1,U.clear(),A(t)}function J(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(O)}}function V(t,e,n){t.dispatchEvent(function(t,e,n=!1){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,n,!1,e),r}(`${e?"intro":"outro"}${n}`))}const Z=new Set;let Q;function Y(){Q={r:0,c:[],p:Q}}function tt(){Q.r||o(Q.c),Q=Q.p}function et(t,e){t&&t.i&&(Z.delete(t),t.i(e))}function nt(t,e,n,r){if(t&&t.o){if(Z.has(t))return;Z.add(t),Q.c.push((()=>{Z.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}const rt={duration:0};function ot(n,r,s,l){let c=r(n,s),a=l?0:1,m=null,p=null,g=null;function $(){g&&_(n,g)}function b(t,e){const n=t.b-a;return e*=Math.abs(n),{a:a,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function v(r){const{delay:i=0,duration:s=300,easing:l=e,tick:v=t,css:x}=c||rt,k={start:u()+i,b:r};r||(k.group=Q,Q.r+=1),m||p?p=k:(x&&($(),g=L(n,a,r,s,i,l,x)),r&&v(0,1),m=b(k,s),O((()=>V(n,r,"start"))),function(t){let e;0===d.size&&f(h),new Promise((n=>{d.add(e={c:t,f:n})}))}((t=>{if(p&&t>p.start&&(m=b(p,s),p=null,V(n,m.b,"start"),x&&($(),g=L(n,a,m.b,m.duration,0,l,c.css))),m)if(t>=m.end)v(a=m.b,1-a),V(n,m.b,"end"),p||(m.b?$():--m.group.r||o(m.group.c)),m=null;else if(t>=m.start){const e=t-m.start;a=m.a+m.d*l(e/m.duration),v(a,1-a)}return!(!m&&!p)})))}return{run(t){i(c)?(X||(X=Promise.resolve(),X.then((()=>{X=null}))),X).then((()=>{c=c(),v(t)})):v(t)},end(){$(),m=p=null}}}function it(t,e){const n=e.token={};function r(t,r,o,i){if(e.token!==n)return;e.resolved=i;let s=e.ctx;void 0!==o&&(s=s.slice(),s[o]=i);const l=t&&(e.current=t)(s);let c=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==r&&t&&(Y(),nt(t,1,1,(()=>{e.blocks[n]===t&&(e.blocks[n]=null)})),tt())})):e.block.d(1),l.c(),et(l,1),l.m(e.mount(),e.anchor),c=!0),e.block=l,e.blocks&&(e.blocks[r]=l),c&&K()}if((o=t)&&"object"==typeof o&&"function"==typeof o.then){const n=H();if(t.then((t=>{A(n),r(e.then,1,e.value,t),A(null)}),(t=>{if(A(n),r(e.catch,2,e.error,t),A(null),!e.hasCatch)throw t})),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}var o}function st(t,e,n){const r=t.$$.props[e];void 0!==r&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function lt(t){t&&t.c()}function ct(t,e,r,s){const{fragment:l,on_mount:c,on_destroy:a,after_update:u}=t.$$;l&&l.m(e,r),s||O((()=>{const e=c.map(n).filter(i);a?a.push(...e):o(e),t.$$.on_mount=[]})),u.forEach(O)}function at(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function ut(t,e){-1===t.$$.dirty[0]&&(F.push(t),G||(G=!0,N.then(K)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ft(e,n,i,s,l,c,a,u=[-1]){const f=z;A(e);const d=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:l,bound:r(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(f?f.$$.context:[])),callbacks:r(),dirty:u,skip_bound:!1,root:n.target||f.$$.root};a&&a(d.root);let h=!1;if(d.ctx=i?i(e,n.props||{},((t,n,...r)=>{const o=r.length?r[0]:n;return d.ctx&&l(d.ctx[t],d.ctx[t]=o)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](o),h&&ut(e,t)),n})):[],d.update(),h=!0,o(d.before_update),d.fragment=!!s&&s(d.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);d.fragment&&d.fragment.l(t),t.forEach(b)}else d.fragment&&d.fragment.c();n.intro&&et(e.$$.fragment),ct(e,n.target,n.anchor,n.customElement),K()}A(f)}class dt{$destroy(){at(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function ht(e){let n,r;return{c(){n=v("span"),r=x(e[0]),C(n,"class","material-icons svelte-rsldo3")},m(t,e){$(t,n,e),m(n,r)},p(t,[e]){1&e&&q(r,t[0])},i:t,o:t,d(t){t&&b(n)}}}function mt(t,e,n){let{name:r}=e;return t.$$set=t=>{"name"in t&&n(0,r=t.name)},[r]}class pt extends dt{constructor(t){super(),ft(this,t,mt,ht,s,{name:0})}}function gt(e){let n,r,o,i;return{c(){n=v("a"),r=v("button"),o=x(e[1]),C(r,"class","pill"),C(n,"class","noprint"),C(n,"href",i=null==e[0]?"help":`help#${e[0]}`),C(n,"target","_blank")},m(t,e){$(t,n,e),m(n,r),m(r,o)},p(t,[e]){2&e&&q(o,t[1]),1&e&&i!==(i=null==t[0]?"help":`help#${t[0]}`)&&C(n,"href",i)},i:t,o:t,d(t){t&&b(n)}}}function $t(t,e,n){let{topic:r=null}=e,{label:o="?"}=e;return t.$$set=t=>{"topic"in t&&n(0,r=t.topic),"label"in t&&n(1,o=t.label)},[r,o]}class bt extends dt{constructor(t){super(),ft(this,t,$t,gt,s,{topic:0,label:1})}}function vt(t){const{h:e,m:n}=kt(t);return`${e}:${yt(n)}`}function xt(t){const{h:e,m:n}=kt(t);return`${yt(e%24)}:${yt(n)}`}function kt(t){const e=Math.floor(t);return{h:e,m:Math.round(60*(t-e))}}function yt(t){return t<10?`0${t}`:t.toString()}function wt(t){let e,n,r,o,i,s,l,c,a,u,f,d,h,p,g,y,w,S,C,M,E,P,z,D,L,_,A,H,T,F,j,W,R,N,G,O,B,U,X,I,K,J,V,Z,Q,Y,tt=t[0].markers[0].name+"",rt=xt(t[2])+"",ot=t[0].markers[t[0].markers.length-1].name+"",it=xt(t[2]+t[6])+"",st=Math.round(t[5])+"",ut=Math.round(t[4])+"",ft=t[7].toFixed(1)+"",dt=t[3].toFixed(1)+"",ht=vt(t[6])+"";return N=new bt({props:{topic:"calculation"}}),{c(){e=x("Start: "),n=v("b"),r=x(tt),o=x(", "),i=v("b"),s=x(rt),l=v("br"),c=x("\r\nEnde: "),a=v("b"),u=x(ot),f=x(", "),d=v("b"),h=x(it),p=v("br"),g=x("\r\nAuf-/Abstieg: ↑ "),y=v("b"),w=x(st),S=x(" m"),C=x(" ↓ "),M=v("b"),E=x(ut),P=x(" m"),z=v("br"),D=x("\r\nDistanz: "),L=v("b"),_=x(ft),A=x(" km"),H=v("br"),T=x("\r\nAufwand: "),F=v("b"),j=x(dt),W=x(" Lkm"),R=k(),lt(N.$$.fragment),G=v("br"),O=x("\r\nGeschwindigkeit: "),B=v("b"),U=x(t[1]),X=x(" Lkm/h"),I=v("br"),K=x("\r\nDauer: "),J=v("b"),V=x(ht),Z=x(" h"),Q=v("br")},m(t,b){$(t,e,b),$(t,n,b),m(n,r),$(t,o,b),$(t,i,b),m(i,s),$(t,l,b),$(t,c,b),$(t,a,b),m(a,u),$(t,f,b),$(t,d,b),m(d,h),$(t,p,b),$(t,g,b),$(t,y,b),m(y,w),m(y,S),$(t,C,b),$(t,M,b),m(M,E),m(M,P),$(t,z,b),$(t,D,b),$(t,L,b),m(L,_),m(L,A),$(t,H,b),$(t,T,b),$(t,F,b),m(F,j),m(F,W),$(t,R,b),ct(N,t,b),$(t,G,b),$(t,O,b),$(t,B,b),m(B,U),m(B,X),$(t,I,b),$(t,K,b),$(t,J,b),m(J,V),m(J,Z),$(t,Q,b),Y=!0},p(t,[e]){(!Y||1&e)&&tt!==(tt=t[0].markers[0].name+"")&&q(r,tt),(!Y||4&e)&&rt!==(rt=xt(t[2])+"")&&q(s,rt),(!Y||1&e)&&ot!==(ot=t[0].markers[t[0].markers.length-1].name+"")&&q(u,ot),(!Y||68&e)&&it!==(it=xt(t[2]+t[6])+"")&&q(h,it),(!Y||32&e)&&st!==(st=Math.round(t[5])+"")&&q(w,st),(!Y||16&e)&&ut!==(ut=Math.round(t[4])+"")&&q(E,ut),(!Y||128&e)&&ft!==(ft=t[7].toFixed(1)+"")&&q(_,ft),(!Y||8&e)&&dt!==(dt=t[3].toFixed(1)+"")&&q(j,dt),(!Y||2&e)&&q(U,t[1]),(!Y||64&e)&&ht!==(ht=vt(t[6])+"")&&q(V,ht)},i(t){Y||(et(N.$$.fragment,t),Y=!0)},o(t){nt(N.$$.fragment,t),Y=!1},d(t){t&&b(e),t&&b(n),t&&b(o),t&&b(i),t&&b(l),t&&b(c),t&&b(a),t&&b(f),t&&b(d),t&&b(p),t&&b(g),t&&b(y),t&&b(C),t&&b(M),t&&b(z),t&&b(D),t&&b(L),t&&b(H),t&&b(T),t&&b(F),t&&b(R),at(N,t),t&&b(G),t&&b(O),t&&b(B),t&&b(I),t&&b(K),t&&b(J),t&&b(Q)}}}function St(t,e,n){let r,o,i,s,l,{route:c}=e,{speed:a}=e,{start:u}=e;return t.$$set=t=>{"route"in t&&n(0,c=t.route),"speed"in t&&n(1,a=t.speed),"start"in t&&n(2,u=t.start)},t.$$.update=()=>{1&t.$$.dirty&&n(7,r=c.distanceSum[c.line.length-1]/1e3),1&t.$$.dirty&&n(3,o=c.effortSum[c.markers.length-1]),10&t.$$.dirty&&n(6,i=o/a),1&t.$$.dirty&&n(5,({ascent:s,descent:l}=function(t){let e=0,n=0;for(let r=1;r<t.markers.length;r++){const o=t.markerProfile[r].height-t.markerProfile[r-1].height;o>0?e+=o:n-=o}return{ascent:e,descent:n}}(c)),s,(n(4,l),n(0,c)))},[c,a,u,o,l,s,i,r]}class Ct extends dt{constructor(t){super(),ft(this,t,St,wt,s,{route:0,speed:1,start:2})}}function Mt(t,e){return t.x===e.x&&t.y===e.y}function qt(t,e){return n=function(t,e){return{x:t.x-e.x,y:t.y-e.y}}(e,t),Math.hypot(n.x,n.y);var n}const Et={backgroundColor:null,textColor:null,darkerAccentColor:null,accentColor:null,lighterAccentColor:null};function Pt(e){let n;return{c(){n=v("canvas"),C(n,"class","svelte-xd84ci")},m(t,r){$(t,n,r),e[2](n)},p:t,i:t,o:t,d(t){t&&b(n),e[2](null)}}}function zt(t,e,n){let r,{route:o}=e;return t.$$set=t=>{"route"in t&&n(1,o=t.route)},t.$$.update=()=>{3&t.$$.dirty&&r&&(n(0,r.width=800,r),n(0,r.height=200,r),function(t,e){const n=e.getContext("2d");n.clearRect(0,0,e.width,e.height);const r=12;let o=1/0,i=-1/0;for(let e of t.lineProfile)o=Math.min(o,e.height),i=Math.max(i,e.height);const s={x:t.distanceSum[t.distanceSum.length-1],y:i-o},l=Math.min((e.width-24)/s.x,(e.height-24-40)/s.y);e.width=Math.floor(s.x*l+24),e.height=Math.floor(s.y*l+24+40);const c=(t,n)=>{return i={x:(c={x:t,y:o-n}).x*(a=l),y:c.y*a},s={x:r,y:e.height-r-40},{x:i.x+s.x,y:i.y+s.y};var i,s,c,a},a=()=>{for(let e=0;e<t.lineProfile.length;e++){const r=c(t.lineProfileDistanceSum[e],t.lineProfile[e].height);0===e?n.moveTo(r.x,r.y):n.lineTo(r.x,r.y)}};n.beginPath(),a();const u=c(0,i),f=c(0,o),d=c(s.x,o);n.lineTo(d.x,e.height),n.lineTo(f.x,e.height);const h=n.createLinearGradient(0,u.y,0,e.height);h.addColorStop(0,Et.lighterAccentColor),h.addColorStop(1,Et.backgroundColor),n.fillStyle=h,n.fill(),n.beginPath(),a(),n.lineWidth=4,n.lineCap=n.lineJoin="round",n.strokeStyle=Et.accentColor,n.stroke(),n.font="bold 14px sans-serif",n.textAlign="center",n.textBaseline="middle";for(let e=0;e<t.markerProfile.length;e++){const r=c(t.distanceSum[t.markers[e].index],t.markerProfile[e].height);n.beginPath(),n.arc(r.x,r.y,10,0,2*Math.PI),n.fillStyle=Et.darkerAccentColor,n.fill(),n.fillStyle=Et.backgroundColor,n.fillText(e+1,r.x,r.y+.5)}const m=125*2**Math.floor(Math.log2(120/(125*l))),p=m*l;n.fillStyle=Et.textColor,n.fillRect(e.width-r-p,e.height-4,p,2),n.fillRect(e.width-r-p,e.height-6,2,6),n.fillRect(e.width-r-2,e.height-6,2,6),n.textAlign="right",n.textBaseline="bottom",n.fillText(`${m} m`,e.width-r,e.height-6)}(o,r))},[r,o,function(t){j[t?"unshift":"push"]((()=>{r=t,n(0,r),n(1,o)}))}]}class Dt extends dt{constructor(t){super(),ft(this,t,zt,Pt,s,{route:1})}}function Lt(t,{delay:n=0,duration:r=400,easing:o=e}={}){const i=+getComputedStyle(t).opacity;return{delay:n,duration:r,easing:o,css:t=>"opacity: "+t*i}}function _t(t){let e,n,r,o,i,s;const l=t[1].default,a=function(t,e,n,r){if(t){const o=c(t,e,n,r);return t[0](o)}}(l,t,t[0],null);return{c(){e=v("div"),n=v("div"),r=k(),o=v("div"),a&&a.c(),C(n,"class","background svelte-1d0v69e"),C(o,"class","dialog svelte-1d0v69e")},m(t,i){$(t,e,i),m(e,n),m(e,r),m(e,o),a&&a.m(o,null),s=!0},p(t,[e]){a&&a.p&&(!s||1&e)&&function(t,e,n,r,o,i){if(o){const s=c(e,n,r,i);t.p(s,o)}}(a,l,t,t[0],s?function(t,e,n,r){if(t[2]&&r){const o=t[2](r(n));if(void 0===e.dirty)return o;if("object"==typeof o){const t=[],n=Math.max(e.dirty.length,o.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|o[r];return t}return e.dirty|o}return e.dirty}(l,t[0],e,null):function(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}(t[0]),null)},i(t){s||(et(a,t),O((()=>{i||(i=ot(e,Lt,{duration:100},!0)),i.run(1)})),s=!0)},o(t){nt(a,t),i||(i=ot(e,Lt,{duration:100},!1)),i.run(0),s=!1},d(t){t&&b(e),a&&a.d(t),t&&i&&i.end()}}}function At(t,e,n){let{$$slots:r={},$$scope:o}=e;return t.$$set=t=>{"$$scope"in t&&n(0,o=t.$$scope)},[o,r]}class Ht extends dt{constructor(t){super(),ft(this,t,At,_t,s,{})}}function Tt(t){let e,n;return e=new Ht({props:{$$slots:{default:[Ft]},$$scope:{ctx:t}}}),{c(){lt(e.$$.fragment)},m(t,r){ct(e,t,r),n=!0},p(t,n){const r={};131&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(et(e.$$.fragment,t),n=!0)},o(t){nt(e.$$.fragment,t),n=!1},d(t){at(e,t)}}}function Ft(t){let e,n,r,i,s,l,c,a,u,f,d,h,p,g,y,M,q,P,z;return y=new pt({props:{name:"done"}}),{c(){e=v("h2"),e.textContent="Wegpunkt bearbeiten",n=k(),r=v("form"),i=v("label"),i.textContent="Name",s=k(),l=v("input"),c=k(),a=v("label"),a.textContent="Kommentar",u=k(),f=v("textarea"),d=k(),h=v("br"),p=k(),g=v("button"),lt(y.$$.fragment),M=x(" Fertig"),C(e,"class","svelte-cmh3w7"),C(i,"for","name"),C(i,"class","svelte-cmh3w7"),C(l,"id","name"),C(l,"type","text"),l.required=!0,C(l,"class","svelte-cmh3w7"),C(a,"for","comment"),C(a,"class","svelte-cmh3w7"),C(f,"id","comment"),C(f,"class","svelte-cmh3w7"),C(g,"class","svelte-cmh3w7")},m(o,b){$(o,e,b),$(o,n,b),$(o,r,b),m(r,i),m(r,s),m(r,l),E(l,t[1].name),m(r,c),m(r,a),m(r,u),m(r,f),E(f,t[1].comment),m(r,d),m(r,h),m(r,p),m(r,g),ct(y,g,null),m(g,M),q=!0,P||(z=[w(l,"input",t[4]),w(f,"input",t[5]),w(g,"click",t[6]),w(r,"submit",S(t[3]))],P=!0)},p(t,e){2&e&&l.value!==t[1].name&&E(l,t[1].name),2&e&&E(f,t[1].comment)},i(t){q||(et(y.$$.fragment,t),q=!0)},o(t){nt(y.$$.fragment,t),q=!1},d(t){t&&b(e),t&&b(n),t&&b(r),at(y),P=!1,o(z)}}}function jt(t){let e,n,r=null!=t[0]&&Tt(t);return{c(){r&&r.c(),e=y()},m(t,o){r&&r.m(t,o),$(t,e,o),n=!0},p(t,[n]){null!=t[0]?r?(r.p(t,n),1&n&&et(r,1)):(r=Tt(t),r.c(),et(r,1),r.m(e.parentNode,e)):r&&(Y(),nt(r,1,1,(()=>{r=null})),tt())},i(t){n||(et(r),n=!0)},o(t){nt(r),n=!1},d(t){r&&r.d(t),t&&b(e)}}}function Wt(t,e,n){let r,{route:o}=e,{selected:i=null}=e;return t.$$set=t=>{"route"in t&&n(2,o=t.route),"selected"in t&&n(0,i=t.selected)},t.$$.update=()=>{5&t.$$.dirty&&n(1,r=o.markers[i])},[i,r,o,function(e){T.call(this,t,e)},function(){r.name=this.value,n(1,r),n(2,o),n(0,i)},function(){r.comment=this.value,n(1,r),n(2,o),n(0,i)},()=>n(0,i=null)]}class Rt extends dt{constructor(t){super(),ft(this,t,Wt,jt,s,{route:2,selected:0})}}function Nt(t,e,n){const r=[];for(let o=0;o<t.markers.length;o++)r[o]={index:o,name:t.markers[o].name,comment:t.markers[o].comment,height:t.markerProfile[o].height,distance:t.distanceSum[t.markers[o].index]/1e3,effort:t.effortSum[o],duration:t.effortSum[o]/e,time:t.effortSum[o]/e+n};for(let e=1;e<t.markers.length;e++)r[e-1].diff={height:r[e].height-r[e-1].height,distance:r[e].distance-r[e-1].distance,effort:t.effort[e],duration:r[e].duration-r[e-1].duration};return r}function Gt(t,e,n){const r=t.slice();return r[8]=e[n],r}function Ot(t){let e,n,r,o,i,s,l,c=(t[8].comment??"")+"",a=t[8].diff&&Bt(t);return{c(){e=v("tr"),n=v("td"),r=x(c),o=k(),a&&a.c(),i=k(),s=v("td"),l=k(),C(n,"class","comment svelte-qg894n"),C(s,"class","svelte-qg894n"),C(e,"class","alt svelte-qg894n")},m(t,c){$(t,e,c),m(e,n),m(n,r),m(e,o),a&&a.m(e,null),m(e,i),m(e,s),m(e,l)},p(t,n){2&n&&c!==(c=(t[8].comment??"")+"")&&q(r,c),t[8].diff?a?a.p(t,n):(a=Bt(t),a.c(),a.m(e,i)):a&&(a.d(1),a=null)},d(t){t&&b(e),a&&a.d()}}}function Bt(t){let e,n,r,o,i,s,l,c,a,u,f,d,h,p,g,y=Math.round(t[8].diff.height)+"",w=t[8].diff.distance.toFixed(1)+"",S=t[8].diff.effort.toFixed(1)+"",M=vt(t[8].diff.duration)+"";return{c(){e=v("td"),n=x(y),r=x(" m"),o=k(),i=v("td"),s=x(w),l=x(" km"),c=k(),a=v("td"),u=x(S),f=x(" Lkm"),d=k(),h=v("td"),p=x(M),g=x(" h"),C(e,"class","number svelte-qg894n"),C(i,"class","number svelte-qg894n"),C(a,"class","number svelte-qg894n"),C(h,"class","number svelte-qg894n")},m(t,b){$(t,e,b),m(e,n),m(e,r),$(t,o,b),$(t,i,b),m(i,s),m(i,l),$(t,c,b),$(t,a,b),m(a,u),m(a,f),$(t,d,b),$(t,h,b),m(h,p),m(h,g)},p(t,e){2&e&&y!==(y=Math.round(t[8].diff.height)+"")&&q(n,y),2&e&&w!==(w=t[8].diff.distance.toFixed(1)+"")&&q(s,w),2&e&&S!==(S=t[8].diff.effort.toFixed(1)+"")&&q(u,S),2&e&&M!==(M=vt(t[8].diff.duration)+"")&&q(p,M)},d(t){t&&b(e),t&&b(o),t&&b(i),t&&b(c),t&&b(a),t&&b(d),t&&b(h)}}}function Ut(t){let e,n,r,o,i,s,l,c,a,u,f,d,h,p,g,S,M,E,P,z,D,L,_,A,H,T,F,j,W,R,N,G,O,B,U=t[8].index+1+"",X=t[8].name+"",I=Math.round(t[8].height)+"",K=t[8].distance.toFixed(1)+"",J=t[8].effort.toFixed(1)+"",V=vt(t[8].duration)+"",Z=xt(t[8].time)+"";function Q(){return t[7](t[8])}W=new pt({props:{name:"edit"}});let Y=(t[8].comment||t[8].diff)&&Ot(t);return{c(){e=v("tr"),n=v("td"),r=v("span"),o=x(U),i=k(),s=x(X),l=k(),c=v("td"),a=x(I),u=x(" m"),f=k(),d=v("td"),h=x(K),p=x(" km"),g=k(),S=v("td"),M=x(J),E=x(" Lkm"),P=k(),z=v("td"),D=x(V),L=x(" h"),_=k(),A=v("td"),H=x(Z),T=k(),F=v("td"),j=v("button"),lt(W.$$.fragment),R=k(),Y&&Y.c(),N=y(),C(r,"class","pill svelte-qg894n"),C(n,"class","name svelte-qg894n"),C(c,"class","number svelte-qg894n"),C(d,"class","number svelte-qg894n"),C(S,"class","number svelte-qg894n"),C(z,"class","number svelte-qg894n"),C(A,"class","number svelte-qg894n"),C(j,"class","pill"),C(F,"class","noprint svelte-qg894n")},m(t,b){$(t,e,b),m(e,n),m(n,r),m(r,o),m(n,i),m(n,s),m(e,l),m(e,c),m(c,a),m(c,u),m(e,f),m(e,d),m(d,h),m(d,p),m(e,g),m(e,S),m(S,M),m(S,E),m(e,P),m(e,z),m(z,D),m(z,L),m(e,_),m(e,A),m(A,H),m(e,T),m(e,F),m(F,j),ct(W,j,null),$(t,R,b),Y&&Y.m(t,b),$(t,N,b),G=!0,O||(B=w(j,"click",Q),O=!0)},p(e,n){t=e,(!G||2&n)&&U!==(U=t[8].index+1+"")&&q(o,U),(!G||2&n)&&X!==(X=t[8].name+"")&&q(s,X),(!G||2&n)&&I!==(I=Math.round(t[8].height)+"")&&q(a,I),(!G||2&n)&&K!==(K=t[8].distance.toFixed(1)+"")&&q(h,K),(!G||2&n)&&J!==(J=t[8].effort.toFixed(1)+"")&&q(M,J),(!G||2&n)&&V!==(V=vt(t[8].duration)+"")&&q(D,V),(!G||2&n)&&Z!==(Z=xt(t[8].time)+"")&&q(H,Z),t[8].comment||t[8].diff?Y?Y.p(t,n):(Y=Ot(t),Y.c(),Y.m(N.parentNode,N)):Y&&(Y.d(1),Y=null)},i(t){G||(et(W.$$.fragment,t),G=!0)},o(t){nt(W.$$.fragment,t),G=!1},d(t){t&&b(e),at(W),t&&b(R),Y&&Y.d(t),t&&b(N),O=!1,B()}}}function Xt(t){let e,n,r,o,i,s,l,c;function a(e){t[5](e)}function u(e){t[6](e)}let f={};void 0!==t[0]&&(f.route=t[0]),void 0!==t[2]&&(f.selected=t[2]),e=new Rt({props:f}),j.push((()=>st(e,"route",a))),j.push((()=>st(e,"selected",u)));let d=t[1],h=[];for(let e=0;e<d.length;e+=1)h[e]=Ut(Gt(t,d,e));const p=t=>nt(h[t],1,1,(()=>{h[t]=null}));return{c(){lt(e.$$.fragment),o=k(),i=v("table"),s=v("tr"),s.innerHTML='<th class="svelte-qg894n">Wegpunkt</th> \n        <th class="svelte-qg894n">Höhe</th> \n        <th class="svelte-qg894n">Distanz</th> \n        <th class="svelte-qg894n">Aufwand</th> \n        <th class="svelte-qg894n">Dauer</th> \n        <th class="svelte-qg894n">Uhrzeit</th>',l=k();for(let t=0;t<h.length;t+=1)h[t].c();C(i,"class","svelte-qg894n")},m(t,n){ct(e,t,n),$(t,o,n),$(t,i,n),m(i,s),m(i,l);for(let t=0;t<h.length;t+=1)h[t].m(i,null);c=!0},p(t,[o]){const s={};if(!n&&1&o&&(n=!0,s.route=t[0],B((()=>n=!1))),!r&&4&o&&(r=!0,s.selected=t[2],B((()=>r=!1))),e.$set(s),6&o){let e;for(d=t[1],e=0;e<d.length;e+=1){const n=Gt(t,d,e);h[e]?(h[e].p(n,o),et(h[e],1)):(h[e]=Ut(n),h[e].c(),et(h[e],1),h[e].m(i,null))}for(Y(),e=d.length;e<h.length;e+=1)p(e);tt()}},i(t){if(!c){et(e.$$.fragment,t);for(let t=0;t<d.length;t+=1)et(h[t]);c=!0}},o(t){nt(e.$$.fragment,t),h=h.filter(Boolean);for(let t=0;t<h.length;t+=1)nt(h[t]);c=!1},d(t){at(e,t),t&&b(o),t&&b(i),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(h,t)}}}function It(t,e,n){let r,{route:o}=e,{speed:i}=e,{start:s}=e,l=[];return t.$$set=t=>{"route"in t&&n(0,o=t.route),"speed"in t&&n(3,i=t.speed),"start"in t&&n(4,s=t.start)},t.$$.update=()=>{25&t.$$.dirty&&n(1,l=Nt(o,i,s))},[o,l,r,i,s,function(t){o=t,n(0,o)},function(t){r=t,n(2,r)},t=>n(2,r=t.index)]}class Kt extends dt{constructor(t){super(),ft(this,t,It,Xt,s,{route:0,speed:3,start:4})}}function Jt(t,e,n){const r={type:"LineString",coordinates:t.map((t=>[Math.round(t.x),Math.round(t.y)]))};return fetch("https://api3.geo.admin.ch/rest/services/profile.json",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:`sr=21781&distinct_points=${e}&nb_points=${n}&geom=${JSON.stringify(r)}`}).then((t=>{if(t.ok)return t.json();throw"Das Höhenprofil konnte nicht geladen werden."})).then((n=>new Promise((r=>{let o=n.map((t=>({point:{x:t.easting,y:t.northing},height:t.alts.COMB})));e&&(o=o.filter((e=>t.some((t=>qt(e.point,t)<2))))),r(o)})))).catch((()=>{throw"Die Verbindung zu den swisstopo-Servern ist fehlgeschlagen."}))}function Vt(t){t.distanceSum=Zt(t.line),t.lineProfileDistanceSum=Zt(t.lineProfile.map((t=>t.point))),t.effort=function(t){const e=[];e[0]=0;for(let n=1;n<t.markers.length;n++){const r=t.distanceSum[t.markers[n].index]-t.distanceSum[t.markers[n-1].index],o=t.markerProfile[n].height-t.markerProfile[n-1].height,i=o/r;e[n]=r/1e3,i>0?e[n]+=o/100:i<-.2&&(e[n]+=Math.abs(o)/150)}return e}(t),t.effortSum=Qt(t.effort)}function Zt(t){return Qt(t.map(((e,n)=>qt(t[Math.max(0,n-1)],t[n]))))}function Qt(t){const e=[];let n=0;for(let r=0;r<t.length;r++)n+=t[r],e[r]=n;return e}function Yt(t){let e,n,r,i,s,l,c,a,u,f,d,h,p,g,y,S,q,P,z,D,L,_,A,H,T,F,W,R,N,G,O,U,X,I,K,J,V,Z,Q,Y,tt,rt,ot,it;function ut(e){t[10](e)}s=new Ct({props:{route:t[0],speed:t[3],start:t[4]}}),u=new pt({props:{name:"swap_horiz"}}),T=new pt({props:{name:"print"}}),N=new pt({props:{name:"output"}});let ft={speed:t[3],start:t[4]};return void 0!==t[0]&&(ft.route=t[0]),K=new Kt({props:ft}),j.push((()=>st(K,"route",ut))),tt=new Dt({props:{route:t[0]}}),{c(){e=v("div"),n=v("div"),r=v("h2"),r.textContent="Route",i=k(),lt(s.$$.fragment),l=k(),c=v("div"),a=v("button"),lt(u.$$.fragment),f=x(" Richtung wechseln"),d=k(),h=v("br"),p=k(),g=v("label"),g.textContent="Abreise",y=k(),S=v("input"),q=k(),P=v("label"),P.textContent="Geschwindigkeit in Lkm/h",z=k(),D=v("input"),L=k(),_=v("br"),A=k(),H=v("button"),lt(T.$$.fragment),F=x(" Drucken"),W=x("\r\n         \r\n        "),R=v("button"),lt(N.$$.fragment),G=x(" Exportieren (CSV)"),O=k(),U=v("div"),X=v("h2"),X.textContent="Marschzeittabelle",I=k(),lt(K.$$.fragment),V=k(),Z=v("div"),Q=v("h2"),Q.textContent="Höhenprofil",Y=k(),lt(tt.$$.fragment),C(n,"class","info"),C(a,"class","secondary svelte-eqg4zm"),C(g,"for","start"),C(g,"class","svelte-eqg4zm"),C(S,"id","start"),C(S,"type","time"),S.required=!0,C(S,"class","svelte-eqg4zm"),C(P,"for","speed"),C(P,"class","svelte-eqg4zm"),C(D,"id","speed"),C(D,"type","number"),C(D,"min","0.5"),C(D,"step","0.5"),D.required=!0,C(D,"class","svelte-eqg4zm"),C(H,"class","svelte-eqg4zm"),C(R,"class","secondary svelte-eqg4zm"),C(c,"class","options noprint svelte-eqg4zm"),C(e,"class","general svelte-eqg4zm"),C(U,"class","table svelte-eqg4zm"),C(Z,"class","profile svelte-eqg4zm")},m(o,b){$(o,e,b),m(e,n),m(n,r),m(n,i),ct(s,n,null),m(e,l),m(e,c),m(c,a),ct(u,a,null),m(a,f),m(c,d),m(c,h),m(c,p),m(c,g),m(c,y),m(c,S),E(S,t[2]),m(c,q),m(c,P),m(c,z),m(c,D),E(D,t[1]),m(c,L),m(c,_),m(c,A),m(c,H),ct(T,H,null),m(H,F),m(c,W),m(c,R),ct(N,R,null),m(R,G),$(o,O,b),$(o,U,b),m(U,X),m(U,I),ct(K,U,null),$(o,V,b),$(o,Z,b),m(Z,Q),m(Z,Y),ct(tt,Z,null),rt=!0,ot||(it=[w(a,"click",t[5]),w(S,"input",t[7]),w(D,"input",t[8]),w(H,"click",t[9]),w(R,"click",t[6])],ot=!0)},p(t,[e]){const n={};1&e&&(n.route=t[0]),8&e&&(n.speed=t[3]),16&e&&(n.start=t[4]),s.$set(n),4&e&&E(S,t[2]),2&e&&M(D.value)!==t[1]&&E(D,t[1]);const r={};8&e&&(r.speed=t[3]),16&e&&(r.start=t[4]),!J&&1&e&&(J=!0,r.route=t[0],B((()=>J=!1))),K.$set(r);const o={};1&e&&(o.route=t[0]),tt.$set(o)},i(t){rt||(et(s.$$.fragment,t),et(u.$$.fragment,t),et(T.$$.fragment,t),et(N.$$.fragment,t),et(K.$$.fragment,t),et(tt.$$.fragment,t),rt=!0)},o(t){nt(s.$$.fragment,t),nt(u.$$.fragment,t),nt(T.$$.fragment,t),nt(N.$$.fragment,t),nt(K.$$.fragment,t),nt(tt.$$.fragment,t),rt=!1},d(t){t&&b(e),at(s),at(u),at(T),at(N),t&&b(O),t&&b(U),at(K),t&&b(V),t&&b(Z),at(tt),ot=!1,o(it)}}}function te(t,e,n){let r,o,{route:i}=e,s=4,l="00:00";return t.$$set=t=>{"route"in t&&n(0,i=t.route)},t.$$.update=()=>{2&t.$$.dirty&&!window.isNaN(s)&&s>0&&n(3,r=s),4&t.$$.dirty&&n(4,o=l.split(":").map(((t,e)=>Number(t)/60**e)).reduce(((t,e)=>t+e)))},[i,s,l,r,o,function(){!function(t){t.line.reverse(),t.markers.reverse(),t.lineProfile?.reverse(),t.markerProfile?.reverse(),t.markers.forEach((e=>e.index=t.line.length-e.index-1)),Vt(t)}(i),n(0,i)},function(){const t=[["Nr.","Name","Kommentar","Höhe / m","Unterschied Höhe / m","Total Distanz / km","Unterschied Distanz / km","Total Aufwand / Lkm","Unterschied Aufwand / Lkm","Total Dauer / h","Unterschied Dauer / h","Uhrzeit / hh:mm"],...Nt(i,r,o).map((t=>[t.index+1,t.name,t.comment??"",t.height,t.diff?.height??0,t.distance,t.diff?.distance??0,t.effort,t.diff?.effort??0,t.duration,t.diff?.duration??0,xt(t.time)]))].map((t=>t.map((t=>`"${t}"`)).join(","))).join("\n"),e=document.createElement("a");e.href=URL.createObjectURL(new Blob([t],{type:"text/csv"})),e.download="marschzeittabelle.csv",e.click()},function(){l=this.value,n(2,l)},function(){s=M(this.value),n(1,s)},()=>window.print(),function(t){i=t,n(0,i)}]}class ee extends dt{constructor(t){super(),ft(this,t,te,Yt,s,{route:0})}}function ne(e){let n,r,o,i,s,c,a,u,f,d,h,p,g,y,w,S,M,q,E,P,z;return g=new bt({props:{topic:"export",label:"Wie geht das?"}}),{c(){var t,e;n=v("div"),n.innerHTML='<h1 class="svelte-1578vb4">Marschzeit­tabelle<br/>leicht gemacht.</h1> \n<p class="subtitle svelte-1578vb4">Wir übertragen deine Route automatisch in eine Marschzeittabelle, damit du dich auf die Wanderplanung konzentrieren kannst.</p>',r=k(),o=v("div"),i=v("div"),s=v("h2"),s.textContent="1. Planen",c=k(),a=v("p"),a.textContent="Route einzeichnen und Wegpunkte benennen - das kennst du bereits.",u=k(),f=v("h2"),f.textContent="2. Exportieren",d=k(),h=v("p"),p=x("In wenigen Klicks erledigt. "),lt(g.$$.fragment),y=k(),w=v("h2"),w.textContent="3. Hochladen",S=k(),M=v("p"),M.textContent="Jetzt noch Geschwindigkeit, Startzeit, Bemerkungen und Pausen hinzufügen.",q=k(),E=v("img"),C(n,"class","title svelte-1578vb4"),C(s,"class","svelte-1578vb4"),C(a,"class","svelte-1578vb4"),C(f,"class","svelte-1578vb4"),C(h,"class","svelte-1578vb4"),C(w,"class","svelte-1578vb4"),C(M,"class","svelte-1578vb4"),C(i,"class","svelte-1578vb4"),t=E.src,e=P="example.jpg",l||(l=document.createElement("a")),l.href=e,t!==l.href&&C(E,"src","example.jpg"),C(E,"alt","Beispiel"),C(E,"class","svelte-1578vb4"),C(o,"class","tutorial svelte-1578vb4")},m(t,e){$(t,n,e),$(t,r,e),$(t,o,e),m(o,i),m(i,s),m(i,c),m(i,a),m(i,u),m(i,f),m(i,d),m(i,h),m(h,p),ct(g,h,null),m(i,y),m(i,w),m(i,S),m(i,M),m(o,q),m(o,E),z=!0},p:t,i(t){z||(et(g.$$.fragment,t),z=!0)},o(t){nt(g.$$.fragment,t),z=!1},d(t){t&&b(n),t&&b(r),t&&b(o),at(g)}}}class re extends dt{constructor(t){super(),ft(this,t,null,ne,s,{})}}function oe(e){let n;return{c(){n=v("div"),C(n,"class","svelte-12lg60")},m(t,e){$(t,n,e)},p:t,i:t,o:t,d(t){t&&b(n)}}}class ie extends dt{constructor(t){super(),ft(this,t,null,oe,s,{})}}function se(t){return function(t){return new Promise(((e,n)=>{const r=new FileReader;r.addEventListener("load",(()=>e(r.result))),r.addEventListener("error",(()=>n("Die Datei konnte nicht gelesen werden."))),r.readAsText(t)}))}(t).then((t=>async function(t){const e=(new DOMParser).parseFromString(t,"application/xml");if(e.querySelector("parsererror"))throw"Die Datei ist nicht in gültigem XML-Format.";return e}(t))).then((e=>t.name.endsWith(".kml")?async function(t){const e=[],n=[],r=t=>{const[e,n]=t.split(",");return le(n,e)},o=t.querySelectorAll("Placemark");for(let t of o){if(t.querySelector("LineString")){const n=t.querySelector("LineString coordinates").innerHTML.trim().split(" ").map((t=>r(t)));e.push(n)}if(t.querySelector("Point")){const e=t.querySelector("name").innerHTML.trim(),o=r(t.querySelector("Point coordinates").innerHTML);n.push({name:e,point:o})}}return{lines:e,markers:n}}(e):t.name.endsWith(".gpx")?async function(t){const e=[],n=[],r=t=>le(t.getAttribute("lat"),t.getAttribute("lon")),o=t.querySelectorAll("trkseg");for(let t of o){const n=Array.from(t.querySelectorAll("trkpt")).map((t=>r(t)));e.push(n)}const i=t.querySelectorAll("trkpt > name");for(let t of i){const e=t.innerHTML.trim(),o=r(t.parentElement);n.push({name:e,point:o})}if(0===n.length){const e=t.querySelectorAll("wpt");for(let t of e){const e=t.querySelector("name").innerHTML.trim(),o=r(t);n.push({name:e,point:o})}}return{lines:e,markers:n}}(e):void 0)).then((({lines:t,markers:e})=>async function(t,e){if(0===t.length)throw"Die Route enthält keine Linie.";if(0===e.length)throw"Die Route enthält keine Wegpunkte.";for(;t.length>1;){const e=ce(t);if(null==e)throw"Die Route enthält Linien, die nicht miteinander verbunden sind.";e.reverseFirst&&t[e.i].reverse(),e.reverseSecond&&t[e.j].reverse(),t[e.i].push(...t[e.j]),t.splice(e.j,1)}const n=t[0];let r=null;for(let t=0;t<n.length;t++){const o=e.filter((t=>null==r||!Mt(t.point,r))).filter((e=>qt(e.point,n[t])<10));if(0===o.length)continue;const i=o.filter((t=>null==t.index));if(o.length>1){throw`Mehrere Wegpunkte am selben Ort: ${i.map((t=>`"${t.name}"`)).join(", ")}.`}const s=o[0];null==s.index?s.index=t:e.push({name:s.name,point:s.point,index:t}),r=s.point}const o=e.filter((t=>null==t.index));if(o.length>0){throw`Wegpunkte nicht in der Nähe von Eckpunkten der Linie: ${o.map((t=>`"${t.name}"`)).join(", ")}.`}return e.sort(((t,e)=>t.index-e.index)),{line:n,markers:e}}(t,e))).then((t=>async function(t){return t.lineProfile=await Jt(t.line,!1,100),t.markerProfile=await Jt(t.markers.map((e=>t.line[e.index])),!0,t.markers.length),Vt(t),t}(t)))}function le(t,e){const[n,r]=class{static WGStoCH(t,e){return[this.WGStoCHy(t,e),this.WGStoCHx(t,e)]}static WGStoCHx(t,e){const n=((t=this.DECtoSEX(t))-169028.66)/1e4,r=((e=this.DECtoSEX(e))-26782.5)/1e4;return 200147.07+308807.95*n+3745.25*Math.pow(r,2)+76.63*Math.pow(n,2)-194.56*Math.pow(r,2)*n+119.79*Math.pow(n,3)}static WGStoCHy(t,e){const n=((t=this.DECtoSEX(t))-169028.66)/1e4,r=((e=this.DECtoSEX(e))-26782.5)/1e4;return 600072.37+211455.93*r-10938.51*r*n-.36*r*Math.pow(n,2)-44.54*Math.pow(r,3)}static CHtoWGS(t,e){return[this.CHtoWGSlng(t,e),this.CHtoWGSlat(t,e)]}static CHtoWGSlat(t,e){const n=(t-6e5)/1e6,r=(e-2e5)/1e6;return 100*(16.9023892+3.238272*r-.270978*Math.pow(n,2)-.002528*Math.pow(r,2)-.0447*Math.pow(n,2)*r-.014*Math.pow(r,3))/36}static CHtoWGSlng(t,e){const n=(t-6e5)/1e6,r=(e-2e5)/1e6;return 100*(2.6779094+4.728982*n+.791484*n*r+.1306*n*Math.pow(r,2)-.0436*Math.pow(n,3))/36}static DECtoSEX(t){const e=parseInt(t),n=parseInt(60*(t-e));return 60*(60*(t-e)-n)+60*n+3600*e}}.WGStoCH(Number(t),Number(e));return{x:n,y:r}}function ce(t){const e=(t,e)=>qt(t,e)<10;for(let n=0;n<t.length;n++)for(let r=n+1;r<t.length;r++){if(e(t[n][t[n].length-1],t[r][0]))return{i:n,j:r,reverseFirst:!1,reverseSecond:!1};if(e(t[n][0],t[r][t[r].length-1]))return{i:n,j:r,reverseFirst:!0,reverseSecond:!0};if(e(t[n][0],t[r][0]))return{i:n,j:r,reverseFirst:!0,reverseSecond:!1};if(e(t[n][t[n].length-1],t[r][t[r].length-1]))return{i:n,j:r,reverseFirst:!1,reverseSecond:!0}}return null}function ae(e){let n,r,i,s,l,c,a,u,f,d,h,p,g,y,S,M;return d=new pt({props:{name:"upload_file"}}),{c(){n=v("h2"),n.textContent="Route hochladen",r=k(),i=v("p"),i.innerHTML='Unterstützt sind <b>KML-Dateien</b> von <a href="https://map.geo.admin.ch" target="_blank">map.geo.admin.ch</a> oder der <a href="https://www.swisstopo.admin.ch/en/maps-data-online/maps-geodata-online/swisstopo-app.html" target="_blank">swisstopo-App</a>, sowie <b>GPX-Dateien</b> von <a href="https://www.outdooractive.com/de/routeplanner" target="_blank">outdooractive.com</a>.',s=k(),l=v("p"),l.textContent="Datei hierher ziehen oder...",c=k(),a=v("input"),u=k(),f=v("button"),lt(d.$$.fragment),h=x(" Datei auswählen"),p=k(),g=v("br"),C(n,"class","svelte-4yulh5"),C(a,"type","file"),C(a,"id","upload"),C(a,"accept",".kml, .gpx"),C(a,"class","svelte-4yulh5")},m(t,o){$(t,n,o),$(t,r,o),$(t,i,o),$(t,s,o),$(t,l,o),$(t,c,o),$(t,a,o),$(t,u,o),$(t,f,o),ct(d,f,null),m(f,h),$(t,p,o),$(t,g,o),y=!0,S||(M=[w(a,"change",e[5]),w(f,"click",e[6])],S=!0)},p:t,i(t){y||(et(d.$$.fragment,t),y=!0)},o(t){nt(d.$$.fragment,t),y=!1},d(t){t&&b(n),t&&b(r),t&&b(i),t&&b(s),t&&b(l),t&&b(c),t&&b(a),t&&b(u),t&&b(f),at(d),t&&b(p),t&&b(g),S=!1,o(M)}}}function ue(t){let e,n,r,o={ctx:t,current:null,token:null,hasCatch:!0,pending:he,then:de,catch:fe,error:8,blocks:[,,,]};return it(n=t[1],o),{c(){e=y(),o.block.c()},m(t,n){$(t,e,n),o.block.m(t,o.anchor=n),o.mount=()=>e.parentNode,o.anchor=e,r=!0},p(e,r){t=e,o.ctx=t,2&r&&n!==(n=t[1])&&it(n,o)||function(t,e,n){const r=e.slice(),{resolved:o}=t;t.current===t.then&&(r[t.value]=o),t.current===t.catch&&(r[t.error]=o),t.block.p(r,n)}(o,t,r)},i(t){r||(et(o.block),r=!0)},o(t){for(let t=0;t<3;t+=1){nt(o.blocks[t])}r=!1},d(t){t&&b(e),o.block.d(t),o.token=null,o=null}}}function fe(t){let e,n,r,o,i,s,l,c,a,u,f,d,h,p=t[8]+"";return a=new pt({props:{name:"refresh"}}),{c(){e=v("h2"),e.textContent="Hoppla!",n=k(),r=v("p"),o=x("Es gab einen Fehler beim Import:"),i=v("br"),s=x(p),l=k(),c=v("button"),lt(a.$$.fragment),u=x(" Nochmal versuchen"),C(e,"class","svelte-4yulh5"),C(c,"class","secondary")},m(p,g){$(p,e,g),$(p,n,g),$(p,r,g),m(r,o),m(r,i),m(r,s),$(p,l,g),$(p,c,g),ct(a,c,null),m(c,u),f=!0,d||(h=w(c,"click",t[4]),d=!0)},p(t,e){(!f||2&e)&&p!==(p=t[8]+"")&&q(s,p)},i(t){f||(et(a.$$.fragment,t),f=!0)},o(t){nt(a.$$.fragment,t),f=!1},d(t){t&&b(e),t&&b(n),t&&b(r),t&&b(l),t&&b(c),at(a),d=!1,h()}}}function de(e){return{c:t,m:t,p:t,i:t,o:t,d:t}}function he(e){let n,r,o,i,s,l;return s=new ie({}),{c(){n=v("h2"),n.textContent="Route wird gewandert...",r=k(),o=v("br"),i=k(),lt(s.$$.fragment),C(n,"class","svelte-4yulh5")},m(t,e){$(t,n,e),$(t,r,e),$(t,o,e),$(t,i,e),ct(s,t,e),l=!0},p:t,i(t){l||(et(s.$$.fragment,t),l=!0)},o(t){nt(s.$$.fragment,t),l=!1},d(t){t&&b(n),t&&b(r),t&&b(o),t&&b(i),at(s,t)}}}function me(t){let e,n,r,i,s,l;const c=[ue,ae],a=[];function u(t,e){return t[0]&&t[0][0]?0:1}return n=u(t),r=a[n]=c[n](t),{c(){e=v("div"),r.c(),C(e,"class","svelte-4yulh5")},m(r,o){$(r,e,o),a[n].m(e,null),i=!0,s||(l=[w(e,"drop",S(t[7])),w(e,"dragover",S(t[3]))],s=!0)},p(t,[o]){let i=n;n=u(t),n===i?a[n].p(t,o):(Y(),nt(a[i],1,1,(()=>{a[i]=null})),tt(),r=a[n],r?r.p(t,o):(r=a[n]=c[n](t),r.c()),et(r,1),r.m(e,null))},i(t){i||(et(r),i=!0)},o(t){nt(r),i=!1},d(t){t&&b(e),a[n].d(),s=!1,o(l)}}}function pe(t,e,n){let r,o,{route:i=null}=e;return t.$$set=t=>{"route"in t&&n(2,i=t.route)},t.$$.update=()=>{1&t.$$.dirty&&r&&r[0]&&n(1,o=se(r[0]).then((t=>new Promise((e=>setTimeout((()=>e(t)),500))))).then((t=>n(2,i=t))))},[r,o,i,function(e){T.call(this,t,e)},()=>n(0,r=null),function(){r=this.files,n(0,r)},()=>document.getElementById("upload").click(),t=>n(0,r=t.dataTransfer.files)]}class ge extends dt{constructor(t){super(),ft(this,t,pe,me,s,{route:2})}}function $e(t){let e,n,r,o,i,s;return o=new ee({props:{route:t[0]}}),{c(){e=v("header"),e.innerHTML='<a href=".">❮ startseite</a>',n=k(),r=v("main"),lt(o.$$.fragment),C(e,"class","noprint")},m(t,i){$(t,e,i),$(t,n,i),$(t,r,i),ct(o,r,null),s=!0},p(t,e){const n={};1&e&&(n.route=t[0]),o.$set(n)},i(t){s||(et(o.$$.fragment,t),O((()=>{i||(i=ot(r,Lt,{},!0)),i.run(1)})),s=!0)},o(t){nt(o.$$.fragment,t),i||(i=ot(r,Lt,{},!1)),i.run(0),s=!1},d(t){t&&b(e),t&&b(n),t&&b(r),at(o),t&&i&&i.end()}}}function be(t){let e,n,r,o,i,s;function l(e){t[1](e)}n=new re({});let c={};return void 0!==t[0]&&(c.route=t[0]),o=new ge({props:c}),j.push((()=>st(o,"route",l))),{c(){e=v("main"),lt(n.$$.fragment),r=k(),lt(o.$$.fragment)},m(t,i){$(t,e,i),ct(n,e,null),m(e,r),ct(o,e,null),s=!0},p(t,e){const n={};!i&&1&e&&(i=!0,n.route=t[0],B((()=>i=!1))),o.$set(n)},i(t){s||(et(n.$$.fragment,t),et(o.$$.fragment,t),s=!0)},o(t){nt(n.$$.fragment,t),nt(o.$$.fragment,t),s=!1},d(t){t&&b(e),at(n),at(o)}}}function ve(t){let e,n,r,o,i;const s=[be,$e],l=[];function c(t,e){return null==t[0]?0:1}return e=c(t),n=l[e]=s[e](t),{c(){n.c(),r=k(),o=v("footer"),o.innerHTML='<span>marschzeittabelle.ch</span> \n    <span class="noprint">| <a href="help">hilfe</a>\n        | <a href="https://github.com/ckolin/marschzeittabelle">github</a></span>',C(o,"class","svelte-1pxn2rk")},m(t,n){l[e].m(t,n),$(t,r,n),$(t,o,n),i=!0},p(t,[o]){let i=e;e=c(t),e===i?l[e].p(t,o):(Y(),nt(l[i],1,1,(()=>{l[i]=null})),tt(),n=l[e],n?n.p(t,o):(n=l[e]=s[e](t),n.c()),et(n,1),n.m(r.parentNode,r))},i(t){i||(et(n),i=!0)},o(t){nt(n),i=!1},d(t){l[e].d(t),t&&b(r),t&&b(o)}}}function xe(t,e,n){let r;return[r,function(t){r=t,n(0,r)}]}const ke=new class extends dt{constructor(t){super(),ft(this,t,xe,ve,s,{})}}({target:document.body});return function(){for(let t of Object.keys(Et)){const e="--"+t.replace(/[A-Z]/g,(t=>"-"+t.toLowerCase()));Et[t]=window.getComputedStyle(document.body).getPropertyValue(e)}}(),ke}();
//# sourceMappingURL=bundle.js.map
